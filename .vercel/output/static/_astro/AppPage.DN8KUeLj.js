import{c as k,j as e}from"./createLucideIcon.Dkxjm4wi.js";import{r as i}from"./index.BkdHoFEG.js";import{Q as Gt,i as xe,h as Ht,a as Vt,u as qt,R as Bt,X as Ce,C as ke,b as Te,S as Kt,c as Ut,d as Wt,e as Qt,f as Zt,B as W,g as M,j as Yt,k as ne,l as Se,m as V,n as ve,o as Jt,t as K,p as Xt,T as er}from"./sonner.hCFXhOXH.js";import{c as Z,a as De,u as z,b as ae,R as tr,A as rr,d as T,P as Pe,e as sr,D as Re,C as nr,L as _e,f as ar,g as Ae,h as or,i as ir,j as lr,k as cr,F as dr,I as ur}from"./Combination.X7r7J2UN.js";import{u as L,P as R,c as Ee,a as N,B as S,b as pr,d as Me,s as be}from"./supabase.client.D2OLuBHL.js";import{P as F,S as Ie,c as Le,R as fr,I as gr}from"./index.D3EqsrrG.js";import{I as hr,C as Oe,A as oe,f as $e,g as Fe,e as ie,L as mr}from"./label.Di0WFfjI.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M16.4 13.7A6.5 6.5 0 1 0 6.28 6.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3",key:"cisjcv"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1-2.29 7.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"5byaag"}],["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}]],vr=k("beef",xr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],ye=k("chef-hat",br);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jr=k("chevron-left",yr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wr=k("chevron-right",Nr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],kr=k("clock",Cr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],Sr=k("droplet",Tr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Pr=k("external-link",Dr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ze=k("file-text",Rr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Ar=k("flame",_r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ge=k("refresh-cw",Er);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ir=k("rotate-ccw",Mr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Or=k("save",Lr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Fr=k("search",$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Gr=k("trash-2",zr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Vr=k("users",Hr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],Br=k("wheat",qr);var Kr=class extends Gt{constructor(t,r){super(t,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:xe()})}getOptimisticResult(t){return t.behavior=xe(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,r){const{state:n}=t,s=super.createResult(t,r),{isFetching:a,isRefetching:o,isError:l,isRefetchError:c}=s,d=n.fetchMeta?.fetchMore?.direction,f=l&&d==="forward",g=a&&d==="forward",u=l&&d==="backward",p=a&&d==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Vt(r,n.data),hasPreviousPage:Ht(r,n.data),isFetchNextPageError:f,isFetchingNextPage:g,isFetchPreviousPageError:u,isFetchingPreviousPage:p,isRefetchError:c&&!f&&!u,isRefetching:o&&!g&&!p}}};function Ur(t,r){return qt(t,Kr)}var[Y,oa]=Z("Tooltip",[De]),J=De(),He="TooltipProvider",Wr=700,re="tooltip.open",[Qr,le]=Y(He),Ve=t=>{const{__scopeTooltip:r,delayDuration:n=Wr,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=t,l=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),e.jsx(Qr,{scope:r,isOpenDelayedRef:l,delayDuration:n,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(f=>{c.current=f},[]),disableHoverableContent:a,children:o})};Ve.displayName=He;var G="Tooltip",[Zr,q]=Y(G),qe=t=>{const{__scopeTooltip:r,children:n,open:s,defaultOpen:a,onOpenChange:o,disableHoverableContent:l,delayDuration:c}=t,d=le(G,t.__scopeTooltip),f=J(r),[g,u]=i.useState(null),p=z(),h=i.useRef(0),v=l??d.disableHoverableContent,w=c??d.delayDuration,b=i.useRef(!1),[j,m]=ae({prop:s,defaultProp:a??!1,onChange:B=>{B?(d.onOpen(),document.dispatchEvent(new CustomEvent(re))):d.onClose(),o?.(B)},caller:G}),x=i.useMemo(()=>j?b.current?"delayed-open":"instant-open":"closed",[j]),y=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b.current=!1,m(!0)},[m]),C=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,m(!1)},[m]),E=i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{b.current=!0,m(!0),h.current=0},w)},[w,m]);return i.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),e.jsx(tr,{...f,children:e.jsx(Zr,{scope:r,contentId:p,open:j,stateAttribute:x,trigger:g,onTriggerChange:u,onTriggerEnter:i.useCallback(()=>{d.isOpenDelayedRef.current?E():y()},[d.isOpenDelayedRef,E,y]),onTriggerLeave:i.useCallback(()=>{v?C():(window.clearTimeout(h.current),h.current=0)},[C,v]),onOpen:y,onClose:C,disableHoverableContent:v,children:n})})};qe.displayName=G;var se="TooltipTrigger",Be=i.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=q(se,n),o=le(se,n),l=J(n),c=i.useRef(null),d=L(r,c,a.onTriggerChange),f=i.useRef(!1),g=i.useRef(!1),u=i.useCallback(()=>f.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),e.jsx(rr,{asChild:!0,...l,children:e.jsx(R.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:d,onPointerMove:T(t.onPointerMove,p=>{p.pointerType!=="touch"&&!g.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),g.current=!0)}),onPointerLeave:T(t.onPointerLeave,()=>{a.onTriggerLeave(),g.current=!1}),onPointerDown:T(t.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:T(t.onFocus,()=>{f.current||a.onOpen()}),onBlur:T(t.onBlur,a.onClose),onClick:T(t.onClick,a.onClose)})})});Be.displayName=se;var ce="TooltipPortal",[Yr,Jr]=Y(ce,{forceMount:void 0}),Ke=t=>{const{__scopeTooltip:r,forceMount:n,children:s,container:a}=t,o=q(ce,r);return e.jsx(Yr,{scope:r,forceMount:n,children:e.jsx(F,{present:n||o.open,children:e.jsx(Pe,{asChild:!0,container:a,children:s})})})};Ke.displayName=ce;var $="TooltipContent",Ue=i.forwardRef((t,r)=>{const n=Jr($,t.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=t,l=q($,t.__scopeTooltip);return e.jsx(F,{present:s||l.open,children:l.disableHoverableContent?e.jsx(We,{side:a,...o,ref:r}):e.jsx(Xr,{side:a,...o,ref:r})})}),Xr=i.forwardRef((t,r)=>{const n=q($,t.__scopeTooltip),s=le($,t.__scopeTooltip),a=i.useRef(null),o=L(r,a),[l,c]=i.useState(null),{trigger:d,onClose:f}=n,g=a.current,{onPointerInTransitChange:u}=s,p=i.useCallback(()=>{c(null),u(!1)},[u]),h=i.useCallback((v,w)=>{const b=v.currentTarget,j={x:v.clientX,y:v.clientY},m=ss(j,b.getBoundingClientRect()),x=ns(j,m),y=as(w.getBoundingClientRect()),C=is([...x,...y]);c(C),u(!0)},[u]);return i.useEffect(()=>()=>p(),[p]),i.useEffect(()=>{if(d&&g){const v=b=>h(b,g),w=b=>h(b,d);return d.addEventListener("pointerleave",v),g.addEventListener("pointerleave",w),()=>{d.removeEventListener("pointerleave",v),g.removeEventListener("pointerleave",w)}}},[d,g,h,p]),i.useEffect(()=>{if(l){const v=w=>{const b=w.target,j={x:w.clientX,y:w.clientY},m=d?.contains(b)||g?.contains(b),x=!os(j,l);m?p():x&&(p(),f())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[d,g,l,f,p]),e.jsx(We,{...t,ref:o})}),[es,ts]=Y(G,{isInside:!1}),rs=Ee("TooltipContent"),We=i.forwardRef((t,r)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:l,...c}=t,d=q($,n),f=J(n),{onClose:g}=d;return i.useEffect(()=>(document.addEventListener(re,g),()=>document.removeEventListener(re,g)),[g]),i.useEffect(()=>{if(d.trigger){const u=p=>{p.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,g]),e.jsx(Re,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u=>u.preventDefault(),onDismiss:g,children:e.jsxs(nr,{"data-state":d.stateAttribute,...f,...c,ref:r,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(rs,{children:s}),e.jsx(es,{scope:n,isInside:!0,children:e.jsx(Bt,{id:d.contentId,role:"tooltip",children:a||s})})]})})});Ue.displayName=$;var Qe="TooltipArrow",Ze=i.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=J(n);return ts(Qe,n).isInside?null:e.jsx(sr,{...a,...s,ref:r})});Ze.displayName=Qe;function ss(t,r){const n=Math.abs(r.top-t.y),s=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),o=Math.abs(r.left-t.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function ns(t,r,n=5){const s=[];switch(r){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function as(t){const{top:r,right:n,bottom:s,left:a}=t;return[{x:a,y:r},{x:n,y:r},{x:n,y:s},{x:a,y:s}]}function os(t,r){const{x:n,y:s}=t;let a=!1;for(let o=0,l=r.length-1;o<r.length;l=o++){const c=r[o],d=r[l],f=c.x,g=c.y,u=d.x,p=d.y;g>s!=p>s&&n<(u-f)*(s-g)/(p-g)+f&&(a=!a)}return a}function is(t){const r=t.slice();return r.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),ls(r)}function ls(t){if(t.length<=1)return t.slice();const r=[];for(let s=0;s<t.length;s++){const a=t[s];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const n=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;n.length>=2;){const o=n[n.length-1],l=n[n.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),r.length===1&&n.length===1&&r[0].x===n[0].x&&r[0].y===n[0].y?r:r.concat(n)}var cs=Ve,ds=qe,us=Be,ps=Ke,fs=Ue,gs=Ze;function X({delayDuration:t=0,...r}){return e.jsx(cs,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function de({...t}){return e.jsx(X,{children:e.jsx(ds,{"data-slot":"tooltip",...t})})}function ue({...t}){return e.jsx(us,{"data-slot":"tooltip-trigger",...t})}function H({className:t,sideOffset:r=0,children:n,...s}){return e.jsx(ps,{children:e.jsxs(fs,{"data-slot":"tooltip-content",sideOffset:r,className:N("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,e.jsx(gs,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function hs({value:t,onChange:r,onSubmit:n,disabled:s=!1,maxLength:a=200}){const[o,l]=i.useState(t);i.useEffect(()=>{l(t)},[t]);const c=p=>{const h=p.target.value;h.length<=a&&l(h)},d=i.useCallback(()=>{const p=o.trim();p!==t&&(r(p),n())},[o,t,r,n]),f=p=>{p.key==="Enter"&&(p.preventDefault(),d())},g=()=>{l(""),r(""),n()},u=o.length>0;return e.jsxs("div",{className:"flex gap-2",role:"search",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hr,{type:"search",placeholder:"Search recipes...",value:o,onChange:c,onKeyDown:f,disabled:s,maxLength:a,className:"pr-8","aria-label":"Search recipes"}),u&&!s&&e.jsx(S,{type:"button",variant:"ghost",size:"sm",onClick:g,className:"absolute right-0 top-0 h-full px-2 hover:bg-transparent","aria-label":"Clear search",children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs(S,{type:"button",onClick:d,disabled:s||o.trim().length===0,"aria-label":"Search",children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Search"]})]})}const U=12;function ms({selected:t,allTags:r,onChange:n}){const[s,a]=i.useState(!1),o=u=>{const p=u.toLowerCase(),h=t.includes(p);n(h?t.filter(v=>v!==p):[...t,p])},l=()=>{n([])};if(r.length===0)return null;const c=t.length>0,d=r.length>U,f=s?r:(()=>{const u=r.slice(0,U),p=r.slice(U).filter(v=>t.includes(v.toLowerCase())),h=[...u,...p];return Array.from(new Set(h))})(),g=r.length-U;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tag filters:"}),c&&e.jsx(S,{variant:"ghost",size:"sm",onClick:l,className:"h-auto py-1 px-2 text-xs","aria-label":"Clear all filters",children:"Clear filters"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"group","aria-label":"Tag filters",children:f.map(u=>{const p=u.toLowerCase(),h=t.includes(p);return e.jsxs(S,{variant:h?"default":"outline",size:"sm",onClick:()=>o(u),role:"checkbox","aria-checked":h,className:"h-auto py-1 px-3",children:[u,h&&e.jsx(Ce,{className:"ml-1 h-3 w-3"})]},p)})}),d&&e.jsx("div",{className:"flex justify-center pt-1",children:e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"h-auto py-1 px-3 text-xs text-muted-foreground hover:text-foreground",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-1 h-3 w-3"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"mr-1 h-3 w-3"}),"Show more (",g," more)"]})})}),c&&e.jsxs("div",{className:"text-xs text-muted-foreground","aria-live":"polite",children:[t.length," ",t.length===1?"tag":"tags"," selected"]})]})}const xs=[{value:"recent",label:"Recently added"},{value:"oldest",label:"Oldest first"}];function vs({value:t,onChange:r}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"sort-select",className:"text-sm font-medium",children:"Sort by:"}),e.jsxs(Kt,{value:t,onValueChange:r,children:[e.jsx(Ut,{id:"sort-select",className:"w-[180px]",children:e.jsx(Wt,{placeholder:"Select sorting"})}),e.jsx(Qt,{children:xs.map(n=>e.jsx(Zt,{value:n.value,children:n.label},n.value))})]})]})}function bs({item:t,selected:r=!1,onClick:n}){return e.jsx(Oe,{className:`p-4 cursor-pointer transition-colors hover:bg-accent ${r?"border-primary bg-accent":""}`,onClick:n,role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n())},"aria-pressed":r,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2",children:t.title}),t.summary&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.summary}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(s=>e.jsx(W,{variant:"secondary",className:"text-xs",children:s},s))})]})})}function ys({hasMore:t,isLoading:r,onClick:n}){return!t&&!r?null:e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(S,{variant:"outline",onClick:n,disabled:r||!t,className:"min-w-[200px]",children:r?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Load more"})})}function js({pages:t,isLoading:r,isError:n,selectedId:s,onSelect:a,onLoadMore:o,hasNextPage:l,isFetchingNextPage:c}){const d=t.flatMap(f=>f.data);return n||r||d.length===0?null:e.jsxs("div",{className:"space-y-3",children:[e.jsx("ul",{className:"space-y-3",children:d.map(f=>e.jsx("li",{children:e.jsx(bs,{item:f,selected:s===f.id,onClick:()=>a(f.id)})},f.id))}),e.jsx(ys,{hasMore:l,isLoading:c,onClick:o}),e.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:["Found ",d.length," ",d.length===1?"recipe":"recipes"]})]})}function Ns({message:t,onCta:r}){const s=t||"No recipes found";return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx(ze,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm",children:r?"Start your culinary journey! Generate your first recipe using AI.":"Try changing filters or search for something else."}),r&&e.jsxs(S,{onClick:r,size:"lg",className:"gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Generate first recipe"]})]})}function ws(t){if(t instanceof Error)return{title:"An error occurred",description:t.message||"Please try again later."};const r=t.message?.toLowerCase()||"";return r.includes("bad request")||r.includes("validation")?{title:"Invalid request",description:"Check your filters and try again."}:r.includes("unauthorized")||r.includes("401")?{title:"Unauthorized",description:"Please log in again."}:r.includes("not found")||r.includes("404")?{title:"Not found",description:"Recipe doesn't exist or has been deleted."}:r.includes("too large")||r.includes("413")?{title:"Too large",description:"Result exceeds the 200KB limit. Please try again."}:r.includes("too many")||r.includes("429")?{title:"Rate limit exceeded",description:"Please wait a moment before trying again."}:r.includes("internal")||r.includes("500")?{title:"Server error",description:"We're sorry, something went wrong. Please try again later."}:r.includes("unavailable")||r.includes("503")?{title:"Service unavailable",description:"Service is temporarily unavailable. Please try again in a moment."}:{title:"An error occurred",description:t.message||"Please try again later."}}function Cs({error:t,onRetry:r}){const{title:n,description:s}=ws(t);return e.jsx("div",{className:"py-8",children:e.jsxs(oe,{variant:"destructive",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx(Fe,{children:n}),e.jsxs(ie,{className:"mt-2",children:[e.jsx("p",{children:s}),r&&e.jsxs(S,{variant:"outline",size:"sm",onClick:r,className:"mt-4 gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Try again"]})]})]})})}function ks({count:t=3}){return e.jsxs("div",{className:"space-y-3",children:[Array.from({length:t}).map((r,n)=>e.jsx(Oe,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{className:"h-6 w-3/4"}),e.jsx(M,{className:"h-4 w-full"}),e.jsx(M,{className:"h-4 w-5/6"}),e.jsxs("div",{className:"flex gap-1 pt-1",children:[e.jsx(M,{className:"h-5 w-16"}),e.jsx(M,{className:"h-5 w-20"}),e.jsx(M,{className:"h-5 w-12"})]}),e.jsx(M,{className:"h-3 w-32 mt-2"})]})},n)),e.jsx("div",{className:"sr-only","aria-live":"polite",children:"Loading recipes..."})]})}async function Ts(t){const r=new URLSearchParams;t.search&&r.set("search",t.search),t.tags&&r.set("tags",t.tags),t.sort&&r.set("sort",t.sort),t.limit&&r.set("limit",t.limit.toString()),t.cursor&&r.set("cursor",t.cursor),t.offset!==void 0&&r.set("offset",t.offset.toString());const n=`/api/recipes${r.toString()?`?${r.toString()}`:""}`;return V(n)}async function Ss(t){return V(`/api/recipes/${t}`)}async function Ds(t){return V("/api/recipes/generate",{method:"POST",body:JSON.stringify(t)})}async function Ps(t){return V("/api/recipes",{method:"POST",body:JSON.stringify(t)})}async function Rs(t){await V(`/api/recipes/${t}`,{method:"DELETE"})}function _s(t){return Ur({queryKey:["recipes",t],queryFn:({pageParam:r=0})=>Ts({...t,offset:r}),getNextPageParam:(r,n)=>r.pagination.has_more?n.reduce((a,o)=>a+o.data.length,0):void 0,initialPageParam:0,retry:!1})}function As(t){return Yt({queryKey:["recipe",t],queryFn:()=>Ss(t),retry:!1,enabled:!!t})}function Es(){return ne({mutationFn:Ds})}function Ms(){const t=Se();return ne({mutationFn:Ps,onSuccess:()=>{t.invalidateQueries({queryKey:["recipes"]})}})}function Is(){const t=Se();return ne({mutationFn:Rs,onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["recipes"]}),t.invalidateQueries({queryKey:["recipe",n]})}})}const Ye={search:"",tags:[],sort:"recent",limit:20,offset:0};function je(t){const r={...Ye},n=t.get("search");n&&(r.search=n);const s=t.get("tags");s&&(r.tags=s.split(",").filter(c=>c.trim().length>0));const a=t.get("sort");(a==="recent"||a==="oldest")&&(r.sort=a);const o=t.get("limit");if(o){const c=parseInt(o,10);!isNaN(c)&&c>=1&&c<=100&&(r.limit=c)}const l=t.get("offset");if(l){const c=parseInt(l,10);!isNaN(c)&&c>=0&&(r.offset=c)}return r}function Ls(t){const r=new URLSearchParams;return t.search&&t.search.trim()&&r.set("search",t.search.trim()),t.tags.length>0&&r.set("tags",t.tags.join(",")),t.sort&&t.sort!=="recent"&&r.set("sort",t.sort),t.limit&&t.limit!==20&&r.set("limit",t.limit.toString()),t.offset&&t.offset>0&&r.set("offset",t.offset.toString()),r}function Os(){const[t,r]=i.useState(()=>{if(typeof window>"u")return Ye;const a=new URLSearchParams(window.location.search);return je(a)}),n=i.useCallback(a=>{const o=Ls(a),l=`${window.location.pathname}${o.toString()?`?${o.toString()}`:""}`;window.history.pushState({},"",l)},[]),s=i.useCallback(a=>{r(o=>{const l=typeof a=="function"?a(o):a;return n(l),l})},[n]);return i.useEffect(()=>{const a=()=>{const o=new URLSearchParams(window.location.search),l=je(o);r(l)};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[]),{filters:t,setFilters:s}}function $s(t){const r=i.useRef(null),n=`scroll-${t}`;return i.useEffect(()=>{const s=r.current;if(!s)return;const a=sessionStorage.getItem(n);if(a){const o=parseInt(a,10);isNaN(o)||setTimeout(()=>{s.scrollTop=o},0)}},[n]),i.useEffect(()=>{const s=r.current;if(!s)return;let a;const o=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(n,s.scrollTop.toString())},100)};return s.addEventListener("scroll",o,{passive:!0}),()=>{clearTimeout(a),s.removeEventListener("scroll",o)}},[n]),r}function Fs({selectedId:t,onSelect:r,onGenerateClick:n,onToggleCollapse:s}){const{filters:a,setFilters:o}=Os(),l=$s(typeof window<"u"?window.location.search:""),{data:c,isLoading:d,isError:f,error:g,fetchNextPage:u,hasNextPage:p,isFetchingNextPage:h,refetch:v}=_s({search:a.search||void 0,tags:a.tags.length>0?a.tags.join(","):void 0,sort:a.sort,limit:a.limit}),w=i.useMemo(()=>{if(!c?.pages)return[];const P=new Set;return c.pages.forEach(_=>{_.data.forEach(Ft=>{Ft.tags?.forEach(zt=>P.add(zt))})}),Array.from(P).sort()},[c]),b=i.useCallback(P=>{o(_=>({..._,search:P,offset:0}))},[]),j=i.useCallback(()=>{v()},[v]),m=i.useCallback(P=>{o(_=>({..._,tags:P,offset:0}))},[]),x=i.useCallback(P=>{o(_=>({..._,sort:P,offset:0}))},[]),y=i.useCallback(()=>{p&&!h&&u()},[p,h,u]),C=i.useCallback(()=>{v()},[v]),E=c?.pages||[],B=E.reduce((P,_)=>P+_.data.length,0),me=a.search||a.tags.length>0;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Your Recipes"}),s&&e.jsx(X,{children:e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(S,{onClick:s,variant:"ghost",size:"icon",className:"h-8 w-8 -mr-2","aria-label":"Hide recipe list",children:[e.jsx(jr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(ke,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(H,{side:"left",className:"hidden lg:block",children:[e.jsx("p",{children:"Hide recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(H,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Hide recipe list"})})]})})]}),e.jsxs("div",{className:"space-y-3 p-4 lg:pb-4 max-lg:pb-3 border-b",children:[e.jsx(hs,{value:a.search||"",onChange:b,onSubmit:j}),e.jsx(ms,{selected:a.tags,allTags:w,onChange:m}),e.jsx(vs,{value:a.sort,onChange:x})]}),e.jsx("div",{ref:l,className:"flex-1 overflow-y-auto p-4 max-lg:p-3 min-h-0",children:d?e.jsx(ks,{count:3}):f?e.jsx(Cs,{error:g,onRetry:C}):B===0?e.jsx(Ns,{message:me?"No recipes matching your filters":"No recipes yet",onCta:me?void 0:n}):e.jsx(js,{pages:E,isLoading:d,isError:f,selectedId:t,onSelect:r,onLoadMore:y,hasNextPage:p||!1,isFetchingNextPage:h})})]})}var ee="Tabs",[zs,ia]=Z(ee,[Le]),Je=Le(),[Gs,pe]=zs(ee),Xe=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...f}=t,g=ar(c),[u,p]=ae({prop:s,onChange:a,defaultProp:o??"",caller:ee});return e.jsx(Gs,{scope:n,baseId:z(),value:u,onValueChange:p,orientation:l,dir:g,activationMode:d,children:e.jsx(R.div,{dir:g,"data-orientation":l,...f,ref:r})})});Xe.displayName=ee;var et="TabsList",tt=i.forwardRef((t,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=t,o=pe(et,n),l=Je(n);return e.jsx(fr,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:e.jsx(R.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:r})})});tt.displayName=et;var rt="TabsTrigger",st=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=t,l=pe(rt,n),c=Je(n),d=ot(l.baseId,s),f=it(l.baseId,s),g=s===l.value;return e.jsx(gr,{asChild:!0,...c,focusable:!a,active:g,children:e.jsx(R.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:r,onMouseDown:T(t.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?l.onValueChange(s):u.preventDefault()}),onKeyDown:T(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&l.onValueChange(s)}),onFocus:T(t.onFocus,()=>{const u=l.activationMode!=="manual";!g&&!a&&u&&l.onValueChange(s)})})})});st.displayName=rt;var nt="TabsContent",at=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...l}=t,c=pe(nt,n),d=ot(c.baseId,s),f=it(c.baseId,s),g=s===c.value,u=i.useRef(g);return i.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(F,{present:a||g,children:({present:p})=>e.jsx(R.div,{"data-state":g?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:f,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:u.current?"0s":void 0},children:p&&o})})});at.displayName=nt;function ot(t,r){return`${t}-trigger-${r}`}function it(t,r){return`${t}-content-${r}`}var Hs=Xe,Vs=tt,qs=st,Bs=at;function Ks({className:t,...r}){return e.jsx(Hs,{"data-slot":"tabs",className:N("flex flex-col gap-2",t),...r})}function Us({className:t,...r}){return e.jsx(Vs,{"data-slot":"tabs-list",className:N("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function Ne({className:t,...r}){return e.jsx(qs,{"data-slot":"tabs-trigger",className:N("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function we({className:t,...r}){return e.jsx(Bs,{"data-slot":"tabs-content",className:N("flex-1 outline-none",t),...r})}function Ws({className:t,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:N("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}function Qs({value:t,onChange:r,disabled:n=!1,maxLength:s=2e3,label:a="Recipe generation prompt",placeholder:o="Describe the recipe you want to generate..."}){const l=s-t.length,c=l<100,d=l===0,f=g=>{const u=g.target.value;u.length<=s&&r(u)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"recipe-prompt",children:a}),e.jsx(Ws,{id:"recipe-prompt",value:t,onChange:f,disabled:n,placeholder:o,className:"min-h-[200px] resize-none",maxLength:s,"aria-describedby":"prompt-counter"}),e.jsxs("div",{id:"prompt-counter",className:`text-xs text-right ${d?"text-destructive font-semibold":c?"text-yellow-600 dark:text-yellow-500":"text-muted-foreground"}`,"aria-live":"polite",children:[t.length," / ",s," characters",d&&" (limit reached)"]})]})}function Zs(t){const r=t.message?.toLowerCase()||"";return r.includes("validation")||r.includes("bad request")?{title:"Invalid prompt",description:"Make sure the prompt is between 1-2000 characters and doesn't contain forbidden patterns.",canRetry:!1}:r.includes("too large")||r.includes("413")?{title:"Result too large",description:"Generated recipe exceeds 200KB limit. Try a simpler prompt.",canRetry:!0}:r.includes("too many")||r.includes("429")?{title:"Rate limit exceeded",description:`Please wait ${t.details?.retry_after||60} seconds before trying again.`,canRetry:!1}:r.includes("unavailable")||r.includes("503")?{title:"AI service unavailable",description:"AI service is temporarily unavailable. Please try again in a moment.",canRetry:!0}:r.includes("internal")||r.includes("500")?{title:"Server error",description:"We're sorry, something went wrong. Please try again.",canRetry:!0}:{title:"An error occurred",description:t.message||"Failed to generate recipe. Please try again.",canRetry:!0}}function Ys({onClick:t,disabled:r,loading:n,error:s,onRetry:a}){const o=s?Zs(s):null;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{onClick:t,disabled:r||n,className:"w-full gap-2",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"h-5 w-5 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"h-5 w-5"}),"Generate recipe"]})}),n&&e.jsxs("div",{className:"text-xs text-center text-muted-foreground","aria-live":"polite",children:["AI is analyzing your prompt and creating a recipe...",e.jsx("br",{}),"This may take a few seconds."]}),s&&o&&e.jsxs(oe,{variant:"destructive",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx(Fe,{children:o.title}),e.jsxs(ie,{className:"mt-2",children:[e.jsx("p",{className:"text-sm",children:o.description}),o.canRetry&&a&&e.jsxs(S,{variant:"outline",size:"sm",onClick:a,className:"mt-3 gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Try again"]})]})]})]})}function Js({onGenerated:t}){const[r,n]=i.useState(""),[s,a]=i.useState(null),{lang:o}=Ae(),l=Es();i.useEffect(()=>{s&&a(null)},[r]);const c=()=>{!r.trim()||r.length<1||r.length>2e3||(a(null),l.mutate({prompt:r.trim(),lang:o},{onSuccess:u=>{const p={prompt:r.trim(),recipe:u.recipe,generationId:u.generation_id,generatedAt:u.generated_at};sessionStorage.setItem("generatorDraft",JSON.stringify(p)),t(u)},onError:u=>{a(u)}}))},d=()=>{c()},g=!(r.trim().length>=1&&r.trim().length<=2e3)||l.isPending;return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Recipe Generator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe the recipe you want to create, and AI will generate a detailed recipe for you."})]}),e.jsx(Qs,{value:r,onChange:n,disabled:l.isPending,maxLength:2e3,placeholder:"E.g. 'Quick dinner for two with chicken and vegetables' or 'Vegan chocolate dessert without sugar'"}),e.jsx(Ys,{onClick:c,disabled:g,loading:l.isPending,error:s,onRetry:d}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Tips:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Be specific - describe ingredients, cuisine type, or dietary preferences"}),e.jsx("li",{children:"You can specify number of servings, preparation time, or difficulty level"}),e.jsx("li",{children:"AI will create a complete recipe with ingredients, instructions, and nutritional info"})]})]})]})}function Xs({data:t,onTagClick:r,readonly:n=!1}){const s="recipe"in t?t.recipe:t,a="tags"in t&&Array.isArray(t.tags)?t.tags:s.tags||[],o=["bg-blue-100 text-blue-700 dark:bg-blue-950/40 dark:text-blue-300 border-blue-200 dark:border-blue-800","bg-purple-100 text-purple-700 dark:bg-purple-950/40 dark:text-purple-300 border-purple-200 dark:border-purple-800","bg-pink-100 text-pink-700 dark:bg-pink-950/40 dark:text-pink-300 border-pink-200 dark:border-pink-800","bg-orange-100 text-orange-700 dark:bg-orange-950/40 dark:text-orange-300 border-orange-200 dark:border-orange-800","bg-teal-100 text-teal-700 dark:bg-teal-950/40 dark:text-teal-300 border-teal-200 dark:border-teal-800","bg-cyan-100 text-cyan-700 dark:bg-cyan-950/40 dark:text-cyan-300 border-cyan-200 dark:border-cyan-800","bg-indigo-100 text-indigo-700 dark:bg-indigo-950/40 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800","bg-lime-100 text-lime-700 dark:bg-lime-950/40 dark:text-lime-300 border-lime-200 dark:border-lime-800"],l=m=>{let x=0;for(let y=0;y<m.length;y++)x=m.charCodeAt(y)+((x<<5)-x);return o[Math.abs(x)%o.length]},[c,d]=i.useState(s.servings),[f,g]=i.useState(new Set),[u,p]=i.useState(new Set),h=c/s.servings,v=m=>h===1?m:m.replace(/(\d+(\.\d+)?)/g,x=>{const C=parseFloat(x)*h;return Number.isInteger(C)?C.toString():C.toFixed(1).replace(/\.0$/,"")}),w=m=>{const x=new Set(f);x.has(m)?x.delete(m):x.add(m),g(x)},b=m=>{const x=new Set(u);x.has(m)?x.delete(m):x.add(m),p(x)},j={easy:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",hard:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return e.jsxs("article",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:s.title}),s.cuisine&&e.jsx("p",{className:"text-muted-foreground/70 italic text-sm",children:s.cuisine})]}),s.summary&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:s.summary}),s.description&&e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description}),(a.length>0||s.dietary_info&&Object.keys(s.dietary_info).length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.dietary_info&&Object.entries(s.dietary_info).map(([m,x])=>x&&e.jsx(W,{variant:"outline",className:"rounded-full border-2 bg-emerald-50 text-emerald-700 border-emerald-300 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-700 px-3",children:m.replace(/_/g," ")},m)),a.map(m=>e.jsx(W,{variant:"outline",className:N("transition-all border",l(m),r&&!n&&"cursor-pointer hover:scale-105 hover:shadow-sm"),onClick:()=>!n&&r?.(m),role:r&&!n?"button":void 0,tabIndex:r&&!n?0:void 0,onKeyDown:x=>{!n&&r&&(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),r(m))},children:m},m))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(kr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Prep: ",s.prep_time_minutes,"m | Cook: ",s.cook_time_minutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(W,{className:j[s.difficulty],children:s.difficulty})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-primary/5 dark:bg-primary/10 py-2 px-4 rounded-full border border-primary/20",children:[e.jsx(Vr,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wide",children:"Serves:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Decrease servings",children:"-"}),e.jsx("span",{className:"font-bold text-foreground min-w-[1.5rem] text-center",children:c}),e.jsx("button",{onClick:()=>d(c+1),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Increase servings",children:"+"})]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Ingredients"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f.size," of ",s.ingredients.length]})]}),e.jsx("ul",{className:"space-y-3",children:s.ingredients.map((m,x)=>{const y=f.has(x);return e.jsx("li",{children:e.jsxs("button",{onClick:()=>w(x),className:N("group flex items-start gap-3 w-full text-left p-3 rounded-xl transition-all duration-200",y?"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-800 dark:text-emerald-200":"hover:bg-accent bg-transparent"),children:[e.jsx("div",{className:N("mt-0.5 flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors",y?"border-emerald-500 bg-emerald-500":"border-border group-hover:border-primary"),children:y&&e.jsx(ve,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:N("text-foreground leading-relaxed transition-opacity",y&&"line-through opacity-70"),children:v(m)})]})},x)})})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Instructions"}),e.jsxs("div",{className:"text-sm font-medium px-3 py-1 bg-primary/10 dark:bg-primary/20 text-primary rounded-full",children:["Step"," ",u.size<s.instructions.length?u.size+1:s.instructions.length," of"," ",s.instructions.length]})]}),e.jsx("ol",{className:"space-y-6",children:s.instructions.map((m,x)=>{const y=u.has(x);return e.jsxs("li",{className:"relative flex gap-4 sm:gap-6 group",children:[x!==s.instructions.length-1&&e.jsx("div",{className:N("absolute left-4 top-10 bottom-0 w-0.5 -ml-px",y?"bg-primary/30":"bg-border"),"aria-hidden":"true"}),e.jsx("button",{onClick:()=>b(x),className:N("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all z-10",y?"bg-primary border-primary text-primary-foreground ring-4 ring-primary/20":"bg-background border-border text-primary group-hover:border-primary"),"aria-label":`Toggle step ${x+1}`,children:y?e.jsx(ve,{className:"w-5 h-5"}):x+1}),e.jsx("div",{className:N("flex-grow pt-1 pb-6 transition-opacity duration-300",y?"opacity-50":"opacity-100"),children:e.jsx("p",{className:N("text-foreground leading-relaxed text-lg",y&&"line-through decoration-muted-foreground/30"),children:m})})]},x)})}),u.size===s.instructions.length&&e.jsxs("div",{className:"mt-8 p-6 bg-emerald-50 dark:bg-emerald-950/30 rounded-2xl border border-emerald-200 dark:border-emerald-800 text-center",children:[e.jsx(ye,{className:"w-12 h-12 text-emerald-500 dark:text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100 mb-1",children:"Bon AppÃ©tit!"}),e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300",children:"You've completed this recipe."})]})]}),s.nutrition&&Object.keys(s.nutrition).length>0&&e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-4 h-4 text-orange-500"}),"Nutrition per serving"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.nutrition.calories!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1",children:"Calories"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.calories*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"kcal"})]})]}),s.nutrition.protein_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(vr,{className:"w-3 h-3 mr-1 text-red-400"})," Protein"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.protein_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.carbs_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(Br,{className:"w-3 h-3 mr-1 text-amber-400"})," Carbs"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.carbs_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.fat_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(Sr,{className:"w-3 h-3 mr-1 text-yellow-500"})," Fat"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.fat_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-4 text-center",children:"Nutritional values are approximate and may differ from actual values."})]})]})}function en({onClick:t,disabled:r,loading:n,disabledReason:s}){const a=e.jsxs(S,{onClick:t,disabled:r||n,className:"gap-2",size:"lg",children:[e.jsx(Or,{className:"h-5 w-5"}),n?"Saving...":"Save recipe"]});return r&&s?e.jsx(X,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:a}),e.jsx(H,{className:"max-w-xs",children:e.jsx("p",{children:s})})]}),s.toLowerCase().includes("disliked")&&e.jsxs("a",{href:"/profile",className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Pr,{className:"h-3 w-3"}),"Update dietary preferences"]})]})}):a}var te="Dialog",[lt,ct]=Z(te),[tn,D]=lt(te),dt=t=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=i.useRef(null),d=i.useRef(null),[f,g]=ae({prop:s,defaultProp:a??!1,onChange:o,caller:te});return e.jsx(tn,{scope:r,triggerRef:c,contentRef:d,contentId:z(),titleId:z(),descriptionId:z(),open:f,onOpenChange:g,onOpenToggle:i.useCallback(()=>g(u=>!u),[g]),modal:l,children:n})};dt.displayName=te;var ut="DialogTrigger",pt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=D(ut,n),o=L(r,a.triggerRef);return e.jsx(R.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":he(a.open),...s,ref:o,onClick:T(t.onClick,a.onOpenToggle)})});pt.displayName=ut;var fe="DialogPortal",[rn,ft]=lt(fe,{forceMount:void 0}),gt=t=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=t,o=D(fe,r);return e.jsx(rn,{scope:r,forceMount:n,children:i.Children.map(s,l=>e.jsx(F,{present:n||o.open,children:e.jsx(Pe,{asChild:!0,container:a,children:l})}))})};gt.displayName=fe;var Q="DialogOverlay",ht=i.forwardRef((t,r)=>{const n=ft(Q,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=D(Q,t.__scopeDialog);return o.modal?e.jsx(F,{present:s||o.open,children:e.jsx(nn,{...a,ref:r})}):null});ht.displayName=Q;var sn=pr("DialogOverlay.RemoveScroll"),nn=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=D(Q,n);return e.jsx(lr,{as:sn,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(R.div,{"data-state":he(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),I="DialogContent",mt=i.forwardRef((t,r)=>{const n=ft(I,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=D(I,t.__scopeDialog);return e.jsx(F,{present:s||o.open,children:o.modal?e.jsx(an,{...a,ref:r}):e.jsx(on,{...a,ref:r})})});mt.displayName=I;var an=i.forwardRef((t,r)=>{const n=D(I,t.__scopeDialog),s=i.useRef(null),a=L(r,n.contentRef,s);return i.useEffect(()=>{const o=s.current;if(o)return ir(o)},[]),e.jsx(xt,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:T(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:T(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:T(t.onFocusOutside,o=>o.preventDefault())})}),on=i.forwardRef((t,r)=>{const n=D(I,t.__scopeDialog),s=i.useRef(!1),a=i.useRef(!1);return e.jsx(xt,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(s.current||n.triggerRef.current?.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;n.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),xt=i.forwardRef((t,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=t,c=D(I,n),d=i.useRef(null),f=L(r,d);return cr(),e.jsxs(e.Fragment,{children:[e.jsx(dr,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(Re,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":he(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(cn,{titleId:c.titleId}),e.jsx(un,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ge="DialogTitle",vt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=D(ge,n);return e.jsx(R.h2,{id:a.titleId,...s,ref:r})});vt.displayName=ge;var bt="DialogDescription",yt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=D(bt,n);return e.jsx(R.p,{id:a.descriptionId,...s,ref:r})});yt.displayName=bt;var jt="DialogClose",Nt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=D(jt,n);return e.jsx(R.button,{type:"button",...s,ref:r,onClick:T(t.onClick,()=>a.onOpenChange(!1))})});Nt.displayName=jt;function he(t){return t?"open":"closed"}var wt="DialogTitleWarning",[ln,Ct]=or(wt,{contentName:I,titleName:ge,docsSlug:"dialog"}),cn=({titleId:t})=>{const r=Ct(wt),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},dn="DialogDescriptionWarning",un=({contentRef:t,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ct(dn).contentName}}.`;return i.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,t,r]),null},pn=dt,fn=pt,gn=gt,hn=ht,mn=mt,xn=vt,vn=yt,kt=Nt,Tt="AlertDialog",[bn,la]=Z(Tt,[ct]),A=ct(),St=t=>{const{__scopeAlertDialog:r,...n}=t,s=A(r);return e.jsx(pn,{...s,...n,modal:!0})};St.displayName=Tt;var yn="AlertDialogTrigger",Dt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(fn,{...a,...s,ref:r})});Dt.displayName=yn;var jn="AlertDialogPortal",Pt=t=>{const{__scopeAlertDialog:r,...n}=t,s=A(r);return e.jsx(gn,{...s,...n})};Pt.displayName=jn;var Nn="AlertDialogOverlay",Rt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(hn,{...a,...s,ref:r})});Rt.displayName=Nn;var O="AlertDialogContent",[wn,Cn]=bn(O),kn=Ee("AlertDialogContent"),_t=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,children:s,...a}=t,o=A(n),l=i.useRef(null),c=L(r,l),d=i.useRef(null);return e.jsx(ln,{contentName:O,titleName:At,docsSlug:"alert-dialog",children:e.jsx(wn,{scope:n,cancelRef:d,children:e.jsxs(mn,{role:"alertdialog",...o,...a,ref:c,onOpenAutoFocus:T(a.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(kn,{children:s}),e.jsx(Sn,{contentRef:l})]})})})});_t.displayName=O;var At="AlertDialogTitle",Et=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(xn,{...a,...s,ref:r})});Et.displayName=At;var Mt="AlertDialogDescription",It=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(vn,{...a,...s,ref:r})});It.displayName=Mt;var Tn="AlertDialogAction",Lt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(kt,{...a,...s,ref:r})});Lt.displayName=Tn;var Ot="AlertDialogCancel",$t=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:a}=Cn(Ot,n),o=A(n),l=L(r,a);return e.jsx(kt,{...o,...s,ref:l})});$t.displayName=Ot;var Sn=({contentRef:t})=>{const r=`\`${O}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${O}\` by passing a \`${Mt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${O}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},Dn=St,Pn=Dt,Rn=Pt,_n=Rt,An=_t,En=Lt,Mn=$t,In=Et,Ln=It;function On({...t}){return e.jsx(Dn,{"data-slot":"alert-dialog",...t})}function $n({...t}){return e.jsx(Pn,{"data-slot":"alert-dialog-trigger",...t})}function Fn({...t}){return e.jsx(Rn,{"data-slot":"alert-dialog-portal",...t})}function zn({className:t,...r}){return e.jsx(_n,{"data-slot":"alert-dialog-overlay",className:N("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function Gn({className:t,...r}){return e.jsxs(Fn,{children:[e.jsx(zn,{}),e.jsx(An,{"data-slot":"alert-dialog-content",className:N("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r})]})}function Hn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:N("flex flex-col gap-2 text-center sm:text-left",t),...r})}function Vn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:N("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function qn({className:t,...r}){return e.jsx(In,{"data-slot":"alert-dialog-title",className:N("text-lg font-semibold",t),...r})}function Bn({className:t,...r}){return e.jsx(Ln,{"data-slot":"alert-dialog-description",className:N("text-muted-foreground text-sm",t),...r})}function Kn({className:t,...r}){return e.jsx(En,{className:N(Me(),t),...r})}function Un({className:t,...r}){return e.jsx(Mn,{className:N(Me({variant:"outline"}),t),...r})}function Wn({recipeId:t,recipeName:r,onDeleted:n,loading:s=!1}){const[a,o]=i.useState(!1),l=()=>{n(t),o(!1)};return e.jsxs(On,{open:a,onOpenChange:o,children:[e.jsx($n,{asChild:!0,children:e.jsxs(S,{variant:"destructive",size:"lg",className:"gap-2",disabled:s,children:[e.jsx(Gr,{className:"h-5 w-5"}),"Delete recipe"]})}),e.jsxs(Gn,{children:[e.jsxs(Hn,{children:[e.jsx(qn,{children:"Are you sure?"}),e.jsxs(Bn,{children:['This will permanently delete "',e.jsx("strong",{children:r}),'". This action cannot be undone.']})]}),e.jsxs(Vn,{children:[e.jsx(Un,{children:"Cancel"}),e.jsx(Kn,{onClick:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})}function Qn({mode:t,recipe:r,details:n,onSaved:s,onDeleted:a,onTagClick:o,onRestoreDraft:l}){const{data:c}=Jt(),{lang:d}=Ae(),f=Ms(),g=Is(),u=j=>{if(!c?.disliked_ingredients||c.disliked_ingredients.length===0)return null;const m=c.disliked_ingredients.map(C=>C.toLowerCase()),x=j.ingredients.map(C=>C.toLowerCase()),y=m.find(C=>x.some(E=>E.includes(C)));return y?`This recipe contains "${y}" which is in your disliked ingredients list.`:null},p=()=>{r&&f.mutate({recipe:r,tags:r.tags,language:d},{onSuccess:j=>{K.success("Recipe saved successfully!"),s?.(j)},onError:j=>{K.error(j.message||"Failed to save recipe")}})},h=j=>{g.mutate(j,{onSuccess:()=>{K.success("Recipe deleted successfully!"),a?.(j)},onError:m=>{K.error(m.message||"Failed to delete recipe")}})};if(!r&&!n)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx(ze,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No recipe selected"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Select a recipe from the list or generate a new one using AI to see it here."})]});const v=t==="saved"&&n?n:r;if(!v)return null;const w=t==="draft"&&r?u(r):null,b=t==="draft"&&!w;return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[w&&e.jsx(oe,{children:e.jsx(ie,{children:w})}),e.jsx(Xs,{data:v,onTagClick:o,readonly:t==="saved"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-6 border-t",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="draft"&&r&&e.jsxs(e.Fragment,{children:[e.jsx(en,{onClick:p,disabled:!b||f.isPending,loading:f.isPending,disabledReason:w||void 0}),l&&e.jsxs(S,{variant:"outline",size:"lg",onClick:l,className:"gap-2",children:[e.jsx(Ir,{className:"h-5 w-5"}),"Restore from draft"]})]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="saved"&&n&&e.jsx(Wn,{recipeId:n.id,recipeName:n.title,onDeleted:h,loading:g.isPending})})]})]})})}function Zn({selectedRecipeId:t,onTagClick:r,onRecipeDeleted:n,onRecipeGenerated:s}){const[a,o]=i.useState("preview"),[l,c]=i.useState(),{data:d}=As(t||"");i.useEffect(()=>{t&&d&&o("preview")},[t,d]),i.useEffect(()=>{const b=()=>{window.location.hash==="#generator"&&(o("generator"),window.history.replaceState(null,"",window.location.pathname+window.location.search))};return b(),window.addEventListener("hashchange",b),()=>window.removeEventListener("hashchange",b)},[]);const f=b=>{c(b.recipe),o("preview"),s?.()},g=b=>{c(void 0),console.log("Recipe saved:",b.id)},u=()=>{n?.(),window.history.pushState({},"","/app")},p=()=>{const b=sessionStorage.getItem("generatorDraft");if(b)try{const j=JSON.parse(b);c(j.recipe)}catch(j){console.error("Failed to restore draft:",j)}},h=t&&d?"saved":"draft",v=!t&&l,w=t&&d;return e.jsx("div",{className:"h-full flex flex-col",children:e.jsxs(Ks,{value:a,onValueChange:b=>o(b),className:"flex-1 flex flex-col",children:[e.jsxs(Us,{className:"w-full",children:[e.jsx(Ne,{value:"generator",className:"flex-1",children:"Generator"}),e.jsxs(Ne,{value:"preview",className:"flex-1",children:["Preview",(v||w)&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-primary"})]})]}),e.jsx(we,{value:"generator",className:"flex-1 overflow-hidden mt-0",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(Js,{onGenerated:f})})}),e.jsx(we,{value:"preview",className:"flex-1 overflow-hidden mt-0",children:e.jsx(Qn,{mode:h,recipe:v?l:void 0,details:w?d:void 0,onSaved:g,onDeleted:u,onTagClick:r,onRestoreDraft:p})})]})})}function Yn({selectedRecipeId:t}){const[r,n]=i.useState(t),[s,a]=i.useState(()=>typeof window<"u"?localStorage.getItem("leftPanelCollapsed")==="true":!1),o=u=>{n(u),window.history.pushState({},"",`/app/recipes/${u}`),typeof window<"u"&&window.innerWidth<1024&&(a(!0),typeof window<"u"&&localStorage.setItem("leftPanelCollapsed","true"))},l=u=>{const p=new URLSearchParams(window.location.search),h=p.get("tags")?.split(",").filter(Boolean)||[];if(!h.includes(u.toLowerCase())){h.push(u.toLowerCase()),p.set("tags",h.join(",")),p.delete("offset");const v=`${window.location.pathname}?${p.toString()}`;window.history.pushState({},"",v),window.dispatchEvent(new PopStateEvent("popstate"))}},c=()=>{console.log("Switch to Generator tab")},d=()=>{n(void 0)},f=()=>{n(void 0),window.history.pushState({},"","/app")},g=()=>{a(u=>{const p=!u;return typeof window<"u"&&localStorage.setItem("leftPanelCollapsed",String(p)),p})};return i.useEffect(()=>{const u=p=>{(p.ctrlKey||p.metaKey)&&p.key==="b"&&(p.preventDefault(),g())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]),e.jsxs("div",{className:"relative grid lg:grid-cols-[auto_1fr] gap-4 h-full",children:[e.jsx("div",{className:N("flex flex-col h-full border rounded-lg bg-card transition-all duration-300 ease-in-out","lg:relative",s?"lg:w-0 lg:overflow-hidden lg:border-0 lg:p-0 lg:gap-0":"lg:w-[420px]","fixed lg:static left-0 right-0 z-40","max-lg:top-16 max-lg:h-[calc(100vh-5rem)] max-lg:mx-4 max-lg:shadow-xl",s?"max-lg:-translate-y-[calc(100%+5rem)] max-lg:opacity-0 max-lg:pointer-events-none":"max-lg:translate-y-0 max-lg:opacity-100"),children:e.jsx(Fs,{selectedId:r,onSelect:o,onGenerateClick:c,onToggleCollapse:g})}),s&&e.jsx(X,{children:e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(S,{onClick:g,variant:"outline",size:"icon",className:N("fixed z-50 shadow-lg hover:shadow-xl transition-shadow","lg:top-20 lg:left-4","max-lg:top-16 max-lg:left-1/2 max-lg:-translate-x-1/2"),"aria-label":"Show recipe list",children:[e.jsx(wr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(Te,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(H,{side:"right",className:"hidden lg:block",children:[e.jsx("p",{children:"Show recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(H,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Show recipe list"})})]})}),e.jsx("div",{className:N("flex flex-col h-full border rounded-lg bg-card transition-all duration-300",!s&&"max-lg:hidden"),children:e.jsx(Zn,{selectedRecipeId:r,onTagClick:l,onRecipeDeleted:d,onRecipeGenerated:f})}),!s&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30 transition-opacity duration-300",onClick:g,"aria-hidden":"true"})]})}function ca({selectedRecipeId:t}){const[r,n]=i.useState(null);return i.useEffect(()=>{be.auth.getSession().then(({data:{session:a}})=>{n(a?.access_token??null)});const{data:{subscription:s}}=be.auth.onAuthStateChange((a,o)=>{n(o?.access_token??null)});return()=>s.unsubscribe()},[]),e.jsx(ur,{authToken:r,children:e.jsxs(Xt,{children:[e.jsx(Yn,{selectedRecipeId:t}),e.jsx(er,{})]})})}export{ca as AppPage};
