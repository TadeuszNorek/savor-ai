import{j as e}from"./createLucideIcon.Dkxjm4wi.js";import{r}from"./index.BkdHoFEG.js";import{C as f,a as p,b as j,c as w,d as g,A as E,e as S,f as A}from"./label.Di0WFfjI.js";import{B as C,s as R}from"./supabase.client.D2OLuBHL.js";import{E as k}from"./EmailInput.BWulBbGa.js";import{b as y,n as z}from"./validation.DxFapNvA.js";import{C as D}from"./circle-check-big.Dlp_mO0o.js";import"./index.yjdR7O-I.js";function K(){const[s,b]=r.useState(""),[c,o]=r.useState(),[d,i]=r.useState(),[n,l]=r.useState(!1),[v,N]=r.useState(!1),[m,u]=r.useState(!1),h=r.useRef(null),F=t=>{b(t),m&&o(void 0)},B=()=>{u(!0);const t=y(s);o(t)},I=async t=>{t.preventDefault(),u(!0);const x=y(s);if(o(x),x){h.current?.focus();return}l(!0),i(void 0);const P=z(s);try{const{error:a}=await R.auth.resetPasswordForEmail(P,{redirectTo:`${window.location.origin}/auth/reset`});if(a){console.error("Password reset error:",a),i("Failed to send reset email. Please try again."),l(!1);return}N(!0)}catch(a){console.error("Unexpected error:",a),i("An unexpected error occurred. Please try again."),l(!1)}};return v?e.jsxs(f,{className:"w-full max-w-md mx-auto",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Check your email"}),e.jsx(w,{children:"If an account exists with this email, you will receive password reset instructions."})]}),e.jsxs(g,{children:[e.jsxs(E,{children:[e.jsx(D,{className:"h-4 w-4"}),e.jsxs(S,{children:["We've sent password reset instructions to ",e.jsx("strong",{children:s}),". Please check your inbox and spam folder."]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(C,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:"/login",children:"Back to Sign In"})})})]})]}):e.jsxs(f,{className:"w-full max-w-md mx-auto",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Forgot your password?"}),e.jsx(w,{children:"Enter your email address and we'll send you instructions to reset your password."})]}),e.jsx(g,{children:e.jsxs("form",{onSubmit:I,className:"space-y-4","aria-label":"Forgot password form",children:[d&&e.jsxs(E,{variant:"destructive",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx(S,{children:d})]}),e.jsx(k,{ref:h,value:s,onChange:F,onBlur:B,error:m?c:void 0,disabled:n}),e.jsx(C,{type:"submit",className:"w-full",disabled:n||!!c,"aria-label":"Send reset instructions",children:n?"Sending...":"Send Reset Instructions"}),e.jsx("div",{className:"text-center text-sm",children:e.jsxs("p",{children:["Remember your password?"," ",e.jsx("a",{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})})]})})]})}export{K as ForgotPasswordForm};
