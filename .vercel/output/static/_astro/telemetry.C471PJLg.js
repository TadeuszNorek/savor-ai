import{s as n}from"./supabase.client.D2OLuBHL.js";const t="session_start_logged";async function a(){try{const{data:{session:s},error:o}=await n.auth.getSession();if(o||!s?.access_token){console.debug("Cannot send session_start event: No valid session");return}const e=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({type:"session_start"})});e.ok?console.debug("session_start event sent successfully"):console.debug(`session_start event failed: ${e.status} ${e.statusText}`)}catch(s){console.debug("Failed to send session_start event:",s)}}async function i(){try{if(sessionStorage.getItem(t)==="1"){console.debug("session_start event already sent in this session");return}await a(),sessionStorage.setItem(t,"1")}catch(s){console.debug("Failed to track session_start in sessionStorage:",s)}}function c(){try{sessionStorage.removeItem(t)}catch(s){console.debug("Failed to clear session_start tracking:",s)}}export{i as a,c,a as s};
