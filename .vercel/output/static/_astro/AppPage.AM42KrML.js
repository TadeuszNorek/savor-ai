import{c as k,j as e}from"./createLucideIcon.Dkxjm4wi.js";import{r as l}from"./index.BkdHoFEG.js";import{Q as Gt,i as ve,h as Ht,a as Vt,u as Bt,R as qt,X as ke,C as Pe,b as Te,S as Ut,c as Kt,d as Wt,e as Qt,f as Zt,B as Q,g as L,j as Yt,k as ae,l as Se,m as q,n as be,o as Jt,t as K,p as Xt,T as er}from"./sonner.1qTfTP9n.js";import{c as Y,a as De,u as H,b as oe,R as tr,A as rr,d as T,P as Re,e as sr,D as _e,C as nr,f as D,L as Ae,g as ar,h as or,i as ir,j as lr,k as cr,F as dr,I as ur}from"./Combination.Dh1SshfH.js";import{u as O,P as A,c as Ee,a as j,B as S,b as pr,d as Me,s as ye}from"./supabase.client.D2OLuBHL.js";import{P as G,S as Le,c as Ie,R as gr,I as fr}from"./index.C5C8q3WA.js";import{I as hr,C as Oe,A as ie,f as $e,g as Fe,e as le,L as mr}from"./label.Di0WFfjI.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M16.4 13.7A6.5 6.5 0 1 0 6.28 6.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3",key:"cisjcv"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1-2.29 7.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"5byaag"}],["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}]],vr=k("beef",xr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],je=k("chef-hat",br);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jr=k("chevron-left",yr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Nr=k("chevron-right",wr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],kr=k("clock",Cr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],Tr=k("droplet",Pr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Dr=k("external-link",Sr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ze=k("file-text",Rr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Ar=k("flame",_r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ge=k("refresh-cw",Er);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Lr=k("rotate-ccw",Mr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Or=k("save",Ir);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Fr=k("search",$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Gr=k("trash-2",zr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Vr=k("users",Hr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],qr=k("wheat",Br);var Ur=class extends Gt{constructor(t,r){super(t,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:ve()})}getOptimisticResult(t){return t.behavior=ve(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,r){const{state:n}=t,s=super.createResult(t,r),{isFetching:a,isRefetching:o,isError:i,isRefetchError:c}=s,d=n.fetchMeta?.fetchMore?.direction,g=i&&d==="forward",f=a&&d==="forward",u=i&&d==="backward",p=a&&d==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Vt(r,n.data),hasPreviousPage:Ht(r,n.data),isFetchNextPageError:g,isFetchingNextPage:f,isFetchPreviousPageError:u,isFetchingPreviousPage:p,isRefetchError:c&&!g&&!u,isRefetching:o&&!f&&!p}}};function Kr(t,r){return Bt(t,Ur)}var[J,aa]=Y("Tooltip",[De]),X=De(),He="TooltipProvider",Wr=700,se="tooltip.open",[Qr,ce]=J(He),Ve=t=>{const{__scopeTooltip:r,delayDuration:n=Wr,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=t,i=l.useRef(!0),c=l.useRef(!1),d=l.useRef(0);return l.useEffect(()=>{const g=d.current;return()=>window.clearTimeout(g)},[]),e.jsx(Qr,{scope:r,isOpenDelayedRef:i,delayDuration:n,onOpen:l.useCallback(()=>{window.clearTimeout(d.current),i.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:l.useCallback(g=>{c.current=g},[]),disableHoverableContent:a,children:o})};Ve.displayName=He;var V="Tooltip",[Zr,U]=J(V),Be=t=>{const{__scopeTooltip:r,children:n,open:s,defaultOpen:a,onOpenChange:o,disableHoverableContent:i,delayDuration:c}=t,d=ce(V,t.__scopeTooltip),g=X(r),[f,u]=l.useState(null),p=H(),h=l.useRef(0),x=i??d.disableHoverableContent,N=c??d.delayDuration,b=l.useRef(!1),[C,w]=oe({prop:s,defaultProp:a??!1,onChange:$=>{$?(d.onOpen(),document.dispatchEvent(new CustomEvent(se))):d.onClose(),o?.($)},caller:V}),v=l.useMemo(()=>C?b.current?"delayed-open":"instant-open":"closed",[C]),m=l.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b.current=!1,w(!0)},[w]),y=l.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w(!1)},[w]),P=l.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{b.current=!0,w(!0),h.current=0},N)},[N,w]);return l.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),e.jsx(tr,{...g,children:e.jsx(Zr,{scope:r,contentId:p,open:C,stateAttribute:v,trigger:f,onTriggerChange:u,onTriggerEnter:l.useCallback(()=>{d.isOpenDelayedRef.current?P():m()},[d.isOpenDelayedRef,P,m]),onTriggerLeave:l.useCallback(()=>{x?y():(window.clearTimeout(h.current),h.current=0)},[y,x]),onOpen:m,onClose:y,disableHoverableContent:x,children:n})})};Be.displayName=V;var ne="TooltipTrigger",qe=l.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=U(ne,n),o=ce(ne,n),i=X(n),c=l.useRef(null),d=O(r,c,a.onTriggerChange),g=l.useRef(!1),f=l.useRef(!1),u=l.useCallback(()=>g.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),e.jsx(rr,{asChild:!0,...i,children:e.jsx(A.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:d,onPointerMove:T(t.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:T(t.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:T(t.onPointerDown,()=>{a.open&&a.onClose(),g.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:T(t.onFocus,()=>{g.current||a.onOpen()}),onBlur:T(t.onBlur,a.onClose),onClick:T(t.onClick,a.onClose)})})});qe.displayName=ne;var de="TooltipPortal",[Yr,Jr]=J(de,{forceMount:void 0}),Ue=t=>{const{__scopeTooltip:r,forceMount:n,children:s,container:a}=t,o=U(de,r);return e.jsx(Yr,{scope:r,forceMount:n,children:e.jsx(G,{present:n||o.open,children:e.jsx(Re,{asChild:!0,container:a,children:s})})})};Ue.displayName=de;var z="TooltipContent",Ke=l.forwardRef((t,r)=>{const n=Jr(z,t.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=t,i=U(z,t.__scopeTooltip);return e.jsx(G,{present:s||i.open,children:i.disableHoverableContent?e.jsx(We,{side:a,...o,ref:r}):e.jsx(Xr,{side:a,...o,ref:r})})}),Xr=l.forwardRef((t,r)=>{const n=U(z,t.__scopeTooltip),s=ce(z,t.__scopeTooltip),a=l.useRef(null),o=O(r,a),[i,c]=l.useState(null),{trigger:d,onClose:g}=n,f=a.current,{onPointerInTransitChange:u}=s,p=l.useCallback(()=>{c(null),u(!1)},[u]),h=l.useCallback((x,N)=>{const b=x.currentTarget,C={x:x.clientX,y:x.clientY},w=ss(C,b.getBoundingClientRect()),v=ns(C,w),m=as(N.getBoundingClientRect()),y=is([...v,...m]);c(y),u(!0)},[u]);return l.useEffect(()=>()=>p(),[p]),l.useEffect(()=>{if(d&&f){const x=b=>h(b,f),N=b=>h(b,d);return d.addEventListener("pointerleave",x),f.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",x),f.removeEventListener("pointerleave",N)}}},[d,f,h,p]),l.useEffect(()=>{if(i){const x=N=>{const b=N.target,C={x:N.clientX,y:N.clientY},w=d?.contains(b)||f?.contains(b),v=!os(C,i);w?p():v&&(p(),g())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[d,f,i,g,p]),e.jsx(We,{...t,ref:o})}),[es,ts]=J(V,{isInside:!1}),rs=Ee("TooltipContent"),We=l.forwardRef((t,r)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...c}=t,d=U(z,n),g=X(n),{onClose:f}=d;return l.useEffect(()=>(document.addEventListener(se,f),()=>document.removeEventListener(se,f)),[f]),l.useEffect(()=>{if(d.trigger){const u=p=>{p.target?.contains(d.trigger)&&f()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,f]),e.jsx(_e,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:f,children:e.jsxs(nr,{"data-state":d.stateAttribute,...g,...c,ref:r,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(rs,{children:s}),e.jsx(es,{scope:n,isInside:!0,children:e.jsx(qt,{id:d.contentId,role:"tooltip",children:a||s})})]})})});Ke.displayName=z;var Qe="TooltipArrow",Ze=l.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=X(n);return ts(Qe,n).isInside?null:e.jsx(sr,{...a,...s,ref:r})});Ze.displayName=Qe;function ss(t,r){const n=Math.abs(r.top-t.y),s=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),o=Math.abs(r.left-t.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function ns(t,r,n=5){const s=[];switch(r){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function as(t){const{top:r,right:n,bottom:s,left:a}=t;return[{x:a,y:r},{x:n,y:r},{x:n,y:s},{x:a,y:s}]}function os(t,r){const{x:n,y:s}=t;let a=!1;for(let o=0,i=r.length-1;o<r.length;i=o++){const c=r[o],d=r[i],g=c.x,f=c.y,u=d.x,p=d.y;f>s!=p>s&&n<(u-g)*(s-f)/(p-f)+g&&(a=!a)}return a}function is(t){const r=t.slice();return r.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),ls(r)}function ls(t){if(t.length<=1)return t.slice();const r=[];for(let s=0;s<t.length;s++){const a=t[s];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}r.pop();const n=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),r.length===1&&n.length===1&&r[0].x===n[0].x&&r[0].y===n[0].y?r:r.concat(n)}var cs=Ve,ds=Be,us=qe,ps=Ue,gs=Ke,fs=Ze;function ee({delayDuration:t=0,...r}){return e.jsx(cs,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function ue({...t}){return e.jsx(ee,{children:e.jsx(ds,{"data-slot":"tooltip",...t})})}function pe({...t}){return e.jsx(us,{"data-slot":"tooltip-trigger",...t})}function B({className:t,sideOffset:r=0,children:n,...s}){return e.jsx(ps,{children:e.jsxs(gs,{"data-slot":"tooltip-content",sideOffset:r,className:j("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,e.jsx(fs,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function hs({value:t,onChange:r,onSubmit:n,disabled:s=!1,maxLength:a=200}){const{t:o}=D(),[i,c]=l.useState(t);l.useEffect(()=>{c(t)},[t]);const d=h=>{const x=h.target.value;x.length<=a&&c(x)},g=l.useCallback(()=>{const h=i.trim();h!==t&&(r(h),n())},[i,t,r,n]),f=h=>{h.key==="Enter"&&(h.preventDefault(),g())},u=()=>{c(""),r(""),n()},p=i.length>0;return e.jsxs("div",{className:"flex gap-2",role:"search",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hr,{type:"search",placeholder:o("recipeList.searchPlaceholder"),value:i,onChange:d,onKeyDown:f,disabled:s,maxLength:a,className:"pr-8","aria-label":o("recipeList.searchAriaLabel")}),p&&!s&&e.jsx(S,{type:"button",variant:"ghost",size:"sm",onClick:u,className:"absolute right-0 top-0 h-full px-2 hover:bg-transparent","aria-label":o("recipeList.clearSearch"),children:e.jsx(ke,{className:"h-4 w-4"})})]}),e.jsxs(S,{type:"button",onClick:g,disabled:s||i.trim().length===0,"aria-label":o("recipeList.search"),children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),o("recipeList.search")]})]})}const W=12;function ms({selected:t,allTags:r,onChange:n}){const[s,a]=l.useState(!1),o=u=>{const p=u.toLowerCase(),h=t.includes(p);n(h?t.filter(x=>x!==p):[...t,p])},i=()=>{n([])};if(r.length===0)return null;const c=t.length>0,d=r.length>W,g=s?r:(()=>{const u=r.slice(0,W),p=r.slice(W).filter(x=>t.includes(x.toLowerCase())),h=[...u,...p];return Array.from(new Set(h))})(),f=r.length-W;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tag filters:"}),c&&e.jsx(S,{variant:"ghost",size:"sm",onClick:i,className:"h-auto py-1 px-2 text-xs","aria-label":"Clear all filters",children:"Clear filters"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"group","aria-label":"Tag filters",children:g.map(u=>{const p=u.toLowerCase(),h=t.includes(p);return e.jsxs(S,{variant:h?"default":"outline",size:"sm",onClick:()=>o(u),role:"checkbox","aria-checked":h,className:"h-auto py-1 px-3",children:[u,h&&e.jsx(ke,{className:"ml-1 h-3 w-3"})]},p)})}),d&&e.jsx("div",{className:"flex justify-center pt-1",children:e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"h-auto py-1 px-3 text-xs text-muted-foreground hover:text-foreground",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"mr-1 h-3 w-3"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"mr-1 h-3 w-3"}),"Show more (",f," more)"]})})}),c&&e.jsxs("div",{className:"text-xs text-muted-foreground","aria-live":"polite",children:[t.length," ",t.length===1?"tag":"tags"," selected"]})]})}function xs({value:t,onChange:r}){const{t:n}=D(),s=[{value:"recent",label:n("recipeList.sortRecent")},{value:"oldest",label:n("recipeList.sortOldest")}];return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"sort-select",className:"text-sm font-medium",children:n("recipeList.sortBy")}),e.jsxs(Ut,{value:t,onValueChange:r,children:[e.jsx(Kt,{id:"sort-select",className:"w-[180px]",children:e.jsx(Wt,{placeholder:n("recipeList.selectSorting")})}),e.jsx(Qt,{children:s.map(a=>e.jsx(Zt,{value:a.value,children:a.label},a.value))})]})]})}function vs({item:t,selected:r=!1,onClick:n}){return e.jsx(Oe,{className:`p-4 cursor-pointer transition-colors hover:bg-accent ${r?"border-primary bg-accent":""}`,onClick:n,role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n())},"aria-pressed":r,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2",children:t.title}),t.summary&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.summary}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(s=>e.jsx(Q,{variant:"secondary",className:"text-xs",children:s},s))})]})})}function bs({hasMore:t,isLoading:r,onClick:n}){const{t:s}=D();return!t&&!r?null:e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(S,{variant:"outline",onClick:n,disabled:r||!t,className:"min-w-[200px]",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}),s("recipeList.loading")]}):s("recipeList.loadMore")})})}function ys({pages:t,isLoading:r,isError:n,selectedId:s,onSelect:a,onLoadMore:o,hasNextPage:i,isFetchingNextPage:c}){const{t:d}=D(),g=t.flatMap(u=>u.data);if(n||r||g.length===0)return null;const f=g.length===1?d("recipeList.foundRecipe",{count:g.length}):d("recipeList.foundRecipes",{count:g.length});return e.jsxs("div",{className:"space-y-3",children:[e.jsx("ul",{className:"space-y-3",children:g.map(u=>e.jsx("li",{children:e.jsx(vs,{item:u,selected:s===u.id,onClick:()=>a(u.id)})},u.id))}),e.jsx(bs,{hasMore:i,isLoading:c,onClick:o}),e.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:f})]})}function js({message:t,onCta:r}){const{t:n}=D(),s=t||n("recipeList.emptyStateNoResults");return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx(ze,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm",children:n(r?"recipeList.emptyStateStartJourney":"recipeList.emptyStateNoResultsDesc")}),r&&e.jsxs(S,{onClick:r,size:"lg",className:"gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),n("recipeList.emptyStateCta")]})]})}function ws(t){if(t instanceof Error)return{title:"An error occurred",description:t.message||"Please try again later."};const r=t.message?.toLowerCase()||"";return r.includes("bad request")||r.includes("validation")?{title:"Invalid request",description:"Check your filters and try again."}:r.includes("unauthorized")||r.includes("401")?{title:"Unauthorized",description:"Please log in again."}:r.includes("not found")||r.includes("404")?{title:"Not found",description:"Recipe doesn't exist or has been deleted."}:r.includes("too large")||r.includes("413")?{title:"Too large",description:"Result exceeds the 200KB limit. Please try again."}:r.includes("too many")||r.includes("429")?{title:"Rate limit exceeded",description:"Please wait a moment before trying again."}:r.includes("internal")||r.includes("500")?{title:"Server error",description:"We're sorry, something went wrong. Please try again later."}:r.includes("unavailable")||r.includes("503")?{title:"Service unavailable",description:"Service is temporarily unavailable. Please try again in a moment."}:{title:"An error occurred",description:t.message||"Please try again later."}}function Ns({error:t,onRetry:r}){const{title:n,description:s}=ws(t);return e.jsx("div",{className:"py-8",children:e.jsxs(ie,{variant:"destructive",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx(Fe,{children:n}),e.jsxs(le,{className:"mt-2",children:[e.jsx("p",{children:s}),r&&e.jsxs(S,{variant:"outline",size:"sm",onClick:r,className:"mt-4 gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Try again"]})]})]})})}function Cs({count:t=3}){return e.jsxs("div",{className:"space-y-3",children:[Array.from({length:t}).map((r,n)=>e.jsx(Oe,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"h-6 w-3/4"}),e.jsx(L,{className:"h-4 w-full"}),e.jsx(L,{className:"h-4 w-5/6"}),e.jsxs("div",{className:"flex gap-1 pt-1",children:[e.jsx(L,{className:"h-5 w-16"}),e.jsx(L,{className:"h-5 w-20"}),e.jsx(L,{className:"h-5 w-12"})]}),e.jsx(L,{className:"h-3 w-32 mt-2"})]})},n)),e.jsx("div",{className:"sr-only","aria-live":"polite",children:"Loading recipes..."})]})}async function ks(t){const r=new URLSearchParams;t.search&&r.set("search",t.search),t.tags&&r.set("tags",t.tags),t.sort&&r.set("sort",t.sort),t.limit&&r.set("limit",t.limit.toString()),t.cursor&&r.set("cursor",t.cursor),t.offset!==void 0&&r.set("offset",t.offset.toString());const n=`/api/recipes${r.toString()?`?${r.toString()}`:""}`;return q(n)}async function Ps(t){return q(`/api/recipes/${t}`)}async function Ts(t){return q("/api/recipes/generate",{method:"POST",body:JSON.stringify(t)})}async function Ss(t){return q("/api/recipes",{method:"POST",body:JSON.stringify(t)})}async function Ds(t){await q(`/api/recipes/${t}`,{method:"DELETE"})}function Rs(t){return Kr({queryKey:["recipes",t],queryFn:({pageParam:r=0})=>ks({...t,offset:r}),getNextPageParam:(r,n)=>r.pagination.has_more?n.reduce((a,o)=>a+o.data.length,0):void 0,initialPageParam:0,retry:!1})}function _s(t){return Yt({queryKey:["recipe",t],queryFn:()=>Ps(t),retry:!1,enabled:!!t})}function As(){return ae({mutationFn:Ts})}function Es(){const t=Se();return ae({mutationFn:Ss,onSuccess:()=>{t.invalidateQueries({queryKey:["recipes"]})}})}function Ms(){const t=Se();return ae({mutationFn:Ds,onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["recipes"]}),t.invalidateQueries({queryKey:["recipe",n]})}})}const Ye={search:"",tags:[],sort:"recent",limit:20,offset:0};function we(t){const r={...Ye},n=t.get("search");n&&(r.search=n);const s=t.get("tags");s&&(r.tags=s.split(",").filter(c=>c.trim().length>0));const a=t.get("sort");(a==="recent"||a==="oldest")&&(r.sort=a);const o=t.get("limit");if(o){const c=parseInt(o,10);!isNaN(c)&&c>=1&&c<=100&&(r.limit=c)}const i=t.get("offset");if(i){const c=parseInt(i,10);!isNaN(c)&&c>=0&&(r.offset=c)}return r}function Ls(t){const r=new URLSearchParams;return t.search&&t.search.trim()&&r.set("search",t.search.trim()),t.tags.length>0&&r.set("tags",t.tags.join(",")),t.sort&&t.sort!=="recent"&&r.set("sort",t.sort),t.limit&&t.limit!==20&&r.set("limit",t.limit.toString()),t.offset&&t.offset>0&&r.set("offset",t.offset.toString()),r}function Is(){const[t,r]=l.useState(()=>{if(typeof window>"u")return Ye;const a=new URLSearchParams(window.location.search);return we(a)}),n=l.useCallback(a=>{const o=Ls(a),i=`${window.location.pathname}${o.toString()?`?${o.toString()}`:""}`;window.history.pushState({},"",i)},[]),s=l.useCallback(a=>{r(o=>{const i=typeof a=="function"?a(o):a;return n(i),i})},[n]);return l.useEffect(()=>{const a=()=>{const o=new URLSearchParams(window.location.search),i=we(o);r(i)};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[]),{filters:t,setFilters:s}}function Os(t){const r=l.useRef(null),n=`scroll-${t}`;return l.useEffect(()=>{const s=r.current;if(!s)return;const a=sessionStorage.getItem(n);if(a){const o=parseInt(a,10);isNaN(o)||setTimeout(()=>{s.scrollTop=o},0)}},[n]),l.useEffect(()=>{const s=r.current;if(!s)return;let a;const o=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(n,s.scrollTop.toString())},100)};return s.addEventListener("scroll",o,{passive:!0}),()=>{clearTimeout(a),s.removeEventListener("scroll",o)}},[n]),r}function $s({selectedId:t,onSelect:r,onGenerateClick:n,onToggleCollapse:s}){const{filters:a,setFilters:o}=Is(),i=Os(typeof window<"u"?window.location.search:""),{data:c,isLoading:d,isError:g,error:f,fetchNextPage:u,hasNextPage:p,isFetchingNextPage:h,refetch:x}=Rs({search:a.search||void 0,tags:a.tags.length>0?a.tags.join(","):void 0,sort:a.sort,limit:a.limit}),N=l.useMemo(()=>{if(!c?.pages)return[];const _=new Set;return c.pages.forEach(E=>{E.data.forEach(Ft=>{Ft.tags?.forEach(zt=>_.add(zt))})}),Array.from(_).sort()},[c]),b=l.useCallback(_=>{o(E=>({...E,search:_,offset:0}))},[]),C=l.useCallback(()=>{x()},[x]),w=l.useCallback(_=>{o(E=>({...E,tags:_,offset:0}))},[]),v=l.useCallback(_=>{o(E=>({...E,sort:_,offset:0}))},[]),m=l.useCallback(()=>{p&&!h&&u()},[p,h,u]),y=l.useCallback(()=>{x()},[x]),P=c?.pages||[],$=P.reduce((_,E)=>_+E.data.length,0),xe=a.search||a.tags.length>0;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Your Recipes"}),s&&e.jsx(ee,{children:e.jsxs(ue,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs(S,{onClick:s,variant:"ghost",size:"icon",className:"h-8 w-8 -mr-2","aria-label":"Hide recipe list",children:[e.jsx(jr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(Pe,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(B,{side:"left",className:"hidden lg:block",children:[e.jsx("p",{children:"Hide recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(B,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Hide recipe list"})})]})})]}),e.jsxs("div",{className:"space-y-3 p-4 lg:pb-4 max-lg:pb-3 border-b",children:[e.jsx(hs,{value:a.search||"",onChange:b,onSubmit:C}),e.jsx(ms,{selected:a.tags,allTags:N,onChange:w}),e.jsx(xs,{value:a.sort,onChange:v})]}),e.jsx("div",{ref:i,className:"flex-1 overflow-y-auto p-4 max-lg:p-3 min-h-0",children:d?e.jsx(Cs,{count:3}):g?e.jsx(Ns,{error:f,onRetry:y}):$===0?e.jsx(js,{message:xe?"No recipes matching your filters":"No recipes yet",onCta:xe?void 0:n}):e.jsx(ys,{pages:P,isLoading:d,isError:g,selectedId:t,onSelect:r,onLoadMore:m,hasNextPage:p||!1,isFetchingNextPage:h})})]})}var te="Tabs",[Fs,oa]=Y(te,[Ie]),Je=Ie(),[zs,ge]=Fs(te),Xe=l.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:d="automatic",...g}=t,f=ar(c),[u,p]=oe({prop:s,onChange:a,defaultProp:o??"",caller:te});return e.jsx(zs,{scope:n,baseId:H(),value:u,onValueChange:p,orientation:i,dir:f,activationMode:d,children:e.jsx(A.div,{dir:f,"data-orientation":i,...g,ref:r})})});Xe.displayName=te;var et="TabsList",tt=l.forwardRef((t,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=t,o=ge(et,n),i=Je(n);return e.jsx(gr,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:e.jsx(A.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:r})})});tt.displayName=et;var rt="TabsTrigger",st=l.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=t,i=ge(rt,n),c=Je(n),d=ot(i.baseId,s),g=it(i.baseId,s),f=s===i.value;return e.jsx(fr,{asChild:!0,...c,focusable:!a,active:f,children:e.jsx(A.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":g,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:r,onMouseDown:T(t.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?i.onValueChange(s):u.preventDefault()}),onKeyDown:T(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(s)}),onFocus:T(t.onFocus,()=>{const u=i.activationMode!=="manual";!f&&!a&&u&&i.onValueChange(s)})})})});st.displayName=rt;var nt="TabsContent",at=l.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...i}=t,c=ge(nt,n),d=ot(c.baseId,s),g=it(c.baseId,s),f=s===c.value,u=l.useRef(f);return l.useEffect(()=>{const p=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(G,{present:a||f,children:({present:p})=>e.jsx(A.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:g,tabIndex:0,...i,ref:r,style:{...t.style,animationDuration:u.current?"0s":void 0},children:p&&o})})});at.displayName=nt;function ot(t,r){return`${t}-trigger-${r}`}function it(t,r){return`${t}-content-${r}`}var Gs=Xe,Hs=tt,Vs=st,Bs=at;function qs({className:t,...r}){return e.jsx(Gs,{"data-slot":"tabs",className:j("flex flex-col gap-2",t),...r})}function Us({className:t,...r}){return e.jsx(Hs,{"data-slot":"tabs-list",className:j("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function Ne({className:t,...r}){return e.jsx(Vs,{"data-slot":"tabs-trigger",className:j("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Ce({className:t,...r}){return e.jsx(Bs,{"data-slot":"tabs-content",className:j("flex-1 outline-none",t),...r})}function Ks({className:t,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:j("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}function Ws({value:t,onChange:r,disabled:n=!1,maxLength:s=2e3,label:a="Recipe generation prompt",placeholder:o="Describe the recipe you want to generate..."}){const{t:i}=D(),c=s-t.length,d=c<100,g=c===0,f=u=>{const p=u.target.value;p.length<=s&&r(p)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"recipe-prompt",children:a}),e.jsx(Ks,{id:"recipe-prompt",value:t,onChange:f,disabled:n,placeholder:o,className:"min-h-[200px] resize-none",maxLength:s,"aria-describedby":"prompt-counter"}),e.jsxs("div",{id:"prompt-counter",className:`text-xs text-right ${g?"text-destructive font-semibold":d?"text-yellow-600 dark:text-yellow-500":"text-muted-foreground"}`,"aria-live":"polite",children:[i("generator.charactersCounter",{count:t.length,max:s}),g&&i("generator.limitReached")]})]})}function Qs(t,r){const n=t.message?.toLowerCase()||"";if(n.includes("validation")||n.includes("bad request"))return{title:r("generator.errorInvalidPromptTitle"),description:r("generator.errorInvalidPromptDesc"),canRetry:!1};if(n.includes("too large")||n.includes("413"))return{title:r("generator.errorTooLargeTitle"),description:r("generator.errorTooLargeDesc"),canRetry:!0};if(n.includes("too many")||n.includes("429")){const s=t.details?.retry_after||60;return{title:r("generator.errorRateLimitTitle"),description:r("generator.errorRateLimitDesc",{retryAfter:s}),canRetry:!1}}return n.includes("unavailable")||n.includes("503")?{title:r("generator.errorServiceUnavailableTitle"),description:r("generator.errorServiceUnavailableDesc"),canRetry:!0}:n.includes("internal")||n.includes("500")?{title:r("generator.errorServerTitle"),description:r("generator.errorServerDesc"),canRetry:!0}:{title:r("generator.errorGenericTitle"),description:t.message||r("generator.errorGenericDesc"),canRetry:!0}}function Zs({onClick:t,disabled:r,loading:n,error:s,onRetry:a}){const{t:o}=D(),i=s?Qs(s,o):null;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{onClick:t,disabled:r||n,className:"w-full gap-2",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-5 w-5 animate-spin"}),o("generator.generating")]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"h-5 w-5"}),o("generator.generateButton")]})}),n&&e.jsx("div",{className:"text-xs text-center text-muted-foreground","aria-live":"polite",children:o("generator.generatingStatus")}),s&&i&&e.jsxs(ie,{variant:"destructive",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx(Fe,{children:i.title}),e.jsxs(le,{className:"mt-2",children:[e.jsx("p",{className:"text-sm",children:i.description}),i.canRetry&&a&&e.jsxs(S,{variant:"outline",size:"sm",onClick:a,className:"mt-3 gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),o("generator.tryAgain")]})]})]})]})}function Ys({onGenerated:t}){const[r,n]=l.useState(""),[s,a]=l.useState(null),{lang:o,t:i}=D(),c=As();l.useEffect(()=>{s&&a(null)},[r]);const d=()=>{!r.trim()||r.length<1||r.length>2e3||(a(null),c.mutate({prompt:r.trim(),lang:o},{onSuccess:p=>{const h={prompt:r.trim(),recipe:p.recipe,generationId:p.generation_id,generatedAt:p.generated_at};sessionStorage.setItem("generatorDraft",JSON.stringify(h)),t(p)},onError:p=>{a(p)}}))},g=()=>{d()},u=!(r.trim().length>=1&&r.trim().length<=2e3)||c.isPending;return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:i("generator.title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i("generator.description")})]}),e.jsx(Ws,{value:r,onChange:n,disabled:c.isPending,maxLength:2e3,placeholder:i("generator.placeholder")}),e.jsx(Zs,{onClick:d,disabled:u,loading:c.isPending,error:s,onRetry:g}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:i("generator.tipsTitle")}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:i("generator.tip1")}),e.jsx("li",{children:i("generator.tip2")}),e.jsx("li",{children:i("generator.tip3")})]})]})]})}function Js({data:t,onTagClick:r,readonly:n=!1}){const s="recipe"in t?t.recipe:t,a="tags"in t&&Array.isArray(t.tags)?t.tags:s.tags||[],{t:o}=D(),i=["bg-blue-100 text-blue-700 dark:bg-blue-950/40 dark:text-blue-300 border-blue-200 dark:border-blue-800","bg-purple-100 text-purple-700 dark:bg-purple-950/40 dark:text-purple-300 border-purple-200 dark:border-purple-800","bg-pink-100 text-pink-700 dark:bg-pink-950/40 dark:text-pink-300 border-pink-200 dark:border-pink-800","bg-orange-100 text-orange-700 dark:bg-orange-950/40 dark:text-orange-300 border-orange-200 dark:border-orange-800","bg-teal-100 text-teal-700 dark:bg-teal-950/40 dark:text-teal-300 border-teal-200 dark:border-teal-800","bg-cyan-100 text-cyan-700 dark:bg-cyan-950/40 dark:text-cyan-300 border-cyan-200 dark:border-cyan-800","bg-indigo-100 text-indigo-700 dark:bg-indigo-950/40 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800","bg-lime-100 text-lime-700 dark:bg-lime-950/40 dark:text-lime-300 border-lime-200 dark:border-lime-800"],c=v=>{let m=0;for(let y=0;y<v.length;y++)m=v.charCodeAt(y)+((m<<5)-m);return i[Math.abs(m)%i.length]},[d,g]=l.useState(s.servings),[f,u]=l.useState(new Set),[p,h]=l.useState(new Set),x=d/s.servings,N=v=>x===1?v:v.replace(/(\d+(\.\d+)?)/g,m=>{const P=parseFloat(m)*x;return Number.isInteger(P)?P.toString():P.toFixed(1).replace(/\.0$/,"")}),b=v=>{const m=new Set(f);m.has(v)?m.delete(v):m.add(v),u(m)},C=v=>{const m=new Set(p);m.has(v)?m.delete(v):m.add(v),h(m)},w={easy:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",hard:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return e.jsxs("article",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:s.title}),s.cuisine&&e.jsx("p",{className:"text-muted-foreground/70 italic text-sm",children:s.cuisine})]}),s.summary&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:s.summary}),s.description&&e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description}),(a.length>0||s.dietary_info&&Object.keys(s.dietary_info).length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.dietary_info&&Object.entries(s.dietary_info).map(([v,m])=>m&&e.jsx(Q,{variant:"outline",className:"rounded-full border-2 bg-emerald-50 text-emerald-700 border-emerald-300 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-700 px-3",children:v.replace(/_/g," ")},v)),a.map(v=>e.jsx(Q,{variant:"outline",className:j("transition-all border",c(v),r&&!n&&"cursor-pointer hover:scale-105 hover:shadow-sm"),onClick:()=>!n&&r?.(v),role:r&&!n?"button":void 0,tabIndex:r&&!n?0:void 0,onKeyDown:m=>{!n&&r&&(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),r(v))},children:v},v))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(kr,{className:"h-4 w-4"}),e.jsxs("span",{children:[o("recipePreview.prepTime"),": ",s.prep_time_minutes,"m | ",o("recipePreview.cookTime"),": ",s.cook_time_minutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Q,{className:w[s.difficulty],children:s.difficulty})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-primary/5 dark:bg-primary/10 py-2 px-4 rounded-full border border-primary/20",children:[e.jsx(Vr,{className:"h-4 w-4 text-primary"}),e.jsxs("span",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wide",children:[o("recipePreview.servings"),":"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>g(Math.max(1,d-1)),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Decrease servings",children:"-"}),e.jsx("span",{className:"font-bold text-foreground min-w-[1.5rem] text-center",children:d}),e.jsx("button",{onClick:()=>g(d+1),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Increase servings",children:"+"})]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:o("recipePreview.ingredients")}),e.jsx("span",{className:"text-sm text-muted-foreground",children:o("recipePreview.ingredientsProgress",{count:f.size,total:s.ingredients.length})})]}),e.jsx("ul",{className:"space-y-3",children:s.ingredients.map((v,m)=>{const y=f.has(m);return e.jsx("li",{children:e.jsxs("button",{onClick:()=>b(m),className:j("group flex items-start gap-3 w-full text-left p-3 rounded-xl transition-all duration-200",y?"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-800 dark:text-emerald-200":"hover:bg-accent bg-transparent"),children:[e.jsx("div",{className:j("mt-0.5 flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors",y?"border-emerald-500 bg-emerald-500":"border-border group-hover:border-primary"),children:y&&e.jsx(be,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:j("text-foreground leading-relaxed transition-opacity",y&&"line-through opacity-70"),children:N(v)})]})},m)})})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:o("recipePreview.instructions")}),e.jsx("div",{className:"text-sm font-medium px-3 py-1 bg-primary/10 dark:bg-primary/20 text-primary rounded-full",children:o("recipePreview.stepProgress",{current:p.size<s.instructions.length?p.size+1:s.instructions.length,total:s.instructions.length})})]}),e.jsx("ol",{className:"space-y-6",children:s.instructions.map((v,m)=>{const y=p.has(m);return e.jsxs("li",{className:"relative flex gap-4 sm:gap-6 group",children:[m!==s.instructions.length-1&&e.jsx("div",{className:j("absolute left-4 top-10 bottom-0 w-0.5 -ml-px",y?"bg-primary/30":"bg-border"),"aria-hidden":"true"}),e.jsx("button",{onClick:()=>C(m),className:j("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all z-10",y?"bg-primary border-primary text-primary-foreground ring-4 ring-primary/20":"bg-background border-border text-primary group-hover:border-primary"),"aria-label":`Toggle step ${m+1}`,children:y?e.jsx(be,{className:"w-5 h-5"}):m+1}),e.jsx("div",{className:j("flex-grow pt-1 pb-6 transition-opacity duration-300",y?"opacity-50":"opacity-100"),children:e.jsx("p",{className:j("text-foreground leading-relaxed text-lg",y&&"line-through decoration-muted-foreground/30"),children:v})})]},m)})}),p.size===s.instructions.length&&e.jsxs("div",{className:"mt-8 p-6 bg-emerald-50 dark:bg-emerald-950/30 rounded-2xl border border-emerald-200 dark:border-emerald-800 text-center",children:[e.jsx(je,{className:"w-12 h-12 text-emerald-500 dark:text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100 mb-1",children:o("recipePreview.completionMessage")}),e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300",children:o("recipePreview.completionSubtitle")})]})]}),s.nutrition&&Object.keys(s.nutrition).length>0&&e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Ar,{className:"w-4 h-4 text-orange-500"}),o("recipePreview.nutrition")," ",o("recipePreview.nutritionPerServing")]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.nutrition.calories!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1",children:o("recipePreview.calories")}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.calories*x/d*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"kcal"})]})]}),s.nutrition.protein_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(vr,{className:"w-3 h-3 mr-1 text-red-400"})," ",o("recipePreview.protein")]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.protein_g*x/d*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.carbs_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(qr,{className:"w-3 h-3 mr-1 text-amber-400"})," ",o("recipePreview.carbs")]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.carbs_g*x/d*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.fat_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(Tr,{className:"w-3 h-3 mr-1 text-yellow-500"})," ",o("recipePreview.fat")]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.fat_g*x/d*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-4 text-center",children:"Nutritional values are approximate and may differ from actual values."})]})]})}function Xs({onClick:t,disabled:r,loading:n,disabledReason:s}){const{t:a}=D(),o=e.jsxs(S,{onClick:t,disabled:r||n,className:"gap-2",size:"lg",children:[e.jsx(Or,{className:"h-5 w-5"}),a(n?"common.saving":"recipeSave.saveButton")]});return r&&s?e.jsx(ee,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ue,{children:[e.jsx(pe,{asChild:!0,children:o}),e.jsx(B,{className:"max-w-xs",children:e.jsx("p",{children:s})})]}),s.toLowerCase().includes("disliked")&&e.jsxs("a",{href:"/profile",className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Dr,{className:"h-3 w-3"}),a("recipeSave.updatePreferences")]})]})}):o}var re="Dialog",[lt,ct]=Y(re),[en,R]=lt(re),dt=t=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=t,c=l.useRef(null),d=l.useRef(null),[g,f]=oe({prop:s,defaultProp:a??!1,onChange:o,caller:re});return e.jsx(en,{scope:r,triggerRef:c,contentRef:d,contentId:H(),titleId:H(),descriptionId:H(),open:g,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(u=>!u),[f]),modal:i,children:n})};dt.displayName=re;var ut="DialogTrigger",pt=l.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=R(ut,n),o=O(r,a.triggerRef);return e.jsx(A.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":me(a.open),...s,ref:o,onClick:T(t.onClick,a.onOpenToggle)})});pt.displayName=ut;var fe="DialogPortal",[tn,gt]=lt(fe,{forceMount:void 0}),ft=t=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=t,o=R(fe,r);return e.jsx(tn,{scope:r,forceMount:n,children:l.Children.map(s,i=>e.jsx(G,{present:n||o.open,children:e.jsx(Re,{asChild:!0,container:a,children:i})}))})};ft.displayName=fe;var Z="DialogOverlay",ht=l.forwardRef((t,r)=>{const n=gt(Z,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=R(Z,t.__scopeDialog);return o.modal?e.jsx(G,{present:s||o.open,children:e.jsx(sn,{...a,ref:r})}):null});ht.displayName=Z;var rn=pr("DialogOverlay.RemoveScroll"),sn=l.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=R(Z,n);return e.jsx(lr,{as:rn,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(A.div,{"data-state":me(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),I="DialogContent",mt=l.forwardRef((t,r)=>{const n=gt(I,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=R(I,t.__scopeDialog);return e.jsx(G,{present:s||o.open,children:o.modal?e.jsx(nn,{...a,ref:r}):e.jsx(an,{...a,ref:r})})});mt.displayName=I;var nn=l.forwardRef((t,r)=>{const n=R(I,t.__scopeDialog),s=l.useRef(null),a=O(r,n.contentRef,s);return l.useEffect(()=>{const o=s.current;if(o)return ir(o)},[]),e.jsx(xt,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:T(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:T(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&o.preventDefault()}),onFocusOutside:T(t.onFocusOutside,o=>o.preventDefault())})}),an=l.forwardRef((t,r)=>{const n=R(I,t.__scopeDialog),s=l.useRef(!1),a=l.useRef(!1);return e.jsx(xt,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(s.current||n.triggerRef.current?.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;n.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),xt=l.forwardRef((t,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=t,c=R(I,n),d=l.useRef(null),g=O(r,d);return cr(),e.jsxs(e.Fragment,{children:[e.jsx(dr,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(_e,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":me(c.open),...i,ref:g,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(ln,{titleId:c.titleId}),e.jsx(dn,{contentRef:d,descriptionId:c.descriptionId})]})]})}),he="DialogTitle",vt=l.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=R(he,n);return e.jsx(A.h2,{id:a.titleId,...s,ref:r})});vt.displayName=he;var bt="DialogDescription",yt=l.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=R(bt,n);return e.jsx(A.p,{id:a.descriptionId,...s,ref:r})});yt.displayName=bt;var jt="DialogClose",wt=l.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=R(jt,n);return e.jsx(A.button,{type:"button",...s,ref:r,onClick:T(t.onClick,()=>a.onOpenChange(!1))})});wt.displayName=jt;function me(t){return t?"open":"closed"}var Nt="DialogTitleWarning",[on,Ct]=or(Nt,{contentName:I,titleName:he,docsSlug:"dialog"}),ln=({titleId:t})=>{const r=Ct(Nt),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},cn="DialogDescriptionWarning",dn=({contentRef:t,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ct(cn).contentName}}.`;return l.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,t,r]),null},un=dt,pn=pt,gn=ft,fn=ht,hn=mt,mn=vt,xn=yt,kt=wt,Pt="AlertDialog",[vn,ia]=Y(Pt,[ct]),M=ct(),Tt=t=>{const{__scopeAlertDialog:r,...n}=t,s=M(r);return e.jsx(un,{...s,...n,modal:!0})};Tt.displayName=Pt;var bn="AlertDialogTrigger",St=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=M(n);return e.jsx(pn,{...a,...s,ref:r})});St.displayName=bn;var yn="AlertDialogPortal",Dt=t=>{const{__scopeAlertDialog:r,...n}=t,s=M(r);return e.jsx(gn,{...s,...n})};Dt.displayName=yn;var jn="AlertDialogOverlay",Rt=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=M(n);return e.jsx(fn,{...a,...s,ref:r})});Rt.displayName=jn;var F="AlertDialogContent",[wn,Nn]=vn(F),Cn=Ee("AlertDialogContent"),_t=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,children:s,...a}=t,o=M(n),i=l.useRef(null),c=O(r,i),d=l.useRef(null);return e.jsx(on,{contentName:F,titleName:At,docsSlug:"alert-dialog",children:e.jsx(wn,{scope:n,cancelRef:d,children:e.jsxs(hn,{role:"alertdialog",...o,...a,ref:c,onOpenAutoFocus:T(a.onOpenAutoFocus,g=>{g.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:g=>g.preventDefault(),onInteractOutside:g=>g.preventDefault(),children:[e.jsx(Cn,{children:s}),e.jsx(Pn,{contentRef:i})]})})})});_t.displayName=F;var At="AlertDialogTitle",Et=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=M(n);return e.jsx(mn,{...a,...s,ref:r})});Et.displayName=At;var Mt="AlertDialogDescription",Lt=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=M(n);return e.jsx(xn,{...a,...s,ref:r})});Lt.displayName=Mt;var kn="AlertDialogAction",It=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=M(n);return e.jsx(kt,{...a,...s,ref:r})});It.displayName=kn;var Ot="AlertDialogCancel",$t=l.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:a}=Nn(Ot,n),o=M(n),i=O(r,a);return e.jsx(kt,{...o,...s,ref:i})});$t.displayName=Ot;var Pn=({contentRef:t})=>{const r=`\`${F}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${F}\` by passing a \`${Mt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${F}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},Tn=Tt,Sn=St,Dn=Dt,Rn=Rt,_n=_t,An=It,En=$t,Mn=Et,Ln=Lt;function In({...t}){return e.jsx(Tn,{"data-slot":"alert-dialog",...t})}function On({...t}){return e.jsx(Sn,{"data-slot":"alert-dialog-trigger",...t})}function $n({...t}){return e.jsx(Dn,{"data-slot":"alert-dialog-portal",...t})}function Fn({className:t,...r}){return e.jsx(Rn,{"data-slot":"alert-dialog-overlay",className:j("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function zn({className:t,...r}){return e.jsxs($n,{children:[e.jsx(Fn,{}),e.jsx(_n,{"data-slot":"alert-dialog-content",className:j("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r})]})}function Gn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:j("flex flex-col gap-2 text-center sm:text-left",t),...r})}function Hn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:j("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function Vn({className:t,...r}){return e.jsx(Mn,{"data-slot":"alert-dialog-title",className:j("text-lg font-semibold",t),...r})}function Bn({className:t,...r}){return e.jsx(Ln,{"data-slot":"alert-dialog-description",className:j("text-muted-foreground text-sm",t),...r})}function qn({className:t,...r}){return e.jsx(An,{className:j(Me(),t),...r})}function Un({className:t,...r}){return e.jsx(En,{className:j(Me({variant:"outline"}),t),...r})}function Kn({recipeId:t,recipeName:r,onDeleted:n,loading:s=!1}){const{t:a}=D(),[o,i]=l.useState(!1),c=()=>{n(t),i(!1)};return e.jsxs(In,{open:o,onOpenChange:i,children:[e.jsx(On,{asChild:!0,children:e.jsxs(S,{variant:"destructive",size:"lg",className:"gap-2",disabled:s,children:[e.jsx(Gr,{className:"h-5 w-5"}),a("recipeList.deleteRecipe")]})}),e.jsxs(zn,{children:[e.jsxs(Gn,{children:[e.jsx(Vn,{children:a("recipeList.deleteConfirmTitle")}),e.jsx(Bn,{children:a("recipeList.deleteConfirmDesc",{name:r})})]}),e.jsxs(Hn,{children:[e.jsx(Un,{children:a("common.cancel")}),e.jsx(qn,{onClick:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a("recipeList.deleteConfirmButton")})]})]})]})}function Wn({mode:t,recipe:r,details:n,onSaved:s,onDeleted:a,onTagClick:o,onRestoreDraft:i}){const{data:c}=Jt(),{lang:d,t:g}=D(),f=Es(),u=Ms(),p=w=>{if(!c?.disliked_ingredients||c.disliked_ingredients.length===0)return null;const v=c.disliked_ingredients.map(P=>P.toLowerCase()),m=w.ingredients.map(P=>P.toLowerCase()),y=v.find(P=>m.some($=>$.includes(P)));return y?g("recipeSave.dislikedWarning",{ingredient:y}):null},h=()=>{r&&f.mutate({recipe:r,tags:r.tags,language:d},{onSuccess:w=>{K.success(g("recipeSave.saveSuccess")),s?.(w)},onError:w=>{K.error(w.message||g("recipeSave.saveError"))}})},x=w=>{u.mutate(w,{onSuccess:()=>{K.success(g("recipePreview.deleteSuccess")),a?.(w)},onError:v=>{K.error(v.message||g("recipePreview.deleteError"))}})};if(!r&&!n)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx(ze,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:g("recipePreview.emptyStateTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:g("recipePreview.emptyStateDesc")})]});const N=t==="saved"&&n?n:r;if(!N)return null;const b=t==="draft"&&r?p(r):null,C=t==="draft"&&!b;return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[b&&e.jsx(ie,{children:e.jsx(le,{children:b})}),e.jsx(Js,{data:N,onTagClick:o,readonly:t==="saved"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-6 border-t",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="draft"&&r&&e.jsxs(e.Fragment,{children:[e.jsx(Xs,{onClick:h,disabled:!C||f.isPending,loading:f.isPending,disabledReason:b||void 0}),i&&e.jsxs(S,{variant:"outline",size:"lg",onClick:i,className:"gap-2",children:[e.jsx(Lr,{className:"h-5 w-5"}),g("recipePreview.restoreDraft")]})]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="saved"&&n&&e.jsx(Kn,{recipeId:n.id,recipeName:n.title,onDeleted:x,loading:u.isPending})})]})]})})}function Qn({selectedRecipeId:t,onTagClick:r,onRecipeDeleted:n,onRecipeGenerated:s}){const[a,o]=l.useState("preview"),[i,c]=l.useState(),{data:d}=_s(t||"");l.useEffect(()=>{t&&d&&o("preview")},[t,d]),l.useEffect(()=>{const b=()=>{window.location.hash==="#generator"&&(o("generator"),window.history.replaceState(null,"",window.location.pathname+window.location.search))};return b(),window.addEventListener("hashchange",b),()=>window.removeEventListener("hashchange",b)},[]);const g=b=>{c(b.recipe),o("preview"),s?.()},f=b=>{c(void 0),console.log("Recipe saved:",b.id)},u=()=>{n?.(),window.history.pushState({},"","/app")},p=()=>{const b=sessionStorage.getItem("generatorDraft");if(b)try{const C=JSON.parse(b);c(C.recipe)}catch(C){console.error("Failed to restore draft:",C)}},h=t&&d?"saved":"draft",x=!t&&i,N=t&&d;return e.jsx("div",{className:"h-full flex flex-col",children:e.jsxs(qs,{value:a,onValueChange:b=>o(b),className:"flex-1 flex flex-col",children:[e.jsxs(Us,{className:"w-full",children:[e.jsx(Ne,{value:"generator",className:"flex-1",children:"Generator"}),e.jsxs(Ne,{value:"preview",className:"flex-1",children:["Preview",(x||N)&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-primary"})]})]}),e.jsx(Ce,{value:"generator",className:"flex-1 overflow-hidden mt-0",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(Ys,{onGenerated:g})})}),e.jsx(Ce,{value:"preview",className:"flex-1 overflow-hidden mt-0",children:e.jsx(Wn,{mode:h,recipe:x?i:void 0,details:N?d:void 0,onSaved:f,onDeleted:u,onTagClick:r,onRestoreDraft:p})})]})})}function Zn({selectedRecipeId:t}){const[r,n]=l.useState(t),[s,a]=l.useState(()=>typeof window<"u"?localStorage.getItem("leftPanelCollapsed")==="true":!1),o=u=>{n(u),window.history.pushState({},"",`/app/recipes/${u}`),typeof window<"u"&&window.innerWidth<1024&&(a(!0),typeof window<"u"&&localStorage.setItem("leftPanelCollapsed","true"))},i=u=>{const p=new URLSearchParams(window.location.search),h=p.get("tags")?.split(",").filter(Boolean)||[];if(!h.includes(u.toLowerCase())){h.push(u.toLowerCase()),p.set("tags",h.join(",")),p.delete("offset");const x=`${window.location.pathname}?${p.toString()}`;window.history.pushState({},"",x),window.dispatchEvent(new PopStateEvent("popstate"))}},c=()=>{console.log("Switch to Generator tab")},d=()=>{n(void 0)},g=()=>{n(void 0),window.history.pushState({},"","/app")},f=()=>{a(u=>{const p=!u;return typeof window<"u"&&localStorage.setItem("leftPanelCollapsed",String(p)),p})};return l.useEffect(()=>{const u=p=>{(p.ctrlKey||p.metaKey)&&p.key==="b"&&(p.preventDefault(),f())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]),e.jsxs("div",{className:"relative grid lg:grid-cols-[auto_1fr] gap-4 h-full",children:[e.jsx("div",{className:j("flex flex-col h-full border rounded-lg bg-card transition-all duration-300 ease-in-out","lg:relative",s?"lg:w-0 lg:overflow-hidden lg:border-0 lg:p-0 lg:gap-0":"lg:w-[420px]","fixed lg:static left-0 right-0 z-40","max-lg:top-16 max-lg:h-[calc(100vh-5rem)] max-lg:mx-4 max-lg:shadow-xl",s?"max-lg:-translate-y-[calc(100%+5rem)] max-lg:opacity-0 max-lg:pointer-events-none":"max-lg:translate-y-0 max-lg:opacity-100"),children:e.jsx($s,{selectedId:r,onSelect:o,onGenerateClick:c,onToggleCollapse:f})}),s&&e.jsx(ee,{children:e.jsxs(ue,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs(S,{onClick:f,variant:"outline",size:"icon",className:j("fixed z-50 shadow-lg hover:shadow-xl transition-shadow","lg:top-20 lg:left-4","max-lg:top-16 max-lg:left-1/2 max-lg:-translate-x-1/2"),"aria-label":"Show recipe list",children:[e.jsx(Nr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(Te,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(B,{side:"right",className:"hidden lg:block",children:[e.jsx("p",{children:"Show recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(B,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Show recipe list"})})]})}),e.jsx("div",{className:j("flex flex-col h-full border rounded-lg bg-card transition-all duration-300",!s&&"max-lg:hidden"),children:e.jsx(Qn,{selectedRecipeId:r,onTagClick:i,onRecipeDeleted:d,onRecipeGenerated:g})}),!s&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30 transition-opacity duration-300",onClick:f,"aria-hidden":"true"})]})}function la({selectedRecipeId:t}){const[r,n]=l.useState(null);return l.useEffect(()=>{ye.auth.getSession().then(({data:{session:a}})=>{n(a?.access_token??null)});const{data:{subscription:s}}=ye.auth.onAuthStateChange((a,o)=>{n(o?.access_token??null)});return()=>s.unsubscribe()},[]),e.jsx(ur,{authToken:r,children:e.jsxs(Xt,{children:[e.jsx(Zn,{selectedRecipeId:t}),e.jsx(er,{})]})})}export{la as AppPage};
