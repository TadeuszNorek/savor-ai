import{c as H,j as o}from"./createLucideIcon.Dkxjm4wi.js";import{r as s}from"./index.BkdHoFEG.js";import{D as pn,T as fn}from"./DarkModeToggle.BEg8hsAg.js";import{g as ve,L as mn,c as Me,l as hn,a as we,n as _e,f as xn,R as gn,A as vn,P as Mn,d as x,i as wn,k as _n,j as Cn,F as bn,D as Rn,C as Sn,e as yn,b as jn,u as he,I as Pn}from"./Combination.MfsThBZB.js";import{B as D,P as I,u as L,f as Dn,b as In,g as Ce,a as X,s as B}from"./supabase.client.D2OLuBHL.js";import{c as be,P as Y,I as En,R as Nn,S as kn}from"./index.CIghDmsc.js";import{c as An,a as Tn}from"./telemetry.C471PJLg.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ln=H("book-open",On);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Gn=H("circle-user",Fn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Un=H("log-out",Kn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bn=H("user",$n);function zn(){const{lang:e,setLang:t,isLoading:n}=ve(),r=async a=>{a!==e&&await t(a)};return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(D,{variant:e==="pl"?"default":"ghost",size:"sm",onClick:()=>r("pl"),disabled:n,"aria-label":"Switch to Polish",className:"min-w-[42px] px-2",children:"PL"}),o.jsx(D,{variant:e==="en"?"default":"ghost",size:"sm",onClick:()=>r("en"),disabled:n,"aria-label":"Switch to English",className:"min-w-[42px] px-2",children:"EN"}),n&&o.jsx(mn,{className:"h-3 w-3 animate-spin text-muted-foreground ml-1","aria-label":"Syncing language..."})]})}var te=["Enter"," "],Vn=["ArrowDown","PageUp","Home"],Re=["ArrowUp","PageDown","End"],Hn=[...Vn,...Re],Xn={ltr:[...te,"ArrowRight"],rtl:[...te,"ArrowLeft"]},Yn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},F="Menu",[T,Wn,qn]=hn(F),[b,Se]=Me(F,[qn,we,be]),W=we(),ye=be(),[Zn,R]=b(F),[Jn,G]=b(F),je=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:c,modal:d=!0}=e,l=W(t),[m,h]=s.useState(null),p=s.useRef(!1),i=_e(c),f=xn(a);return s.useEffect(()=>{const w=()=>{p.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>p.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(gn,{...l,children:o.jsx(Zn,{scope:t,open:n,onOpenChange:i,content:m,onContentChange:h,children:o.jsx(Jn,{scope:t,onClose:s.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:p,dir:f,modal:d,children:r})})})};je.displayName=F;var Qn="MenuAnchor",oe=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=W(n);return o.jsx(vn,{...a,...r,ref:t})});oe.displayName=Qn;var re="MenuPortal",[et,Pe]=b(re,{forceMount:void 0}),De=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,c=R(re,t);return o.jsx(et,{scope:t,forceMount:n,children:o.jsx(Y,{present:n||c.open,children:o.jsx(Mn,{asChild:!0,container:a,children:r})})})};De.displayName=re;var _="MenuContent",[nt,ae]=b(_),Ie=s.forwardRef((e,t)=>{const n=Pe(_,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,c=R(_,e.__scopeMenu),d=G(_,e.__scopeMenu);return o.jsx(T.Provider,{scope:e.__scopeMenu,children:o.jsx(Y,{present:r||c.open,children:o.jsx(T.Slot,{scope:e.__scopeMenu,children:d.modal?o.jsx(tt,{...a,ref:t}):o.jsx(ot,{...a,ref:t})})})})}),tt=s.forwardRef((e,t)=>{const n=R(_,e.__scopeMenu),r=s.useRef(null),a=L(t,r);return s.useEffect(()=>{const c=r.current;if(c)return wn(c)},[]),o.jsx(se,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:x(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ot=s.forwardRef((e,t)=>{const n=R(_,e.__scopeMenu);return o.jsx(se,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),rt=In("MenuContent.ScrollLock"),se=s.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:l,onEntryFocus:m,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:f,onDismiss:w,disableOutsideScroll:g,...S}=e,E=R(_,n),y=G(_,n),on=W(n),rn=ye(n),de=Wn(n),[an,le]=s.useState(null),K=s.useRef(null),sn=L(t,K,E.onContentChange),U=s.useRef(0),$=s.useRef(""),cn=s.useRef(0),J=s.useRef(null),pe=s.useRef("right"),Q=s.useRef(0),un=g?Cn:s.Fragment,dn=g?{as:rt,allowPinchZoom:!0}:void 0,ln=u=>{const P=$.current+u,C=de().filter(M=>!M.disabled),N=document.activeElement,ee=C.find(M=>M.ref.current===N)?.textValue,ne=C.map(M=>M.textValue),fe=xt(ne,P,ee),k=C.find(M=>M.textValue===fe)?.ref.current;(function M(me){$.current=me,window.clearTimeout(U.current),me!==""&&(U.current=window.setTimeout(()=>M(""),1e3))})(P),k&&setTimeout(()=>k.focus())};s.useEffect(()=>()=>window.clearTimeout(U.current),[]),_n();const j=s.useCallback(u=>pe.current===J.current?.side&&vt(u,J.current?.area),[]);return o.jsx(nt,{scope:n,searchRef:$,onItemEnter:s.useCallback(u=>{j(u)&&u.preventDefault()},[j]),onItemLeave:s.useCallback(u=>{j(u)||(K.current?.focus(),le(null))},[j]),onTriggerLeave:s.useCallback(u=>{j(u)&&u.preventDefault()},[j]),pointerGraceTimerRef:cn,onPointerGraceIntentChange:s.useCallback(u=>{J.current=u},[]),children:o.jsx(un,{...dn,children:o.jsx(bn,{asChild:!0,trapped:a,onMountAutoFocus:x(c,u=>{u.preventDefault(),K.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:o.jsx(Rn,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:f,onDismiss:w,children:o.jsx(Nn,{asChild:!0,...rn,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:an,onCurrentTabStopIdChange:le,onEntryFocus:x(m,u=>{y.isUsingKeyboardRef.current||u.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Sn,{role:"menu","aria-orientation":"vertical","data-state":He(E.open),"data-radix-menu-content":"",dir:y.dir,...on,...S,ref:sn,style:{outline:"none",...S.style},onKeyDown:x(S.onKeyDown,u=>{const C=u.target.closest("[data-radix-menu-content]")===u.currentTarget,N=u.ctrlKey||u.altKey||u.metaKey,ee=u.key.length===1;C&&(u.key==="Tab"&&u.preventDefault(),!N&&ee&&ln(u.key));const ne=K.current;if(u.target!==ne||!Hn.includes(u.key))return;u.preventDefault();const k=de().filter(M=>!M.disabled).map(M=>M.ref.current);Re.includes(u.key)&&k.reverse(),mt(k)}),onBlur:x(e.onBlur,u=>{u.currentTarget.contains(u.target)||(window.clearTimeout(U.current),$.current="")}),onPointerMove:x(e.onPointerMove,O(u=>{const P=u.target,C=Q.current!==u.clientX;if(u.currentTarget.contains(P)&&C){const N=u.clientX>Q.current?"right":"left";pe.current=N,Q.current=u.clientX}}))})})})})})})});Ie.displayName=_;var at="MenuGroup",ce=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(I.div,{role:"group",...r,ref:t})});ce.displayName=at;var st="MenuLabel",Ee=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(I.div,{...r,ref:t})});Ee.displayName=st;var z="MenuItem",xe="menu.itemSelect",q=s.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,c=s.useRef(null),d=G(z,e.__scopeMenu),l=ae(z,e.__scopeMenu),m=L(t,c),h=s.useRef(!1),p=()=>{const i=c.current;if(!n&&i){const f=new CustomEvent(xe,{bubbles:!0,cancelable:!0});i.addEventListener(xe,w=>r?.(w),{once:!0}),Dn(i,f),f.defaultPrevented?h.current=!1:d.onClose()}};return o.jsx(Ne,{...a,ref:m,disabled:n,onClick:x(e.onClick,p),onPointerDown:i=>{e.onPointerDown?.(i),h.current=!0},onPointerUp:x(e.onPointerUp,i=>{h.current||i.currentTarget?.click()}),onKeyDown:x(e.onKeyDown,i=>{const f=l.searchRef.current!=="";n||f&&i.key===" "||te.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});q.displayName=z;var Ne=s.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...c}=e,d=ae(z,n),l=ye(n),m=s.useRef(null),h=L(t,m),[p,i]=s.useState(!1),[f,w]=s.useState("");return s.useEffect(()=>{const g=m.current;g&&w((g.textContent??"").trim())},[c.children]),o.jsx(T.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:o.jsx(En,{asChild:!0,...l,focusable:!r,children:o.jsx(I.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:h,onPointerMove:x(e.onPointerMove,O(g=>{r?d.onItemLeave(g):(d.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:x(e.onPointerLeave,O(g=>d.onItemLeave(g))),onFocus:x(e.onFocus,()=>i(!0)),onBlur:x(e.onBlur,()=>i(!1))})})})}),ct="MenuCheckboxItem",ke=s.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return o.jsx(Fe,{scope:e.__scopeMenu,checked:n,children:o.jsx(q,{role:"menuitemcheckbox","aria-checked":V(n)?"mixed":n,...a,ref:t,"data-state":ue(n),onSelect:x(a.onSelect,()=>r?.(V(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ke.displayName=ct;var Ae="MenuRadioGroup",[it,ut]=b(Ae,{value:void 0,onValueChange:()=>{}}),Te=s.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,c=_e(r);return o.jsx(it,{scope:e.__scopeMenu,value:n,onValueChange:c,children:o.jsx(ce,{...a,ref:t})})});Te.displayName=Ae;var Oe="MenuRadioItem",Le=s.forwardRef((e,t)=>{const{value:n,...r}=e,a=ut(Oe,e.__scopeMenu),c=n===a.value;return o.jsx(Fe,{scope:e.__scopeMenu,checked:c,children:o.jsx(q,{role:"menuitemradio","aria-checked":c,...r,ref:t,"data-state":ue(c),onSelect:x(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Le.displayName=Oe;var ie="MenuItemIndicator",[Fe,dt]=b(ie,{checked:!1}),Ge=s.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,c=dt(ie,n);return o.jsx(Y,{present:r||V(c.checked)||c.checked===!0,children:o.jsx(I.span,{...a,ref:t,"data-state":ue(c.checked)})})});Ge.displayName=ie;var lt="MenuSeparator",Ke=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(I.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Ke.displayName=lt;var pt="MenuArrow",Ue=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=W(n);return o.jsx(yn,{...a,...r,ref:t})});Ue.displayName=pt;var ft="MenuSub",[yo,$e]=b(ft),A="MenuSubTrigger",Be=s.forwardRef((e,t)=>{const n=R(A,e.__scopeMenu),r=G(A,e.__scopeMenu),a=$e(A,e.__scopeMenu),c=ae(A,e.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:m}=c,h={__scopeMenu:e.__scopeMenu},p=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>p,[p]),s.useEffect(()=>{const i=l.current;return()=>{window.clearTimeout(i),m(null)}},[l,m]),o.jsx(oe,{asChild:!0,...h,children:o.jsx(Ne,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":He(n.open),...e,ref:Ce(t,a.onTriggerChange),onClick:i=>{e.onClick?.(i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:x(e.onPointerMove,O(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:x(e.onPointerLeave,O(i=>{p();const f=n.content?.getBoundingClientRect();if(f){const w=n.content?.dataset.side,g=w==="right",S=g?-5:5,E=f[g?"left":"right"],y=f[g?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+S,y:i.clientY},{x:E,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:E,y:f.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:x(e.onKeyDown,i=>{const f=c.searchRef.current!=="";e.disabled||f&&i.key===" "||Xn[r.dir].includes(i.key)&&(n.onOpenChange(!0),n.content?.focus(),i.preventDefault())})})})});Be.displayName=A;var ze="MenuSubContent",Ve=s.forwardRef((e,t)=>{const n=Pe(_,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,c=R(_,e.__scopeMenu),d=G(_,e.__scopeMenu),l=$e(ze,e.__scopeMenu),m=s.useRef(null),h=L(t,m);return o.jsx(T.Provider,{scope:e.__scopeMenu,children:o.jsx(Y,{present:r||c.open,children:o.jsx(T.Slot,{scope:e.__scopeMenu,children:o.jsx(se,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:h,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{d.isUsingKeyboardRef.current&&m.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:x(e.onFocusOutside,p=>{p.target!==l.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:x(e.onEscapeKeyDown,p=>{d.onClose(),p.preventDefault()}),onKeyDown:x(e.onKeyDown,p=>{const i=p.currentTarget.contains(p.target),f=Yn[d.dir].includes(p.key);i&&f&&(c.onOpenChange(!1),l.trigger?.focus(),p.preventDefault())})})})})})});Ve.displayName=ze;function He(e){return e?"open":"closed"}function V(e){return e==="indeterminate"}function ue(e){return V(e)?"indeterminate":e?"checked":"unchecked"}function mt(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function ht(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function xt(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,c=n?e.indexOf(n):-1;let d=ht(e,Math.max(c,0));a.length===1&&(d=d.filter(h=>h!==n));const m=d.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return m!==n?m:void 0}function gt(e,t){const{x:n,y:r}=e;let a=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const l=t[c],m=t[d],h=l.x,p=l.y,i=m.x,f=m.y;p>r!=f>r&&n<(i-h)*(r-p)/(f-p)+h&&(a=!a)}return a}function vt(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return gt(n,t)}function O(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Mt=je,wt=oe,_t=De,Ct=Ie,bt=ce,Rt=Ee,St=q,yt=ke,jt=Te,Pt=Le,Dt=Ge,It=Ke,Et=Ue,Nt=Be,kt=Ve,Z="DropdownMenu",[At,jo]=Me(Z,[Se]),v=Se(),[Tt,Xe]=At(Z),Ye=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:c,onOpenChange:d,modal:l=!0}=e,m=v(t),h=s.useRef(null),[p,i]=jn({prop:a,defaultProp:c??!1,onChange:d,caller:Z});return o.jsx(Tt,{scope:t,triggerId:he(),triggerRef:h,contentId:he(),open:p,onOpenChange:i,onOpenToggle:s.useCallback(()=>i(f=>!f),[i]),modal:l,children:o.jsx(Mt,{...m,open:p,onOpenChange:i,dir:r,modal:l,children:n})})};Ye.displayName=Z;var We="DropdownMenuTrigger",qe=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,c=Xe(We,n),d=v(n);return o.jsx(wt,{asChild:!0,...d,children:o.jsx(I.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Ce(t,c.triggerRef),onPointerDown:x(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(c.onOpenToggle(),c.open||l.preventDefault())}),onKeyDown:x(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&c.onOpenToggle(),l.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});qe.displayName=We;var Ot="DropdownMenuPortal",Ze=e=>{const{__scopeDropdownMenu:t,...n}=e,r=v(t);return o.jsx(_t,{...r,...n})};Ze.displayName=Ot;var Je="DropdownMenuContent",Qe=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Xe(Je,n),c=v(n),d=s.useRef(!1);return o.jsx(Ct,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...r,ref:t,onCloseAutoFocus:x(e.onCloseAutoFocus,l=>{d.current||a.triggerRef.current?.focus(),d.current=!1,l.preventDefault()}),onInteractOutside:x(e.onInteractOutside,l=>{const m=l.detail.originalEvent,h=m.button===0&&m.ctrlKey===!0,p=m.button===2||h;(!a.modal||p)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qe.displayName=Je;var Lt="DropdownMenuGroup",Ft=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(bt,{...a,...r,ref:t})});Ft.displayName=Lt;var Gt="DropdownMenuLabel",en=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Rt,{...a,...r,ref:t})});en.displayName=Gt;var Kt="DropdownMenuItem",nn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(St,{...a,...r,ref:t})});nn.displayName=Kt;var Ut="DropdownMenuCheckboxItem",$t=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(yt,{...a,...r,ref:t})});$t.displayName=Ut;var Bt="DropdownMenuRadioGroup",zt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(jt,{...a,...r,ref:t})});zt.displayName=Bt;var Vt="DropdownMenuRadioItem",Ht=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Pt,{...a,...r,ref:t})});Ht.displayName=Vt;var Xt="DropdownMenuItemIndicator",Yt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Dt,{...a,...r,ref:t})});Yt.displayName=Xt;var Wt="DropdownMenuSeparator",tn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(It,{...a,...r,ref:t})});tn.displayName=Wt;var qt="DropdownMenuArrow",Zt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Et,{...a,...r,ref:t})});Zt.displayName=qt;var Jt="DropdownMenuSubTrigger",Qt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Nt,{...a,...r,ref:t})});Qt.displayName=Jt;var eo="DropdownMenuSubContent",no=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(kt,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});no.displayName=eo;var to=Ye,oo=qe,ro=Ze,ao=Qe,so=en,co=nn,io=tn;function uo({...e}){return o.jsx(to,{"data-slot":"dropdown-menu",...e})}function lo({...e}){return o.jsx(oo,{"data-slot":"dropdown-menu-trigger",...e})}function po({className:e,sideOffset:t=4,...n}){return o.jsx(ro,{children:o.jsx(ao,{"data-slot":"dropdown-menu-content",sideOffset:t,className:X("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ge({className:e,inset:t,variant:n="default",...r}){return o.jsx(co,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:X("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function fo({className:e,inset:t,...n}){return o.jsx(so,{"data-slot":"dropdown-menu-label","data-inset":t,className:X("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function mo({className:e,...t}){return o.jsx(io,{"data-slot":"dropdown-menu-separator",className:X("bg-border -mx-1 my-1 h-px",e),...t})}function ho({email:e}){const[t,n]=s.useState(!1),r=async()=>{n(!0);try{if(!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw new Error("Logout failed");An(),window.location.href="/login"}catch(a){console.error("Logout error:",a),n(!1),alert("Failed to logout. Please try again.")}};return o.jsxs(uo,{children:[o.jsx(lo,{asChild:!0,children:o.jsxs(D,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",disabled:t,children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm max-w-[150px] truncate hidden sm:inline",children:e})]})}),o.jsxs(po,{align:"end",className:"w-56",children:[o.jsx(fo,{children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsx("p",{className:"text-sm font-medium leading-none",children:"Account"}),o.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:e})]})}),o.jsx(mo,{}),o.jsx(ge,{asChild:!0,className:"cursor-pointer",children:o.jsxs("a",{href:"/profile",className:"flex items-center",children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:"Profile"})]})}),o.jsxs(ge,{onClick:r,disabled:t,className:"cursor-pointer text-destructive focus:text-destructive",children:[o.jsx(Un,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:t?"Signing out...":"Sign out"})]})]})]})}function xo(){const[e,t]=s.useState(null),[n,r]=s.useState(!0);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:c}})=>{t(c?.user??null),r(!1),c?.user&&Tn().catch(()=>{})});const{data:{subscription:a}}=B.auth.onAuthStateChange((c,d)=>{t(d?.user??null),r(!1)});return()=>a.unsubscribe()},[]),{user:e,loading:n}}function go(){const{user:e,loading:t}=xo(),{t:n}=ve();return o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container flex h-14 items-center px-4",children:[o.jsx("div",{className:"mr-6 flex",children:o.jsxs("a",{href:"/",className:"flex items-center space-x-2",children:[o.jsx("img",{src:"/favicon.svg",alt:"SavorAI Logo",className:"h-6 w-6"}),o.jsx("span",{className:"text-xl font-bold",children:"SavorAI"})]})}),e&&!t&&o.jsxs("nav",{className:"hidden md:flex items-center space-x-1 mr-4",children:[o.jsx(D,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:"/app",className:"flex items-center gap-2",children:[o.jsx(Ln,{className:"h-4 w-4"}),n("header.recipes")]})}),o.jsx(D,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:"/app#generator",className:"flex items-center gap-2",children:[o.jsx(kn,{className:"h-4 w-4"}),n("header.generator")]})})]}),o.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-3",children:[o.jsx(pn,{}),o.jsx(zn,{}),!t&&o.jsx(o.Fragment,{children:e?o.jsx(ho,{email:e.email??"User"}):o.jsx(D,{variant:"ghost",size:"sm",asChild:!0,children:o.jsx("a",{href:"/login",children:n("header.signIn")})})})]})]})})}function Po(){const[e,t]=s.useState(null);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:r}})=>{t(r?.access_token??null)});const{data:{subscription:n}}=B.auth.onAuthStateChange((r,a)=>{t(a?.access_token??null)});return()=>n.unsubscribe()},[]),o.jsx(fn,{children:o.jsx(Pn,{authToken:e,children:o.jsx(go,{})})})}export{Po as AppShell};
