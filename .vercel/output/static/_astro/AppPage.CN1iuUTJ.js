import{c as C,j as e}from"./createLucideIcon.Dkxjm4wi.js";import{Q as Ft,i as xe,h as zt,a as Gt,u as Ht,R as Vt,X as we,C as Ce,b as ke,S as qt,c as Bt,d as Kt,e as Ut,f as Wt,B as W,L as Te,g as E,j as Qt,k as ne,l as De,m as V,n as ve,o as Zt,t as K,p as Yt,T as Jt}from"./sonner.DGCvb1Jk.js";import{r as i}from"./index.BkdHoFEG.js";import{u as I,P as R,c as Se,a as j,B as T,b as Xt,d as Pe}from"./supabase.client.D2OLuBHL.js";import{c as Z,a as Re,u as z,b as ae,R as er,A as tr,d as k,P as _e,e as rr,D as Ae,C as sr,f as nr,g as ar,h as or,i as ir,j as lr,F as cr}from"./Combination.B5VQhdor.js";import{P as $,S as Ee,c as Me,R as dr,I as ur}from"./index.WDg7aBGv.js";import{I as pr,C as Ie,A as oe,f as Le,g as Oe,e as ie,L as fr}from"./label.Di0WFfjI.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M16.4 13.7A6.5 6.5 0 1 0 6.28 6.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3",key:"cisjcv"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1-2.29 7.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"5byaag"}],["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}]],hr=C("beef",gr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],be=C("chef-hat",mr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vr=C("chevron-left",xr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yr=C("chevron-right",br);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Nr=C("clock",jr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],Cr=C("droplet",wr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Tr=C("external-link",kr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$e=C("file-text",Dr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Pr=C("flame",Sr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fe=C("refresh-cw",Rr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ar=C("rotate-ccw",_r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mr=C("save",Er);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Lr=C("search",Ir);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$r=C("trash-2",Or);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],zr=C("users",Fr);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],Hr=C("wheat",Gr);var Vr=class extends Ft{constructor(t,r){super(t,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:xe()})}getOptimisticResult(t){return t.behavior=xe(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,r){const{state:n}=t,s=super.createResult(t,r),{isFetching:a,isRefetching:o,isError:l,isRefetchError:c}=s,d=n.fetchMeta?.fetchMore?.direction,f=l&&d==="forward",p=a&&d==="forward",u=l&&d==="backward",g=a&&d==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Gt(r,n.data),hasPreviousPage:zt(r,n.data),isFetchNextPageError:f,isFetchingNextPage:p,isFetchPreviousPageError:u,isFetchingPreviousPage:g,isRefetchError:c&&!f&&!u,isRefetching:o&&!p&&!g}}};function qr(t,r){return Ht(t,Vr)}var[Y,sa]=Z("Tooltip",[Re]),J=Re(),ze="TooltipProvider",Br=700,re="tooltip.open",[Kr,le]=Y(ze),Ge=t=>{const{__scopeTooltip:r,delayDuration:n=Br,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=t,l=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),e.jsx(Kr,{scope:r,isOpenDelayedRef:l,delayDuration:n,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(f=>{c.current=f},[]),disableHoverableContent:a,children:o})};Ge.displayName=ze;var G="Tooltip",[Ur,q]=Y(G),He=t=>{const{__scopeTooltip:r,children:n,open:s,defaultOpen:a,onOpenChange:o,disableHoverableContent:l,delayDuration:c}=t,d=le(G,t.__scopeTooltip),f=J(r),[p,u]=i.useState(null),g=z(),h=i.useRef(0),b=l??d.disableHoverableContent,N=c??d.delayDuration,v=i.useRef(!1),[w,x]=ae({prop:s,defaultProp:a??!1,onChange:B=>{B?(d.onOpen(),document.dispatchEvent(new CustomEvent(re))):d.onClose(),o?.(B)},caller:G}),m=i.useMemo(()=>w?v.current?"delayed-open":"instant-open":"closed",[w]),y=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,x(!0)},[x]),D=i.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x(!1)},[x]),F=i.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,x(!0),h.current=0},N)},[N,x]);return i.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),e.jsx(er,{...f,children:e.jsx(Ur,{scope:r,contentId:g,open:w,stateAttribute:m,trigger:p,onTriggerChange:u,onTriggerEnter:i.useCallback(()=>{d.isOpenDelayedRef.current?F():y()},[d.isOpenDelayedRef,F,y]),onTriggerLeave:i.useCallback(()=>{b?D():(window.clearTimeout(h.current),h.current=0)},[D,b]),onOpen:y,onClose:D,disableHoverableContent:b,children:n})})};He.displayName=G;var se="TooltipTrigger",Ve=i.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=q(se,n),o=le(se,n),l=J(n),c=i.useRef(null),d=I(r,c,a.onTriggerChange),f=i.useRef(!1),p=i.useRef(!1),u=i.useCallback(()=>f.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),e.jsx(tr,{asChild:!0,...l,children:e.jsx(R.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:d,onPointerMove:k(t.onPointerMove,g=>{g.pointerType!=="touch"&&!p.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:k(t.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:k(t.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:k(t.onFocus,()=>{f.current||a.onOpen()}),onBlur:k(t.onBlur,a.onClose),onClick:k(t.onClick,a.onClose)})})});Ve.displayName=se;var ce="TooltipPortal",[Wr,Qr]=Y(ce,{forceMount:void 0}),qe=t=>{const{__scopeTooltip:r,forceMount:n,children:s,container:a}=t,o=q(ce,r);return e.jsx(Wr,{scope:r,forceMount:n,children:e.jsx($,{present:n||o.open,children:e.jsx(_e,{asChild:!0,container:a,children:s})})})};qe.displayName=ce;var O="TooltipContent",Be=i.forwardRef((t,r)=>{const n=Qr(O,t.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=t,l=q(O,t.__scopeTooltip);return e.jsx($,{present:s||l.open,children:l.disableHoverableContent?e.jsx(Ke,{side:a,...o,ref:r}):e.jsx(Zr,{side:a,...o,ref:r})})}),Zr=i.forwardRef((t,r)=>{const n=q(O,t.__scopeTooltip),s=le(O,t.__scopeTooltip),a=i.useRef(null),o=I(r,a),[l,c]=i.useState(null),{trigger:d,onClose:f}=n,p=a.current,{onPointerInTransitChange:u}=s,g=i.useCallback(()=>{c(null),u(!1)},[u]),h=i.useCallback((b,N)=>{const v=b.currentTarget,w={x:b.clientX,y:b.clientY},x=es(w,v.getBoundingClientRect()),m=ts(w,x),y=rs(N.getBoundingClientRect()),D=ns([...m,...y]);c(D),u(!0)},[u]);return i.useEffect(()=>()=>g(),[g]),i.useEffect(()=>{if(d&&p){const b=v=>h(v,p),N=v=>h(v,d);return d.addEventListener("pointerleave",b),p.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",b),p.removeEventListener("pointerleave",N)}}},[d,p,h,g]),i.useEffect(()=>{if(l){const b=N=>{const v=N.target,w={x:N.clientX,y:N.clientY},x=d?.contains(v)||p?.contains(v),m=!ss(w,l);x?g():m&&(g(),f())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[d,p,l,f,g]),e.jsx(Ke,{...t,ref:o})}),[Yr,Jr]=Y(G,{isInside:!1}),Xr=Se("TooltipContent"),Ke=i.forwardRef((t,r)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:l,...c}=t,d=q(O,n),f=J(n),{onClose:p}=d;return i.useEffect(()=>(document.addEventListener(re,p),()=>document.removeEventListener(re,p)),[p]),i.useEffect(()=>{if(d.trigger){const u=g=>{g.target?.contains(d.trigger)&&p()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,p]),e.jsx(Ae,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u=>u.preventDefault(),onDismiss:p,children:e.jsxs(sr,{"data-state":d.stateAttribute,...f,...c,ref:r,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Xr,{children:s}),e.jsx(Yr,{scope:n,isInside:!0,children:e.jsx(Vt,{id:d.contentId,role:"tooltip",children:a||s})})]})})});Be.displayName=O;var Ue="TooltipArrow",We=i.forwardRef((t,r)=>{const{__scopeTooltip:n,...s}=t,a=J(n);return Jr(Ue,n).isInside?null:e.jsx(rr,{...a,...s,ref:r})});We.displayName=Ue;function es(t,r){const n=Math.abs(r.top-t.y),s=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),o=Math.abs(r.left-t.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function ts(t,r,n=5){const s=[];switch(r){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function rs(t){const{top:r,right:n,bottom:s,left:a}=t;return[{x:a,y:r},{x:n,y:r},{x:n,y:s},{x:a,y:s}]}function ss(t,r){const{x:n,y:s}=t;let a=!1;for(let o=0,l=r.length-1;o<r.length;l=o++){const c=r[o],d=r[l],f=c.x,p=c.y,u=d.x,g=d.y;p>s!=g>s&&n<(u-f)*(s-p)/(g-p)+f&&(a=!a)}return a}function ns(t){const r=t.slice();return r.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),as(r)}function as(t){if(t.length<=1)return t.slice();const r=[];for(let s=0;s<t.length;s++){const a=t[s];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const n=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;n.length>=2;){const o=n[n.length-1],l=n[n.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),r.length===1&&n.length===1&&r[0].x===n[0].x&&r[0].y===n[0].y?r:r.concat(n)}var os=Ge,is=He,ls=Ve,cs=qe,ds=Be,us=We;function X({delayDuration:t=0,...r}){return e.jsx(os,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function de({...t}){return e.jsx(X,{children:e.jsx(is,{"data-slot":"tooltip",...t})})}function ue({...t}){return e.jsx(ls,{"data-slot":"tooltip-trigger",...t})}function H({className:t,sideOffset:r=0,children:n,...s}){return e.jsx(cs,{children:e.jsxs(ds,{"data-slot":"tooltip-content",sideOffset:r,className:j("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,e.jsx(us,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function ps({value:t,onChange:r,onSubmit:n,disabled:s=!1,maxLength:a=200}){const[o,l]=i.useState(t);i.useEffect(()=>{l(t)},[t]);const c=g=>{const h=g.target.value;h.length<=a&&l(h)},d=i.useCallback(()=>{const g=o.trim();g!==t&&(r(g),n())},[o,t,r,n]),f=g=>{g.key==="Enter"&&(g.preventDefault(),d())},p=()=>{l(""),r(""),n()},u=o.length>0;return e.jsxs("div",{className:"flex gap-2",role:"search",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pr,{type:"search",placeholder:"Search recipes...",value:o,onChange:c,onKeyDown:f,disabled:s,maxLength:a,className:"pr-8","aria-label":"Search recipes"}),u&&!s&&e.jsx(T,{type:"button",variant:"ghost",size:"sm",onClick:p,className:"absolute right-0 top-0 h-full px-2 hover:bg-transparent","aria-label":"Clear search",children:e.jsx(we,{className:"h-4 w-4"})})]}),e.jsxs(T,{type:"button",onClick:d,disabled:s||o.trim().length===0,"aria-label":"Search",children:[e.jsx(Lr,{className:"h-4 w-4 mr-2"}),"Search"]})]})}const U=12;function fs({selected:t,allTags:r,onChange:n}){const[s,a]=i.useState(!1),o=u=>{const g=u.toLowerCase(),h=t.includes(g);n(h?t.filter(b=>b!==g):[...t,g])},l=()=>{n([])};if(r.length===0)return null;const c=t.length>0,d=r.length>U,f=s?r:(()=>{const u=r.slice(0,U),g=r.slice(U).filter(b=>t.includes(b.toLowerCase())),h=[...u,...g];return Array.from(new Set(h))})(),p=r.length-U;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Tag filters:"}),c&&e.jsx(T,{variant:"ghost",size:"sm",onClick:l,className:"h-auto py-1 px-2 text-xs","aria-label":"Clear all filters",children:"Clear filters"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"group","aria-label":"Tag filters",children:f.map(u=>{const g=u.toLowerCase(),h=t.includes(g);return e.jsxs(T,{variant:h?"default":"outline",size:"sm",onClick:()=>o(u),role:"checkbox","aria-checked":h,className:"h-auto py-1 px-3",children:[u,h&&e.jsx(we,{className:"ml-1 h-3 w-3"})]},g)})}),d&&e.jsx("div",{className:"flex justify-center pt-1",children:e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"h-auto py-1 px-3 text-xs text-muted-foreground hover:text-foreground",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"mr-1 h-3 w-3"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-1 h-3 w-3"}),"Show more (",p," more)"]})})}),c&&e.jsxs("div",{className:"text-xs text-muted-foreground","aria-live":"polite",children:[t.length," ",t.length===1?"tag":"tags"," selected"]})]})}const gs=[{value:"recent",label:"Recently added"},{value:"oldest",label:"Oldest first"}];function hs({value:t,onChange:r}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"sort-select",className:"text-sm font-medium",children:"Sort by:"}),e.jsxs(qt,{value:t,onValueChange:r,children:[e.jsx(Bt,{id:"sort-select",className:"w-[180px]",children:e.jsx(Kt,{placeholder:"Select sorting"})}),e.jsx(Ut,{children:gs.map(n=>e.jsx(Wt,{value:n.value,children:n.label},n.value))})]})]})}function ms({item:t,selected:r=!1,onClick:n}){return e.jsx(Ie,{className:`p-4 cursor-pointer transition-colors hover:bg-accent ${r?"border-primary bg-accent":""}`,onClick:n,role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n())},"aria-pressed":r,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2",children:t.title}),t.summary&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.summary}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(s=>e.jsx(W,{variant:"secondary",className:"text-xs",children:s},s))})]})})}function xs({hasMore:t,isLoading:r,onClick:n}){return!t&&!r?null:e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(T,{variant:"outline",onClick:n,disabled:r||!t,className:"min-w-[200px]",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Load more"})})}function vs({pages:t,isLoading:r,isError:n,selectedId:s,onSelect:a,onLoadMore:o,hasNextPage:l,isFetchingNextPage:c}){const d=t.flatMap(f=>f.data);return n||r||d.length===0?null:e.jsxs("div",{className:"space-y-3",children:[e.jsx("ul",{className:"space-y-3",children:d.map(f=>e.jsx("li",{children:e.jsx(ms,{item:f,selected:s===f.id,onClick:()=>a(f.id)})},f.id))}),e.jsx(xs,{hasMore:l,isLoading:c,onClick:o}),e.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:["Found ",d.length," ",d.length===1?"recipe":"recipes"]})]})}function bs({message:t,onCta:r}){const s=t||"No recipes found";return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx($e,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-sm",children:r?"Start your culinary journey! Generate your first recipe using AI.":"Try changing filters or search for something else."}),r&&e.jsxs(T,{onClick:r,size:"lg",className:"gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Generate first recipe"]})]})}function ys(t){if(t instanceof Error)return{title:"An error occurred",description:t.message||"Please try again later."};const r=t.message?.toLowerCase()||"";return r.includes("bad request")||r.includes("validation")?{title:"Invalid request",description:"Check your filters and try again."}:r.includes("unauthorized")||r.includes("401")?{title:"Unauthorized",description:"Please log in again."}:r.includes("not found")||r.includes("404")?{title:"Not found",description:"Recipe doesn't exist or has been deleted."}:r.includes("too large")||r.includes("413")?{title:"Too large",description:"Result exceeds the 200KB limit. Please try again."}:r.includes("too many")||r.includes("429")?{title:"Rate limit exceeded",description:"Please wait a moment before trying again."}:r.includes("internal")||r.includes("500")?{title:"Server error",description:"We're sorry, something went wrong. Please try again later."}:r.includes("unavailable")||r.includes("503")?{title:"Service unavailable",description:"Service is temporarily unavailable. Please try again in a moment."}:{title:"An error occurred",description:t.message||"Please try again later."}}function js({error:t,onRetry:r}){const{title:n,description:s}=ys(t);return e.jsx("div",{className:"py-8",children:e.jsxs(oe,{variant:"destructive",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Oe,{children:n}),e.jsxs(ie,{className:"mt-2",children:[e.jsx("p",{children:s}),r&&e.jsxs(T,{variant:"outline",size:"sm",onClick:r,className:"mt-4 gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Try again"]})]})]})})}function Ns({count:t=3}){return e.jsxs("div",{className:"space-y-3",children:[Array.from({length:t}).map((r,n)=>e.jsx(Ie,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{className:"h-6 w-3/4"}),e.jsx(E,{className:"h-4 w-full"}),e.jsx(E,{className:"h-4 w-5/6"}),e.jsxs("div",{className:"flex gap-1 pt-1",children:[e.jsx(E,{className:"h-5 w-16"}),e.jsx(E,{className:"h-5 w-20"}),e.jsx(E,{className:"h-5 w-12"})]}),e.jsx(E,{className:"h-3 w-32 mt-2"})]})},n)),e.jsx("div",{className:"sr-only","aria-live":"polite",children:"Loading recipes..."})]})}async function ws(t){const r=new URLSearchParams;t.search&&r.set("search",t.search),t.tags&&r.set("tags",t.tags),t.sort&&r.set("sort",t.sort),t.limit&&r.set("limit",t.limit.toString()),t.cursor&&r.set("cursor",t.cursor),t.offset!==void 0&&r.set("offset",t.offset.toString());const n=`/api/recipes${r.toString()?`?${r.toString()}`:""}`;return V(n)}async function Cs(t){return V(`/api/recipes/${t}`)}async function ks(t){return V("/api/recipes/generate",{method:"POST",body:JSON.stringify(t)})}async function Ts(t){return V("/api/recipes",{method:"POST",body:JSON.stringify(t)})}async function Ds(t){await V(`/api/recipes/${t}`,{method:"DELETE"})}function Ss(t){return qr({queryKey:["recipes",t],queryFn:({pageParam:r=0})=>ws({...t,offset:r}),getNextPageParam:(r,n)=>r.pagination.has_more?n.reduce((a,o)=>a+o.data.length,0):void 0,initialPageParam:0,retry:!1})}function Ps(t){return Qt({queryKey:["recipe",t],queryFn:()=>Cs(t),retry:!1,enabled:!!t})}function Rs(){return ne({mutationFn:ks})}function _s(){const t=De();return ne({mutationFn:Ts,onSuccess:()=>{t.invalidateQueries({queryKey:["recipes"]})}})}function As(){const t=De();return ne({mutationFn:Ds,onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["recipes"]}),t.invalidateQueries({queryKey:["recipe",n]})}})}const Qe={search:"",tags:[],sort:"recent",limit:20,offset:0};function ye(t){const r={...Qe},n=t.get("search");n&&(r.search=n);const s=t.get("tags");s&&(r.tags=s.split(",").filter(c=>c.trim().length>0));const a=t.get("sort");(a==="recent"||a==="oldest")&&(r.sort=a);const o=t.get("limit");if(o){const c=parseInt(o,10);!isNaN(c)&&c>=1&&c<=100&&(r.limit=c)}const l=t.get("offset");if(l){const c=parseInt(l,10);!isNaN(c)&&c>=0&&(r.offset=c)}return r}function Es(t){const r=new URLSearchParams;return t.search&&t.search.trim()&&r.set("search",t.search.trim()),t.tags.length>0&&r.set("tags",t.tags.join(",")),t.sort&&t.sort!=="recent"&&r.set("sort",t.sort),t.limit&&t.limit!==20&&r.set("limit",t.limit.toString()),t.offset&&t.offset>0&&r.set("offset",t.offset.toString()),r}function Ms(){const[t,r]=i.useState(()=>{if(typeof window>"u")return Qe;const a=new URLSearchParams(window.location.search);return ye(a)}),n=i.useCallback(a=>{const o=Es(a),l=`${window.location.pathname}${o.toString()?`?${o.toString()}`:""}`;window.history.pushState({},"",l)},[]),s=i.useCallback(a=>{r(o=>{const l=typeof a=="function"?a(o):a;return n(l),l})},[n]);return i.useEffect(()=>{const a=()=>{const o=new URLSearchParams(window.location.search),l=ye(o);r(l)};return window.addEventListener("popstate",a),()=>window.removeEventListener("popstate",a)},[]),{filters:t,setFilters:s}}function Is(t){const r=i.useRef(null),n=`scroll-${t}`;return i.useEffect(()=>{const s=r.current;if(!s)return;const a=sessionStorage.getItem(n);if(a){const o=parseInt(a,10);isNaN(o)||setTimeout(()=>{s.scrollTop=o},0)}},[n]),i.useEffect(()=>{const s=r.current;if(!s)return;let a;const o=()=>{clearTimeout(a),a=setTimeout(()=>{sessionStorage.setItem(n,s.scrollTop.toString())},100)};return s.addEventListener("scroll",o,{passive:!0}),()=>{clearTimeout(a),s.removeEventListener("scroll",o)}},[n]),r}function Ls({selectedId:t,onSelect:r,onGenerateClick:n,onToggleCollapse:s}){const{filters:a,setFilters:o}=Ms(),l=Is(typeof window<"u"?window.location.search:""),{data:c,isLoading:d,isError:f,error:p,fetchNextPage:u,hasNextPage:g,isFetchingNextPage:h,refetch:b}=Ss({search:a.search||void 0,tags:a.tags.length>0?a.tags.join(","):void 0,sort:a.sort,limit:a.limit}),N=i.useMemo(()=>{if(!c?.pages)return[];const P=new Set;return c.pages.forEach(_=>{_.data.forEach(Ot=>{Ot.tags?.forEach($t=>P.add($t))})}),Array.from(P).sort()},[c]),v=i.useCallback(P=>{o(_=>({..._,search:P,offset:0}))},[]),w=i.useCallback(()=>{b()},[b]),x=i.useCallback(P=>{o(_=>({..._,tags:P,offset:0}))},[]),m=i.useCallback(P=>{o(_=>({..._,sort:P,offset:0}))},[]),y=i.useCallback(()=>{g&&!h&&u()},[g,h,u]),D=i.useCallback(()=>{b()},[b]),F=c?.pages||[],B=F.reduce((P,_)=>P+_.data.length,0),me=a.search||a.tags.length>0;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Your Recipes"}),s&&e.jsx(X,{children:e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(T,{onClick:s,variant:"ghost",size:"icon",className:"h-8 w-8 -mr-2","aria-label":"Hide recipe list",children:[e.jsx(vr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(Ce,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(H,{side:"left",className:"hidden lg:block",children:[e.jsx("p",{children:"Hide recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(H,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Hide recipe list"})})]})})]}),e.jsxs("div",{className:"space-y-3 p-4 lg:pb-4 max-lg:pb-3 border-b",children:[e.jsx(ps,{value:a.search||"",onChange:v,onSubmit:w}),e.jsx(fs,{selected:a.tags,allTags:N,onChange:x}),e.jsx(hs,{value:a.sort,onChange:m})]}),e.jsx("div",{ref:l,className:"flex-1 overflow-y-auto p-4 max-lg:p-3 min-h-0",children:d?e.jsx(Ns,{count:3}):f?e.jsx(js,{error:p,onRetry:D}):B===0?e.jsx(bs,{message:me?"No recipes matching your filters":"No recipes yet",onCta:me?void 0:n}):e.jsx(vs,{pages:F,isLoading:d,isError:f,selectedId:t,onSelect:r,onLoadMore:y,hasNextPage:g||!1,isFetchingNextPage:h})})]})}var ee="Tabs",[Os,na]=Z(ee,[Me]),Ze=Me(),[$s,pe]=Os(ee),Ye=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...f}=t,p=nr(c),[u,g]=ae({prop:s,onChange:a,defaultProp:o??"",caller:ee});return e.jsx($s,{scope:n,baseId:z(),value:u,onValueChange:g,orientation:l,dir:p,activationMode:d,children:e.jsx(R.div,{dir:p,"data-orientation":l,...f,ref:r})})});Ye.displayName=ee;var Je="TabsList",Xe=i.forwardRef((t,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=t,o=pe(Je,n),l=Ze(n);return e.jsx(dr,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:e.jsx(R.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:r})})});Xe.displayName=Je;var et="TabsTrigger",tt=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=t,l=pe(et,n),c=Ze(n),d=nt(l.baseId,s),f=at(l.baseId,s),p=s===l.value;return e.jsx(ur,{asChild:!0,...c,focusable:!a,active:p,children:e.jsx(R.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":f,"data-state":p?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:r,onMouseDown:k(t.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?l.onValueChange(s):u.preventDefault()}),onKeyDown:k(t.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&l.onValueChange(s)}),onFocus:k(t.onFocus,()=>{const u=l.activationMode!=="manual";!p&&!a&&u&&l.onValueChange(s)})})})});tt.displayName=et;var rt="TabsContent",st=i.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...l}=t,c=pe(rt,n),d=nt(c.baseId,s),f=at(c.baseId,s),p=s===c.value,u=i.useRef(p);return i.useEffect(()=>{const g=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx($,{present:a||p,children:({present:g})=>e.jsx(R.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:f,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:u.current?"0s":void 0},children:g&&o})})});st.displayName=rt;function nt(t,r){return`${t}-trigger-${r}`}function at(t,r){return`${t}-content-${r}`}var Fs=Ye,zs=Xe,Gs=tt,Hs=st;function Vs({className:t,...r}){return e.jsx(Fs,{"data-slot":"tabs",className:j("flex flex-col gap-2",t),...r})}function qs({className:t,...r}){return e.jsx(zs,{"data-slot":"tabs-list",className:j("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...r})}function je({className:t,...r}){return e.jsx(Gs,{"data-slot":"tabs-trigger",className:j("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Ne({className:t,...r}){return e.jsx(Hs,{"data-slot":"tabs-content",className:j("flex-1 outline-none",t),...r})}function Bs({className:t,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:j("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}function Ks({value:t,onChange:r,disabled:n=!1,maxLength:s=2e3,label:a="Recipe generation prompt",placeholder:o="Describe the recipe you want to generate..."}){const l=s-t.length,c=l<100,d=l===0,f=p=>{const u=p.target.value;u.length<=s&&r(u)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(fr,{htmlFor:"recipe-prompt",children:a}),e.jsx(Bs,{id:"recipe-prompt",value:t,onChange:f,disabled:n,placeholder:o,className:"min-h-[200px] resize-none",maxLength:s,"aria-describedby":"prompt-counter"}),e.jsxs("div",{id:"prompt-counter",className:`text-xs text-right ${d?"text-destructive font-semibold":c?"text-yellow-600 dark:text-yellow-500":"text-muted-foreground"}`,"aria-live":"polite",children:[t.length," / ",s," characters",d&&" (limit reached)"]})]})}function Us(t){const r=t.message?.toLowerCase()||"";return r.includes("validation")||r.includes("bad request")?{title:"Invalid prompt",description:"Make sure the prompt is between 1-2000 characters and doesn't contain forbidden patterns.",canRetry:!1}:r.includes("too large")||r.includes("413")?{title:"Result too large",description:"Generated recipe exceeds 200KB limit. Try a simpler prompt.",canRetry:!0}:r.includes("too many")||r.includes("429")?{title:"Rate limit exceeded",description:`Please wait ${t.details?.retry_after||60} seconds before trying again.`,canRetry:!1}:r.includes("unavailable")||r.includes("503")?{title:"AI service unavailable",description:"AI service is temporarily unavailable. Please try again in a moment.",canRetry:!0}:r.includes("internal")||r.includes("500")?{title:"Server error",description:"We're sorry, something went wrong. Please try again.",canRetry:!0}:{title:"An error occurred",description:t.message||"Failed to generate recipe. Please try again.",canRetry:!0}}function Ws({onClick:t,disabled:r,loading:n,error:s,onRetry:a}){const o=s?Us(s):null;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(T,{onClick:t,disabled:r||n,className:"w-full gap-2",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-5 w-5 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-5 w-5"}),"Generate recipe"]})}),n&&e.jsxs("div",{className:"text-xs text-center text-muted-foreground","aria-live":"polite",children:["AI is analyzing your prompt and creating a recipe...",e.jsx("br",{}),"This may take a few seconds."]}),s&&o&&e.jsxs(oe,{variant:"destructive",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx(Oe,{children:o.title}),e.jsxs(ie,{className:"mt-2",children:[e.jsx("p",{className:"text-sm",children:o.description}),o.canRetry&&a&&e.jsxs(T,{variant:"outline",size:"sm",onClick:a,className:"mt-3 gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Try again"]})]})]})]})}function Qs({onGenerated:t}){const[r,n]=i.useState(""),[s,a]=i.useState(null),o=Rs();i.useEffect(()=>{s&&a(null)},[r]);const l=()=>{!r.trim()||r.length<1||r.length>2e3||(a(null),o.mutate({prompt:r.trim()},{onSuccess:p=>{const u={prompt:r.trim(),recipe:p.recipe,generationId:p.generation_id,generatedAt:p.generated_at};sessionStorage.setItem("generatorDraft",JSON.stringify(u)),t(p)},onError:p=>{a(p)}}))},c=()=>{l()},f=!(r.trim().length>=1&&r.trim().length<=2e3)||o.isPending;return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Recipe Generator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe the recipe you want to create, and AI will generate a detailed recipe for you."})]}),e.jsx(Ks,{value:r,onChange:n,disabled:o.isPending,maxLength:2e3,placeholder:"E.g. 'Quick dinner for two with chicken and vegetables' or 'Vegan chocolate dessert without sugar'"}),e.jsx(Ws,{onClick:l,disabled:f,loading:o.isPending,error:s,onRetry:c}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Tips:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Be specific - describe ingredients, cuisine type, or dietary preferences"}),e.jsx("li",{children:"You can specify number of servings, preparation time, or difficulty level"}),e.jsx("li",{children:"AI will create a complete recipe with ingredients, instructions, and nutritional info"})]})]})]})}function Zs({data:t,onTagClick:r,readonly:n=!1}){const s="recipe"in t?t.recipe:t,a="tags"in t&&Array.isArray(t.tags)?t.tags:s.tags||[],o=["bg-blue-100 text-blue-700 dark:bg-blue-950/40 dark:text-blue-300 border-blue-200 dark:border-blue-800","bg-purple-100 text-purple-700 dark:bg-purple-950/40 dark:text-purple-300 border-purple-200 dark:border-purple-800","bg-pink-100 text-pink-700 dark:bg-pink-950/40 dark:text-pink-300 border-pink-200 dark:border-pink-800","bg-orange-100 text-orange-700 dark:bg-orange-950/40 dark:text-orange-300 border-orange-200 dark:border-orange-800","bg-teal-100 text-teal-700 dark:bg-teal-950/40 dark:text-teal-300 border-teal-200 dark:border-teal-800","bg-cyan-100 text-cyan-700 dark:bg-cyan-950/40 dark:text-cyan-300 border-cyan-200 dark:border-cyan-800","bg-indigo-100 text-indigo-700 dark:bg-indigo-950/40 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800","bg-lime-100 text-lime-700 dark:bg-lime-950/40 dark:text-lime-300 border-lime-200 dark:border-lime-800"],l=x=>{let m=0;for(let y=0;y<x.length;y++)m=x.charCodeAt(y)+((m<<5)-m);return o[Math.abs(m)%o.length]},[c,d]=i.useState(s.servings),[f,p]=i.useState(new Set),[u,g]=i.useState(new Set),h=c/s.servings,b=x=>h===1?x:x.replace(/(\d+(\.\d+)?)/g,m=>{const D=parseFloat(m)*h;return Number.isInteger(D)?D.toString():D.toFixed(1).replace(/\.0$/,"")}),N=x=>{const m=new Set(f);m.has(x)?m.delete(x):m.add(x),p(m)},v=x=>{const m=new Set(u);m.has(x)?m.delete(x):m.add(x),g(m)},w={easy:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",hard:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return e.jsxs("article",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:s.title}),s.cuisine&&e.jsx("p",{className:"text-muted-foreground/70 italic text-sm",children:s.cuisine})]}),s.summary&&e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:s.summary}),s.description&&e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description}),(a.length>0||s.dietary_info&&Object.keys(s.dietary_info).length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.dietary_info&&Object.entries(s.dietary_info).map(([x,m])=>m&&e.jsx(W,{variant:"outline",className:"rounded-full border-2 bg-emerald-50 text-emerald-700 border-emerald-300 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-700 px-3",children:x.replace(/_/g," ")},x)),a.map(x=>e.jsx(W,{variant:"outline",className:j("transition-all border",l(x),r&&!n&&"cursor-pointer hover:scale-105 hover:shadow-sm"),onClick:()=>!n&&r?.(x),role:r&&!n?"button":void 0,tabIndex:r&&!n?0:void 0,onKeyDown:m=>{!n&&r&&(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),r(x))},children:x},x))]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Nr,{className:"h-4 w-4"}),e.jsxs("span",{children:["Prep: ",s.prep_time_minutes,"m | Cook: ",s.cook_time_minutes,"m"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(W,{className:w[s.difficulty],children:s.difficulty})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-primary/5 dark:bg-primary/10 py-2 px-4 rounded-full border border-primary/20",children:[e.jsx(zr,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium uppercase tracking-wide",children:"Serves:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>d(Math.max(1,c-1)),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Decrease servings",children:"-"}),e.jsx("span",{className:"font-bold text-foreground min-w-[1.5rem] text-center",children:c}),e.jsx("button",{onClick:()=>d(c+1),className:"w-6 h-6 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 transition-colors active:scale-95","aria-label":"Increase servings",children:"+"})]})]})]})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Ingredients"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f.size," of ",s.ingredients.length]})]}),e.jsx("ul",{className:"space-y-3",children:s.ingredients.map((x,m)=>{const y=f.has(m);return e.jsx("li",{children:e.jsxs("button",{onClick:()=>N(m),className:j("group flex items-start gap-3 w-full text-left p-3 rounded-xl transition-all duration-200",y?"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-800 dark:text-emerald-200":"hover:bg-accent bg-transparent"),children:[e.jsx("div",{className:j("mt-0.5 flex-shrink-0 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors",y?"border-emerald-500 bg-emerald-500":"border-border group-hover:border-primary"),children:y&&e.jsx(ve,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:j("text-foreground leading-relaxed transition-opacity",y&&"line-through opacity-70"),children:b(x)})]})},m)})})]}),e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Instructions"}),e.jsxs("div",{className:"text-sm font-medium px-3 py-1 bg-primary/10 dark:bg-primary/20 text-primary rounded-full",children:["Step"," ",u.size<s.instructions.length?u.size+1:s.instructions.length," of"," ",s.instructions.length]})]}),e.jsx("ol",{className:"space-y-6",children:s.instructions.map((x,m)=>{const y=u.has(m);return e.jsxs("li",{className:"relative flex gap-4 sm:gap-6 group",children:[m!==s.instructions.length-1&&e.jsx("div",{className:j("absolute left-4 top-10 bottom-0 w-0.5 -ml-px",y?"bg-primary/30":"bg-border"),"aria-hidden":"true"}),e.jsx("button",{onClick:()=>v(m),className:j("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-all z-10",y?"bg-primary border-primary text-primary-foreground ring-4 ring-primary/20":"bg-background border-border text-primary group-hover:border-primary"),"aria-label":`Toggle step ${m+1}`,children:y?e.jsx(ve,{className:"w-5 h-5"}):m+1}),e.jsx("div",{className:j("flex-grow pt-1 pb-6 transition-opacity duration-300",y?"opacity-50":"opacity-100"),children:e.jsx("p",{className:j("text-foreground leading-relaxed text-lg",y&&"line-through decoration-muted-foreground/30"),children:x})})]},m)})}),u.size===s.instructions.length&&e.jsxs("div",{className:"mt-8 p-6 bg-emerald-50 dark:bg-emerald-950/30 rounded-2xl border border-emerald-200 dark:border-emerald-800 text-center",children:[e.jsx(be,{className:"w-12 h-12 text-emerald-500 dark:text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100 mb-1",children:"Bon AppÃ©tit!"}),e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300",children:"You've completed this recipe."})]})]}),s.nutrition&&Object.keys(s.nutrition).length>0&&e.jsxs("section",{className:"border-t pt-6",children:[e.jsxs("h2",{className:"text-sm font-bold text-foreground uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Pr,{className:"w-4 h-4 text-orange-500"}),"Nutrition per serving"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.nutrition.calories!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1",children:"Calories"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.calories*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"kcal"})]})]}),s.nutrition.protein_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(hr,{className:"w-3 h-3 mr-1 text-red-400"})," Protein"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.protein_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.carbs_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(Hr,{className:"w-3 h-3 mr-1 text-amber-400"})," Carbs"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.carbs_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]}),s.nutrition.fat_g!==void 0&&e.jsxs("div",{className:"bg-card dark:bg-card p-4 rounded-lg shadow-sm border border-border flex flex-col",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium uppercase mb-1 flex items-center",children:[e.jsx(Cr,{className:"w-3 h-3 mr-1 text-yellow-500"})," Fat"]}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-2xl font-bold text-foreground leading-none mr-1",children:Math.round(s.nutrition.fat_g*h/c*s.servings)}),e.jsx("span",{className:"text-sm text-muted-foreground font-medium pb-0.5",children:"g"})]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-4 text-center",children:"Nutritional values are approximate and may differ from actual values."})]})]})}function Ys({onClick:t,disabled:r,loading:n,disabledReason:s}){const a=e.jsxs(T,{onClick:t,disabled:r||n,className:"gap-2",size:"lg",children:[e.jsx(Mr,{className:"h-5 w-5"}),n?"Saving...":"Save recipe"]});return r&&s?e.jsx(X,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:a}),e.jsx(H,{className:"max-w-xs",children:e.jsx("p",{children:s})})]}),s.toLowerCase().includes("disliked")&&e.jsxs("a",{href:"/profile",className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Tr,{className:"h-3 w-3"}),"Update dietary preferences"]})]})}):a}var te="Dialog",[ot,it]=Z(te),[Js,S]=ot(te),lt=t=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=i.useRef(null),d=i.useRef(null),[f,p]=ae({prop:s,defaultProp:a??!1,onChange:o,caller:te});return e.jsx(Js,{scope:r,triggerRef:c,contentRef:d,contentId:z(),titleId:z(),descriptionId:z(),open:f,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(u=>!u),[p]),modal:l,children:n})};lt.displayName=te;var ct="DialogTrigger",dt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=S(ct,n),o=I(r,a.triggerRef);return e.jsx(R.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":he(a.open),...s,ref:o,onClick:k(t.onClick,a.onOpenToggle)})});dt.displayName=ct;var fe="DialogPortal",[Xs,ut]=ot(fe,{forceMount:void 0}),pt=t=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=t,o=S(fe,r);return e.jsx(Xs,{scope:r,forceMount:n,children:i.Children.map(s,l=>e.jsx($,{present:n||o.open,children:e.jsx(_e,{asChild:!0,container:a,children:l})}))})};pt.displayName=fe;var Q="DialogOverlay",ft=i.forwardRef((t,r)=>{const n=ut(Q,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=S(Q,t.__scopeDialog);return o.modal?e.jsx($,{present:s||o.open,children:e.jsx(tn,{...a,ref:r})}):null});ft.displayName=Q;var en=Xt("DialogOverlay.RemoveScroll"),tn=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=S(Q,n);return e.jsx(ir,{as:en,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(R.div,{"data-state":he(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),M="DialogContent",gt=i.forwardRef((t,r)=>{const n=ut(M,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,o=S(M,t.__scopeDialog);return e.jsx($,{present:s||o.open,children:o.modal?e.jsx(rn,{...a,ref:r}):e.jsx(sn,{...a,ref:r})})});gt.displayName=M;var rn=i.forwardRef((t,r)=>{const n=S(M,t.__scopeDialog),s=i.useRef(null),a=I(r,n.contentRef,s);return i.useEffect(()=>{const o=s.current;if(o)return or(o)},[]),e.jsx(ht,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:k(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:k(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:k(t.onFocusOutside,o=>o.preventDefault())})}),sn=i.forwardRef((t,r)=>{const n=S(M,t.__scopeDialog),s=i.useRef(!1),a=i.useRef(!1);return e.jsx(ht,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(s.current||n.triggerRef.current?.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;n.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),ht=i.forwardRef((t,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=t,c=S(M,n),d=i.useRef(null),f=I(r,d);return lr(),e.jsxs(e.Fragment,{children:[e.jsx(cr,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(Ae,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":he(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(an,{titleId:c.titleId}),e.jsx(ln,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ge="DialogTitle",mt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=S(ge,n);return e.jsx(R.h2,{id:a.titleId,...s,ref:r})});mt.displayName=ge;var xt="DialogDescription",vt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=S(xt,n);return e.jsx(R.p,{id:a.descriptionId,...s,ref:r})});vt.displayName=xt;var bt="DialogClose",yt=i.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=S(bt,n);return e.jsx(R.button,{type:"button",...s,ref:r,onClick:k(t.onClick,()=>a.onOpenChange(!1))})});yt.displayName=bt;function he(t){return t?"open":"closed"}var jt="DialogTitleWarning",[nn,Nt]=ar(jt,{contentName:M,titleName:ge,docsSlug:"dialog"}),an=({titleId:t})=>{const r=Nt(jt),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},on="DialogDescriptionWarning",ln=({contentRef:t,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nt(on).contentName}}.`;return i.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,t,r]),null},cn=lt,dn=dt,un=pt,pn=ft,fn=gt,gn=mt,hn=vt,wt=yt,Ct="AlertDialog",[mn,aa]=Z(Ct,[it]),A=it(),kt=t=>{const{__scopeAlertDialog:r,...n}=t,s=A(r);return e.jsx(cn,{...s,...n,modal:!0})};kt.displayName=Ct;var xn="AlertDialogTrigger",Tt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(dn,{...a,...s,ref:r})});Tt.displayName=xn;var vn="AlertDialogPortal",Dt=t=>{const{__scopeAlertDialog:r,...n}=t,s=A(r);return e.jsx(un,{...s,...n})};Dt.displayName=vn;var bn="AlertDialogOverlay",St=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(pn,{...a,...s,ref:r})});St.displayName=bn;var L="AlertDialogContent",[yn,jn]=mn(L),Nn=Se("AlertDialogContent"),Pt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,children:s,...a}=t,o=A(n),l=i.useRef(null),c=I(r,l),d=i.useRef(null);return e.jsx(nn,{contentName:L,titleName:Rt,docsSlug:"alert-dialog",children:e.jsx(yn,{scope:n,cancelRef:d,children:e.jsxs(fn,{role:"alertdialog",...o,...a,ref:c,onOpenAutoFocus:k(a.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(Nn,{children:s}),e.jsx(Cn,{contentRef:l})]})})})});Pt.displayName=L;var Rt="AlertDialogTitle",_t=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(gn,{...a,...s,ref:r})});_t.displayName=Rt;var At="AlertDialogDescription",Et=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(hn,{...a,...s,ref:r})});Et.displayName=At;var wn="AlertDialogAction",Mt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=A(n);return e.jsx(wt,{...a,...s,ref:r})});Mt.displayName=wn;var It="AlertDialogCancel",Lt=i.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:a}=jn(It,n),o=A(n),l=I(r,a);return e.jsx(wt,{...o,...s,ref:l})});Lt.displayName=It;var Cn=({contentRef:t})=>{const r=`\`${L}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${L}\` by passing a \`${At}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${L}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},kn=kt,Tn=Tt,Dn=Dt,Sn=St,Pn=Pt,Rn=Mt,_n=Lt,An=_t,En=Et;function Mn({...t}){return e.jsx(kn,{"data-slot":"alert-dialog",...t})}function In({...t}){return e.jsx(Tn,{"data-slot":"alert-dialog-trigger",...t})}function Ln({...t}){return e.jsx(Dn,{"data-slot":"alert-dialog-portal",...t})}function On({className:t,...r}){return e.jsx(Sn,{"data-slot":"alert-dialog-overlay",className:j("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function $n({className:t,...r}){return e.jsxs(Ln,{children:[e.jsx(On,{}),e.jsx(Pn,{"data-slot":"alert-dialog-content",className:j("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r})]})}function Fn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:j("flex flex-col gap-2 text-center sm:text-left",t),...r})}function zn({className:t,...r}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:j("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function Gn({className:t,...r}){return e.jsx(An,{"data-slot":"alert-dialog-title",className:j("text-lg font-semibold",t),...r})}function Hn({className:t,...r}){return e.jsx(En,{"data-slot":"alert-dialog-description",className:j("text-muted-foreground text-sm",t),...r})}function Vn({className:t,...r}){return e.jsx(Rn,{className:j(Pe(),t),...r})}function qn({className:t,...r}){return e.jsx(_n,{className:j(Pe({variant:"outline"}),t),...r})}function Bn({recipeId:t,recipeName:r,onDeleted:n,loading:s=!1}){const[a,o]=i.useState(!1),l=()=>{n(t),o(!1)};return e.jsxs(Mn,{open:a,onOpenChange:o,children:[e.jsx(In,{asChild:!0,children:e.jsxs(T,{variant:"destructive",size:"lg",className:"gap-2",disabled:s,children:[e.jsx($r,{className:"h-5 w-5"}),"Delete recipe"]})}),e.jsxs($n,{children:[e.jsxs(Fn,{children:[e.jsx(Gn,{children:"Are you sure?"}),e.jsxs(Hn,{children:['This will permanently delete "',e.jsx("strong",{children:r}),'". This action cannot be undone.']})]}),e.jsxs(zn,{children:[e.jsx(qn,{children:"Cancel"}),e.jsx(Vn,{onClick:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})}function Kn({mode:t,recipe:r,details:n,onSaved:s,onDeleted:a,onTagClick:o,onRestoreDraft:l}){const{data:c}=Zt(),d=_s(),f=As(),p=v=>{if(!c?.disliked_ingredients||c.disliked_ingredients.length===0)return null;const w=c.disliked_ingredients.map(y=>y.toLowerCase()),x=v.ingredients.map(y=>y.toLowerCase()),m=w.find(y=>x.some(D=>D.includes(y)));return m?`This recipe contains "${m}" which is in your disliked ingredients list.`:null},u=()=>{r&&d.mutate({recipe:r,tags:r.tags},{onSuccess:v=>{K.success("Recipe saved successfully!"),s?.(v)},onError:v=>{K.error(v.message||"Failed to save recipe")}})},g=v=>{f.mutate(v,{onSuccess:()=>{K.success("Recipe deleted successfully!"),a?.(v)},onError:w=>{K.error(w.message||"Failed to delete recipe")}})};if(!r&&!n)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:e.jsx($e,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No recipe selected"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Select a recipe from the list or generate a new one using AI to see it here."})]});const h=t==="saved"&&n?n:r;if(!h)return null;const b=t==="draft"&&r?p(r):null,N=t==="draft"&&!b;return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[b&&e.jsx(oe,{children:e.jsx(ie,{children:b})}),e.jsx(Zs,{data:h,onTagClick:o,readonly:t==="saved"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-6 border-t",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="draft"&&r&&e.jsxs(e.Fragment,{children:[e.jsx(Ys,{onClick:u,disabled:!N||d.isPending,loading:d.isPending,disabledReason:b||void 0}),l&&e.jsxs(T,{variant:"outline",size:"lg",onClick:l,className:"gap-2",children:[e.jsx(Ar,{className:"h-5 w-5"}),"Restore from draft"]})]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t==="saved"&&n&&e.jsx(Bn,{recipeId:n.id,recipeName:n.title,onDeleted:g,loading:f.isPending})})]})]})})}function Un({selectedRecipeId:t,onTagClick:r,onRecipeDeleted:n,onRecipeGenerated:s}){const[a,o]=i.useState("preview"),[l,c]=i.useState(),{data:d}=Ps(t||"");i.useEffect(()=>{t&&d&&o("preview")},[t,d]),i.useEffect(()=>{const v=()=>{window.location.hash==="#generator"&&(o("generator"),window.history.replaceState(null,"",window.location.pathname+window.location.search))};return v(),window.addEventListener("hashchange",v),()=>window.removeEventListener("hashchange",v)},[]);const f=v=>{c(v.recipe),o("preview"),s?.()},p=v=>{c(void 0),console.log("Recipe saved:",v.id)},u=()=>{n?.(),window.history.pushState({},"","/app")},g=()=>{const v=sessionStorage.getItem("generatorDraft");if(v)try{const w=JSON.parse(v);c(w.recipe)}catch(w){console.error("Failed to restore draft:",w)}},h=t&&d?"saved":"draft",b=!t&&l,N=t&&d;return e.jsx("div",{className:"h-full flex flex-col",children:e.jsxs(Vs,{value:a,onValueChange:v=>o(v),className:"flex-1 flex flex-col",children:[e.jsxs(qs,{className:"w-full",children:[e.jsx(je,{value:"generator",className:"flex-1",children:"Generator"}),e.jsxs(je,{value:"preview",className:"flex-1",children:["Preview",(b||N)&&e.jsx("span",{className:"ml-2 h-2 w-2 rounded-full bg-primary"})]})]}),e.jsx(Ne,{value:"generator",className:"flex-1 overflow-hidden mt-0",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(Qs,{onGenerated:f})})}),e.jsx(Ne,{value:"preview",className:"flex-1 overflow-hidden mt-0",children:e.jsx(Kn,{mode:h,recipe:b?l:void 0,details:N?d:void 0,onSaved:p,onDeleted:u,onTagClick:r,onRestoreDraft:g})})]})})}function Wn({selectedRecipeId:t}){const[r,n]=i.useState(t),[s,a]=i.useState(()=>typeof window<"u"?localStorage.getItem("leftPanelCollapsed")==="true":!1),o=u=>{n(u),window.history.pushState({},"",`/app/recipes/${u}`),typeof window<"u"&&window.innerWidth<1024&&(a(!0),typeof window<"u"&&localStorage.setItem("leftPanelCollapsed","true"))},l=u=>{const g=new URLSearchParams(window.location.search),h=g.get("tags")?.split(",").filter(Boolean)||[];if(!h.includes(u.toLowerCase())){h.push(u.toLowerCase()),g.set("tags",h.join(",")),g.delete("offset");const b=`${window.location.pathname}?${g.toString()}`;window.history.pushState({},"",b),window.dispatchEvent(new PopStateEvent("popstate"))}},c=()=>{console.log("Switch to Generator tab")},d=()=>{n(void 0)},f=()=>{n(void 0),window.history.pushState({},"","/app")},p=()=>{a(u=>{const g=!u;return typeof window<"u"&&localStorage.setItem("leftPanelCollapsed",String(g)),g})};return i.useEffect(()=>{const u=g=>{(g.ctrlKey||g.metaKey)&&g.key==="b"&&(g.preventDefault(),p())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]),e.jsxs("div",{className:"relative grid lg:grid-cols-[auto_1fr] gap-4 h-full",children:[e.jsx("div",{className:j("flex flex-col h-full border rounded-lg bg-card transition-all duration-300 ease-in-out","lg:relative",s?"lg:w-0 lg:overflow-hidden lg:border-0 lg:p-0 lg:gap-0":"lg:w-[420px]","fixed lg:static left-0 right-0 z-40","max-lg:top-16 max-lg:h-[calc(100vh-5rem)] max-lg:mx-4 max-lg:shadow-xl",s?"max-lg:-translate-y-[calc(100%+5rem)] max-lg:opacity-0 max-lg:pointer-events-none":"max-lg:translate-y-0 max-lg:opacity-100"),children:e.jsx(Ls,{selectedId:r,onSelect:o,onGenerateClick:c,onToggleCollapse:p})}),s&&e.jsx(X,{children:e.jsxs(de,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(T,{onClick:p,variant:"outline",size:"icon",className:j("fixed z-50 shadow-lg hover:shadow-xl transition-shadow","lg:top-20 lg:left-4","max-lg:top-16 max-lg:left-1/2 max-lg:-translate-x-1/2"),"aria-label":"Show recipe list",children:[e.jsx(yr,{className:"h-4 w-4 hidden lg:block"}),e.jsx(ke,{className:"h-4 w-4 lg:hidden"})]})}),e.jsxs(H,{side:"right",className:"hidden lg:block",children:[e.jsx("p",{children:"Show recipe list"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ctrl+B"})]}),e.jsx(H,{side:"bottom",className:"lg:hidden",children:e.jsx("p",{children:"Show recipe list"})})]})}),e.jsx("div",{className:j("flex flex-col h-full border rounded-lg bg-card transition-all duration-300",!s&&"max-lg:hidden"),children:e.jsx(Un,{selectedRecipeId:r,onTagClick:l,onRecipeDeleted:d,onRecipeGenerated:f})}),!s&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30 transition-opacity duration-300",onClick:p,"aria-hidden":"true"})]})}function oa({selectedRecipeId:t}){return e.jsxs(Yt,{children:[e.jsx(Wn,{selectedRecipeId:t}),e.jsx(Jt,{})]})}export{oa as AppPage};
