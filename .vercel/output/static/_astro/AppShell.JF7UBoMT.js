import{c as H,j as o}from"./createLucideIcon.Dkxjm4wi.js";import{r as s}from"./index.BkdHoFEG.js";import{D as fn,T as mn}from"./DarkModeToggle.BEg8hsAg.js";import{B as P,P as j,u as L,f as hn,b as gn,g as we,a as X,s as B}from"./supabase.client.D2OLuBHL.js";import{L as xn,c as Me,k as vn,a as _e,m as Ce,f as wn,R as Mn,A as _n,P as Cn,d as g,h as Sn,j as bn,i as yn,F as Rn,D as In,C as En,e as Pn,b as jn,u as he}from"./Combination.BffOO78u.js";import{c as Se,P as Y,I as Nn,R as Dn,S as An}from"./index.C9fTgtLT.js";import{c as kn,a as Tn}from"./telemetry.C471PJLg.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ln=H("book-open",On);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Gn=H("circle-user",Fn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Un=H("log-out",Kn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bn=H("user",$n),zn="en";function ge(e){return["pl","en"].includes(e)}const be=s.createContext(void 0);function Vn({children:e,authToken:t}){const[n,r]=s.useState(()=>{if(typeof window<"u"){const u=localStorage.getItem("preferred_language");if(u&&ge(u))return u;const f=navigator.language.split("-")[0];if(ge(f))return f}return zn}),[a,c]=s.useState(!1);s.useEffect(()=>{typeof window<"u"&&(document.documentElement.lang=n)},[n]);const d=s.useCallback(async u=>{if(u!==n){if(c(!0),r(u),localStorage.setItem("preferred_language",u),t)try{(await fetch("/api/profile",{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({preferred_language:u})})).ok?console.log("✓ Language preference synced to profile"):console.warn("⚠ Failed to sync language preference to backend (localStorage still works)")}catch(f){console.warn("⚠ Network error syncing language preference:",f)}c(!1)}},[n,t]);return o.jsx(be.Provider,{value:{lang:n,setLang:d,isLoading:a},children:e})}function Hn(){const e=s.useContext(be);if(e===void 0)throw new Error("useI18n must be used within an I18nProvider");return e}function Xn(){const{lang:e,setLang:t,isLoading:n}=Hn(),r=async a=>{a!==e&&await t(a)};return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(P,{variant:e==="pl"?"default":"ghost",size:"sm",onClick:()=>r("pl"),disabled:n,"aria-label":"Switch to Polish",className:"min-w-[42px] px-2",children:"PL"}),o.jsx(P,{variant:e==="en"?"default":"ghost",size:"sm",onClick:()=>r("en"),disabled:n,"aria-label":"Switch to English",className:"min-w-[42px] px-2",children:"EN"}),n&&o.jsx(xn,{className:"h-3 w-3 animate-spin text-muted-foreground ml-1","aria-label":"Syncing language..."})]})}var te=["Enter"," "],Yn=["ArrowDown","PageUp","Home"],ye=["ArrowUp","PageDown","End"],Wn=[...Yn,...ye],qn={ltr:[...te,"ArrowRight"],rtl:[...te,"ArrowLeft"]},Jn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},F="Menu",[T,Zn,Qn]=vn(F),[S,Re]=Me(F,[Qn,_e,Se]),W=_e(),Ie=Se(),[et,b]=S(F),[nt,G]=S(F),Ee=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:c,modal:d=!0}=e,u=W(t),[f,h]=s.useState(null),p=s.useRef(!1),i=Ce(c),m=wn(a);return s.useEffect(()=>{const M=()=>{p.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>p.current=!1;return document.addEventListener("keydown",M,{capture:!0}),()=>{document.removeEventListener("keydown",M,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(Mn,{...u,children:o.jsx(et,{scope:t,open:n,onOpenChange:i,content:f,onContentChange:h,children:o.jsx(nt,{scope:t,onClose:s.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:p,dir:m,modal:d,children:r})})})};Ee.displayName=F;var tt="MenuAnchor",oe=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=W(n);return o.jsx(_n,{...a,...r,ref:t})});oe.displayName=tt;var re="MenuPortal",[ot,Pe]=S(re,{forceMount:void 0}),je=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,c=b(re,t);return o.jsx(ot,{scope:t,forceMount:n,children:o.jsx(Y,{present:n||c.open,children:o.jsx(Cn,{asChild:!0,container:a,children:r})})})};je.displayName=re;var _="MenuContent",[rt,ae]=S(_),Ne=s.forwardRef((e,t)=>{const n=Pe(_,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,c=b(_,e.__scopeMenu),d=G(_,e.__scopeMenu);return o.jsx(T.Provider,{scope:e.__scopeMenu,children:o.jsx(Y,{present:r||c.open,children:o.jsx(T.Slot,{scope:e.__scopeMenu,children:d.modal?o.jsx(at,{...a,ref:t}):o.jsx(st,{...a,ref:t})})})})}),at=s.forwardRef((e,t)=>{const n=b(_,e.__scopeMenu),r=s.useRef(null),a=L(t,r);return s.useEffect(()=>{const c=r.current;if(c)return Sn(c)},[]),o.jsx(se,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),st=s.forwardRef((e,t)=>{const n=b(_,e.__scopeMenu);return o.jsx(se,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ct=gn("MenuContent.ScrollLock"),se=s.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:m,onDismiss:M,disableOutsideScroll:x,...y}=e,N=b(_,n),R=G(_,n),rn=W(n),an=Ie(n),de=Zn(n),[sn,le]=s.useState(null),K=s.useRef(null),cn=L(t,K,N.onContentChange),U=s.useRef(0),$=s.useRef(""),un=s.useRef(0),Z=s.useRef(null),pe=s.useRef("right"),Q=s.useRef(0),dn=x?yn:s.Fragment,ln=x?{as:ct,allowPinchZoom:!0}:void 0,pn=l=>{const E=$.current+l,C=de().filter(w=>!w.disabled),D=document.activeElement,ee=C.find(w=>w.ref.current===D)?.textValue,ne=C.map(w=>w.textValue),fe=wt(ne,E,ee),A=C.find(w=>w.textValue===fe)?.ref.current;(function w(me){$.current=me,window.clearTimeout(U.current),me!==""&&(U.current=window.setTimeout(()=>w(""),1e3))})(E),A&&setTimeout(()=>A.focus())};s.useEffect(()=>()=>window.clearTimeout(U.current),[]),bn();const I=s.useCallback(l=>pe.current===Z.current?.side&&_t(l,Z.current?.area),[]);return o.jsx(rt,{scope:n,searchRef:$,onItemEnter:s.useCallback(l=>{I(l)&&l.preventDefault()},[I]),onItemLeave:s.useCallback(l=>{I(l)||(K.current?.focus(),le(null))},[I]),onTriggerLeave:s.useCallback(l=>{I(l)&&l.preventDefault()},[I]),pointerGraceTimerRef:un,onPointerGraceIntentChange:s.useCallback(l=>{Z.current=l},[]),children:o.jsx(dn,{...ln,children:o.jsx(Rn,{asChild:!0,trapped:a,onMountAutoFocus:g(c,l=>{l.preventDefault(),K.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:o.jsx(In,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:m,onDismiss:M,children:o.jsx(Dn,{asChild:!0,...an,dir:R.dir,orientation:"vertical",loop:r,currentTabStopId:sn,onCurrentTabStopIdChange:le,onEntryFocus:g(f,l=>{R.isUsingKeyboardRef.current||l.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(En,{role:"menu","aria-orientation":"vertical","data-state":Xe(N.open),"data-radix-menu-content":"",dir:R.dir,...rn,...y,ref:cn,style:{outline:"none",...y.style},onKeyDown:g(y.onKeyDown,l=>{const C=l.target.closest("[data-radix-menu-content]")===l.currentTarget,D=l.ctrlKey||l.altKey||l.metaKey,ee=l.key.length===1;C&&(l.key==="Tab"&&l.preventDefault(),!D&&ee&&pn(l.key));const ne=K.current;if(l.target!==ne||!Wn.includes(l.key))return;l.preventDefault();const A=de().filter(w=>!w.disabled).map(w=>w.ref.current);ye.includes(l.key)&&A.reverse(),xt(A)}),onBlur:g(e.onBlur,l=>{l.currentTarget.contains(l.target)||(window.clearTimeout(U.current),$.current="")}),onPointerMove:g(e.onPointerMove,O(l=>{const E=l.target,C=Q.current!==l.clientX;if(l.currentTarget.contains(E)&&C){const D=l.clientX>Q.current?"right":"left";pe.current=D,Q.current=l.clientX}}))})})})})})})});Ne.displayName=_;var it="MenuGroup",ce=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(j.div,{role:"group",...r,ref:t})});ce.displayName=it;var ut="MenuLabel",De=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(j.div,{...r,ref:t})});De.displayName=ut;var z="MenuItem",xe="menu.itemSelect",q=s.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,c=s.useRef(null),d=G(z,e.__scopeMenu),u=ae(z,e.__scopeMenu),f=L(t,c),h=s.useRef(!1),p=()=>{const i=c.current;if(!n&&i){const m=new CustomEvent(xe,{bubbles:!0,cancelable:!0});i.addEventListener(xe,M=>r?.(M),{once:!0}),hn(i,m),m.defaultPrevented?h.current=!1:d.onClose()}};return o.jsx(Ae,{...a,ref:f,disabled:n,onClick:g(e.onClick,p),onPointerDown:i=>{e.onPointerDown?.(i),h.current=!0},onPointerUp:g(e.onPointerUp,i=>{h.current||i.currentTarget?.click()}),onKeyDown:g(e.onKeyDown,i=>{const m=u.searchRef.current!=="";n||m&&i.key===" "||te.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});q.displayName=z;var Ae=s.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...c}=e,d=ae(z,n),u=Ie(n),f=s.useRef(null),h=L(t,f),[p,i]=s.useState(!1),[m,M]=s.useState("");return s.useEffect(()=>{const x=f.current;x&&M((x.textContent??"").trim())},[c.children]),o.jsx(T.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:o.jsx(Nn,{asChild:!0,...u,focusable:!r,children:o.jsx(j.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:h,onPointerMove:g(e.onPointerMove,O(x=>{r?d.onItemLeave(x):(d.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,O(x=>d.onItemLeave(x))),onFocus:g(e.onFocus,()=>i(!0)),onBlur:g(e.onBlur,()=>i(!1))})})})}),dt="MenuCheckboxItem",ke=s.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return o.jsx(Ge,{scope:e.__scopeMenu,checked:n,children:o.jsx(q,{role:"menuitemcheckbox","aria-checked":V(n)?"mixed":n,...a,ref:t,"data-state":ue(n),onSelect:g(a.onSelect,()=>r?.(V(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ke.displayName=dt;var Te="MenuRadioGroup",[lt,pt]=S(Te,{value:void 0,onValueChange:()=>{}}),Oe=s.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,c=Ce(r);return o.jsx(lt,{scope:e.__scopeMenu,value:n,onValueChange:c,children:o.jsx(ce,{...a,ref:t})})});Oe.displayName=Te;var Le="MenuRadioItem",Fe=s.forwardRef((e,t)=>{const{value:n,...r}=e,a=pt(Le,e.__scopeMenu),c=n===a.value;return o.jsx(Ge,{scope:e.__scopeMenu,checked:c,children:o.jsx(q,{role:"menuitemradio","aria-checked":c,...r,ref:t,"data-state":ue(c),onSelect:g(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Fe.displayName=Le;var ie="MenuItemIndicator",[Ge,ft]=S(ie,{checked:!1}),Ke=s.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,c=ft(ie,n);return o.jsx(Y,{present:r||V(c.checked)||c.checked===!0,children:o.jsx(j.span,{...a,ref:t,"data-state":ue(c.checked)})})});Ke.displayName=ie;var mt="MenuSeparator",Ue=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(j.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Ue.displayName=mt;var ht="MenuArrow",$e=s.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=W(n);return o.jsx(Pn,{...a,...r,ref:t})});$e.displayName=ht;var gt="MenuSub",[Po,Be]=S(gt),k="MenuSubTrigger",ze=s.forwardRef((e,t)=>{const n=b(k,e.__scopeMenu),r=G(k,e.__scopeMenu),a=Be(k,e.__scopeMenu),c=ae(k,e.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=c,h={__scopeMenu:e.__scopeMenu},p=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>p,[p]),s.useEffect(()=>{const i=u.current;return()=>{window.clearTimeout(i),f(null)}},[u,f]),o.jsx(oe,{asChild:!0,...h,children:o.jsx(Ae,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Xe(n.open),...e,ref:we(t,a.onTriggerChange),onClick:i=>{e.onClick?.(i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,O(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:g(e.onPointerLeave,O(i=>{p();const m=n.content?.getBoundingClientRect();if(m){const M=n.content?.dataset.side,x=M==="right",y=x?-5:5,N=m[x?"left":"right"],R=m[x?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+y,y:i.clientY},{x:N,y:m.top},{x:R,y:m.top},{x:R,y:m.bottom},{x:N,y:m.bottom}],side:M}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,i=>{const m=c.searchRef.current!=="";e.disabled||m&&i.key===" "||qn[r.dir].includes(i.key)&&(n.onOpenChange(!0),n.content?.focus(),i.preventDefault())})})})});ze.displayName=k;var Ve="MenuSubContent",He=s.forwardRef((e,t)=>{const n=Pe(_,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,c=b(_,e.__scopeMenu),d=G(_,e.__scopeMenu),u=Be(Ve,e.__scopeMenu),f=s.useRef(null),h=L(t,f);return o.jsx(T.Provider,{scope:e.__scopeMenu,children:o.jsx(Y,{present:r||c.open,children:o.jsx(T.Slot,{scope:e.__scopeMenu,children:o.jsx(se,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:h,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{d.isUsingKeyboardRef.current&&f.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:g(e.onFocusOutside,p=>{p.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,p=>{d.onClose(),p.preventDefault()}),onKeyDown:g(e.onKeyDown,p=>{const i=p.currentTarget.contains(p.target),m=Jn[d.dir].includes(p.key);i&&m&&(c.onOpenChange(!1),u.trigger?.focus(),p.preventDefault())})})})})})});He.displayName=Ve;function Xe(e){return e?"open":"closed"}function V(e){return e==="indeterminate"}function ue(e){return V(e)?"indeterminate":e?"checked":"unchecked"}function xt(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function vt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function wt(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,c=n?e.indexOf(n):-1;let d=vt(e,Math.max(c,0));a.length===1&&(d=d.filter(h=>h!==n));const f=d.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function Mt(e,t){const{x:n,y:r}=e;let a=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const u=t[c],f=t[d],h=u.x,p=u.y,i=f.x,m=f.y;p>r!=m>r&&n<(i-h)*(r-p)/(m-p)+h&&(a=!a)}return a}function _t(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Mt(n,t)}function O(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Ct=Ee,St=oe,bt=je,yt=Ne,Rt=ce,It=De,Et=q,Pt=ke,jt=Oe,Nt=Fe,Dt=Ke,At=Ue,kt=$e,Tt=ze,Ot=He,J="DropdownMenu",[Lt,jo]=Me(J,[Re]),v=Re(),[Ft,Ye]=Lt(J),We=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:c,onOpenChange:d,modal:u=!0}=e,f=v(t),h=s.useRef(null),[p,i]=jn({prop:a,defaultProp:c??!1,onChange:d,caller:J});return o.jsx(Ft,{scope:t,triggerId:he(),triggerRef:h,contentId:he(),open:p,onOpenChange:i,onOpenToggle:s.useCallback(()=>i(m=>!m),[i]),modal:u,children:o.jsx(Ct,{...f,open:p,onOpenChange:i,dir:r,modal:u,children:n})})};We.displayName=J;var qe="DropdownMenuTrigger",Je=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,c=Ye(qe,n),d=v(n);return o.jsx(St,{asChild:!0,...d,children:o.jsx(j.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:we(t,c.triggerRef),onPointerDown:g(e.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(c.onOpenToggle(),c.open||u.preventDefault())}),onKeyDown:g(e.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&c.onOpenToggle(),u.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});Je.displayName=qe;var Gt="DropdownMenuPortal",Ze=e=>{const{__scopeDropdownMenu:t,...n}=e,r=v(t);return o.jsx(bt,{...r,...n})};Ze.displayName=Gt;var Qe="DropdownMenuContent",en=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ye(Qe,n),c=v(n),d=s.useRef(!1);return o.jsx(yt,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...r,ref:t,onCloseAutoFocus:g(e.onCloseAutoFocus,u=>{d.current||a.triggerRef.current?.focus(),d.current=!1,u.preventDefault()}),onInteractOutside:g(e.onInteractOutside,u=>{const f=u.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,p=f.button===2||h;(!a.modal||p)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});en.displayName=Qe;var Kt="DropdownMenuGroup",Ut=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Rt,{...a,...r,ref:t})});Ut.displayName=Kt;var $t="DropdownMenuLabel",nn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(It,{...a,...r,ref:t})});nn.displayName=$t;var Bt="DropdownMenuItem",tn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Et,{...a,...r,ref:t})});tn.displayName=Bt;var zt="DropdownMenuCheckboxItem",Vt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Pt,{...a,...r,ref:t})});Vt.displayName=zt;var Ht="DropdownMenuRadioGroup",Xt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(jt,{...a,...r,ref:t})});Xt.displayName=Ht;var Yt="DropdownMenuRadioItem",Wt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Nt,{...a,...r,ref:t})});Wt.displayName=Yt;var qt="DropdownMenuItemIndicator",Jt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Dt,{...a,...r,ref:t})});Jt.displayName=qt;var Zt="DropdownMenuSeparator",on=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(At,{...a,...r,ref:t})});on.displayName=Zt;var Qt="DropdownMenuArrow",eo=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(kt,{...a,...r,ref:t})});eo.displayName=Qt;var no="DropdownMenuSubTrigger",to=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Tt,{...a,...r,ref:t})});to.displayName=no;var oo="DropdownMenuSubContent",ro=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=v(n);return o.jsx(Ot,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ro.displayName=oo;var ao=We,so=Je,co=Ze,io=en,uo=nn,lo=tn,po=on;function fo({...e}){return o.jsx(ao,{"data-slot":"dropdown-menu",...e})}function mo({...e}){return o.jsx(so,{"data-slot":"dropdown-menu-trigger",...e})}function ho({className:e,sideOffset:t=4,...n}){return o.jsx(co,{children:o.jsx(io,{"data-slot":"dropdown-menu-content",sideOffset:t,className:X("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ve({className:e,inset:t,variant:n="default",...r}){return o.jsx(lo,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:X("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function go({className:e,inset:t,...n}){return o.jsx(uo,{"data-slot":"dropdown-menu-label","data-inset":t,className:X("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function xo({className:e,...t}){return o.jsx(po,{"data-slot":"dropdown-menu-separator",className:X("bg-border -mx-1 my-1 h-px",e),...t})}function vo({email:e}){const[t,n]=s.useState(!1),r=async()=>{n(!0);try{if(!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw new Error("Logout failed");kn(),window.location.href="/login"}catch(a){console.error("Logout error:",a),n(!1),alert("Failed to logout. Please try again.")}};return o.jsxs(fo,{children:[o.jsx(mo,{asChild:!0,children:o.jsxs(P,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",disabled:t,children:[o.jsx(Bn,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm max-w-[150px] truncate hidden sm:inline",children:e})]})}),o.jsxs(ho,{align:"end",className:"w-56",children:[o.jsx(go,{children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsx("p",{className:"text-sm font-medium leading-none",children:"Account"}),o.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:e})]})}),o.jsx(xo,{}),o.jsx(ve,{asChild:!0,className:"cursor-pointer",children:o.jsxs("a",{href:"/profile",className:"flex items-center",children:[o.jsx(Gn,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:"Profile"})]})}),o.jsxs(ve,{onClick:r,disabled:t,className:"cursor-pointer text-destructive focus:text-destructive",children:[o.jsx(Un,{className:"mr-2 h-4 w-4"}),o.jsx("span",{children:t?"Signing out...":"Sign out"})]})]})]})}function wo(){const[e,t]=s.useState(null),[n,r]=s.useState(!0);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:c}})=>{t(c?.user??null),r(!1),c?.user&&Tn().catch(()=>{})});const{data:{subscription:a}}=B.auth.onAuthStateChange((c,d)=>{t(d?.user??null),r(!1)});return()=>a.unsubscribe()},[]),{user:e,loading:n}}function Mo(){const{user:e,loading:t}=wo();return o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container flex h-14 items-center px-4",children:[o.jsx("div",{className:"mr-6 flex",children:o.jsxs("a",{href:"/",className:"flex items-center space-x-2",children:[o.jsx("img",{src:"/favicon.svg",alt:"SavorAI Logo",className:"h-6 w-6"}),o.jsx("span",{className:"text-xl font-bold",children:"SavorAI"})]})}),e&&!t&&o.jsxs("nav",{className:"hidden md:flex items-center space-x-1 mr-4",children:[o.jsx(P,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:"/app",className:"flex items-center gap-2",children:[o.jsx(Ln,{className:"h-4 w-4"}),"Recipes"]})}),o.jsx(P,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:"/app#generator",className:"flex items-center gap-2",children:[o.jsx(An,{className:"h-4 w-4"}),"Generator"]})})]}),o.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-3",children:[o.jsx(fn,{}),o.jsx(Xn,{}),!t&&o.jsx(o.Fragment,{children:e?o.jsx(vo,{email:e.email??"User"}):o.jsx(P,{variant:"ghost",size:"sm",asChild:!0,children:o.jsx("a",{href:"/login",children:"Sign In"})})})]})]})})}function No(){const[e,t]=s.useState(null);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:r}})=>{t(r?.access_token??null)});const{data:{subscription:n}}=B.auth.onAuthStateChange((r,a)=>{t(a?.access_token??null)});return()=>n.unsubscribe()},[]),o.jsx(mn,{children:o.jsx(Vn,{authToken:e,children:o.jsx(Mo,{})})})}export{No as AppShell};
