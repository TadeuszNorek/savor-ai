import{c as H,j as r}from"./createLucideIcon.Dkxjm4wi.js";import{r as s}from"./index.BkdHoFEG.js";import{D as pn,T as fn}from"./DarkModeToggle.BEg8hsAg.js";import{f as re,L as mn,c as Me,l as hn,a as we,n as _e,g as xn,R as gn,A as vn,P as Mn,d as x,i as wn,k as _n,j as Cn,F as bn,D as Rn,C as Sn,e as yn,b as jn,u as xe,I as Dn}from"./Combination.Dh1SshfH.js";import{B as I,P as E,u as L,f as In,b as En,g as Ce,a as X,s as B}from"./supabase.client.D2OLuBHL.js";import{c as be,P as Y,I as Nn,R as Pn,S as kn}from"./index.C5C8q3WA.js";import{c as An,a as Tn}from"./telemetry.C471PJLg.js";import"./index.yjdR7O-I.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ln=H("book-open",On);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Gn=H("circle-user",Fn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Un=H("log-out",Kn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bn=H("user",$n);function zn(){const{lang:e,setLang:t,isLoading:n}=re(),o=async a=>{a!==e&&await t(a)};return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(I,{variant:e==="pl"?"default":"ghost",size:"sm",onClick:()=>o("pl"),disabled:n,"aria-label":"Switch to Polish",className:"min-w-[42px] px-2",children:"PL"}),r.jsx(I,{variant:e==="en"?"default":"ghost",size:"sm",onClick:()=>o("en"),disabled:n,"aria-label":"Switch to English",className:"min-w-[42px] px-2",children:"EN"}),n&&r.jsx(mn,{className:"h-3 w-3 animate-spin text-muted-foreground ml-1","aria-label":"Syncing language..."})]})}var te=["Enter"," "],Vn=["ArrowDown","PageUp","Home"],Re=["ArrowUp","PageDown","End"],Hn=[...Vn,...Re],Xn={ltr:[...te,"ArrowRight"],rtl:[...te,"ArrowLeft"]},Yn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},F="Menu",[T,Wn,qn]=hn(F),[b,Se]=Me(F,[qn,we,be]),W=we(),ye=be(),[Zn,R]=b(F),[Jn,G]=b(F),je=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:a,onOpenChange:c,modal:d=!0}=e,l=W(t),[m,h]=s.useState(null),p=s.useRef(!1),i=_e(c),f=xn(a);return s.useEffect(()=>{const w=()=>{p.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>p.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),r.jsx(gn,{...l,children:r.jsx(Zn,{scope:t,open:n,onOpenChange:i,content:m,onContentChange:h,children:r.jsx(Jn,{scope:t,onClose:s.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:p,dir:f,modal:d,children:o})})})};je.displayName=F;var Qn="MenuAnchor",oe=s.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,a=W(n);return r.jsx(vn,{...a,...o,ref:t})});oe.displayName=Qn;var ae="MenuPortal",[et,De]=b(ae,{forceMount:void 0}),Ie=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:a}=e,c=R(ae,t);return r.jsx(et,{scope:t,forceMount:n,children:r.jsx(Y,{present:n||c.open,children:r.jsx(Mn,{asChild:!0,container:a,children:o})})})};Ie.displayName=ae;var _="MenuContent",[nt,se]=b(_),Ee=s.forwardRef((e,t)=>{const n=De(_,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=R(_,e.__scopeMenu),d=G(_,e.__scopeMenu);return r.jsx(T.Provider,{scope:e.__scopeMenu,children:r.jsx(Y,{present:o||c.open,children:r.jsx(T.Slot,{scope:e.__scopeMenu,children:d.modal?r.jsx(tt,{...a,ref:t}):r.jsx(rt,{...a,ref:t})})})})}),tt=s.forwardRef((e,t)=>{const n=R(_,e.__scopeMenu),o=s.useRef(null),a=L(t,o);return s.useEffect(()=>{const c=o.current;if(c)return wn(c)},[]),r.jsx(ce,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:x(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rt=s.forwardRef((e,t)=>{const n=R(_,e.__scopeMenu);return r.jsx(ce,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ot=En("MenuContent.ScrollLock"),ce=s.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:l,onEntryFocus:m,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:f,onDismiss:w,disableOutsideScroll:g,...S}=e,N=R(_,n),y=G(_,n),rn=W(n),on=ye(n),le=Wn(n),[an,pe]=s.useState(null),K=s.useRef(null),sn=L(t,K,N.onContentChange),U=s.useRef(0),$=s.useRef(""),cn=s.useRef(0),J=s.useRef(null),fe=s.useRef("right"),Q=s.useRef(0),un=g?Cn:s.Fragment,dn=g?{as:ot,allowPinchZoom:!0}:void 0,ln=u=>{const D=$.current+u,C=le().filter(M=>!M.disabled),P=document.activeElement,ee=C.find(M=>M.ref.current===P)?.textValue,ne=C.map(M=>M.textValue),me=xt(ne,D,ee),k=C.find(M=>M.textValue===me)?.ref.current;(function M(he){$.current=he,window.clearTimeout(U.current),he!==""&&(U.current=window.setTimeout(()=>M(""),1e3))})(D),k&&setTimeout(()=>k.focus())};s.useEffect(()=>()=>window.clearTimeout(U.current),[]),_n();const j=s.useCallback(u=>fe.current===J.current?.side&&vt(u,J.current?.area),[]);return r.jsx(nt,{scope:n,searchRef:$,onItemEnter:s.useCallback(u=>{j(u)&&u.preventDefault()},[j]),onItemLeave:s.useCallback(u=>{j(u)||(K.current?.focus(),pe(null))},[j]),onTriggerLeave:s.useCallback(u=>{j(u)&&u.preventDefault()},[j]),pointerGraceTimerRef:cn,onPointerGraceIntentChange:s.useCallback(u=>{J.current=u},[]),children:r.jsx(un,{...dn,children:r.jsx(bn,{asChild:!0,trapped:a,onMountAutoFocus:x(c,u=>{u.preventDefault(),K.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:r.jsx(Rn,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:i,onInteractOutside:f,onDismiss:w,children:r.jsx(Pn,{asChild:!0,...on,dir:y.dir,orientation:"vertical",loop:o,currentTabStopId:an,onCurrentTabStopIdChange:pe,onEntryFocus:x(m,u=>{y.isUsingKeyboardRef.current||u.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Sn,{role:"menu","aria-orientation":"vertical","data-state":He(N.open),"data-radix-menu-content":"",dir:y.dir,...rn,...S,ref:sn,style:{outline:"none",...S.style},onKeyDown:x(S.onKeyDown,u=>{const C=u.target.closest("[data-radix-menu-content]")===u.currentTarget,P=u.ctrlKey||u.altKey||u.metaKey,ee=u.key.length===1;C&&(u.key==="Tab"&&u.preventDefault(),!P&&ee&&ln(u.key));const ne=K.current;if(u.target!==ne||!Hn.includes(u.key))return;u.preventDefault();const k=le().filter(M=>!M.disabled).map(M=>M.ref.current);Re.includes(u.key)&&k.reverse(),mt(k)}),onBlur:x(e.onBlur,u=>{u.currentTarget.contains(u.target)||(window.clearTimeout(U.current),$.current="")}),onPointerMove:x(e.onPointerMove,O(u=>{const D=u.target,C=Q.current!==u.clientX;if(u.currentTarget.contains(D)&&C){const P=u.clientX>Q.current?"right":"left";fe.current=P,Q.current=u.clientX}}))})})})})})})});Ee.displayName=_;var at="MenuGroup",ie=s.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(E.div,{role:"group",...o,ref:t})});ie.displayName=at;var st="MenuLabel",Ne=s.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(E.div,{...o,ref:t})});Ne.displayName=st;var z="MenuItem",ge="menu.itemSelect",q=s.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...a}=e,c=s.useRef(null),d=G(z,e.__scopeMenu),l=se(z,e.__scopeMenu),m=L(t,c),h=s.useRef(!1),p=()=>{const i=c.current;if(!n&&i){const f=new CustomEvent(ge,{bubbles:!0,cancelable:!0});i.addEventListener(ge,w=>o?.(w),{once:!0}),In(i,f),f.defaultPrevented?h.current=!1:d.onClose()}};return r.jsx(Pe,{...a,ref:m,disabled:n,onClick:x(e.onClick,p),onPointerDown:i=>{e.onPointerDown?.(i),h.current=!0},onPointerUp:x(e.onPointerUp,i=>{h.current||i.currentTarget?.click()}),onKeyDown:x(e.onKeyDown,i=>{const f=l.searchRef.current!=="";n||f&&i.key===" "||te.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});q.displayName=z;var Pe=s.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:a,...c}=e,d=se(z,n),l=ye(n),m=s.useRef(null),h=L(t,m),[p,i]=s.useState(!1),[f,w]=s.useState("");return s.useEffect(()=>{const g=m.current;g&&w((g.textContent??"").trim())},[c.children]),r.jsx(T.ItemSlot,{scope:n,disabled:o,textValue:a??f,children:r.jsx(Nn,{asChild:!0,...l,focusable:!o,children:r.jsx(E.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:h,onPointerMove:x(e.onPointerMove,O(g=>{o?d.onItemLeave(g):(d.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:x(e.onPointerLeave,O(g=>d.onItemLeave(g))),onFocus:x(e.onFocus,()=>i(!0)),onBlur:x(e.onBlur,()=>i(!1))})})})}),ct="MenuCheckboxItem",ke=s.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...a}=e;return r.jsx(Fe,{scope:e.__scopeMenu,checked:n,children:r.jsx(q,{role:"menuitemcheckbox","aria-checked":V(n)?"mixed":n,...a,ref:t,"data-state":de(n),onSelect:x(a.onSelect,()=>o?.(V(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ke.displayName=ct;var Ae="MenuRadioGroup",[it,ut]=b(Ae,{value:void 0,onValueChange:()=>{}}),Te=s.forwardRef((e,t)=>{const{value:n,onValueChange:o,...a}=e,c=_e(o);return r.jsx(it,{scope:e.__scopeMenu,value:n,onValueChange:c,children:r.jsx(ie,{...a,ref:t})})});Te.displayName=Ae;var Oe="MenuRadioItem",Le=s.forwardRef((e,t)=>{const{value:n,...o}=e,a=ut(Oe,e.__scopeMenu),c=n===a.value;return r.jsx(Fe,{scope:e.__scopeMenu,checked:c,children:r.jsx(q,{role:"menuitemradio","aria-checked":c,...o,ref:t,"data-state":de(c),onSelect:x(o.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Le.displayName=Oe;var ue="MenuItemIndicator",[Fe,dt]=b(ue,{checked:!1}),Ge=s.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...a}=e,c=dt(ue,n);return r.jsx(Y,{present:o||V(c.checked)||c.checked===!0,children:r.jsx(E.span,{...a,ref:t,"data-state":de(c.checked)})})});Ge.displayName=ue;var lt="MenuSeparator",Ke=s.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return r.jsx(E.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});Ke.displayName=lt;var pt="MenuArrow",Ue=s.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,a=W(n);return r.jsx(yn,{...a,...o,ref:t})});Ue.displayName=pt;var ft="MenuSub",[Sr,$e]=b(ft),A="MenuSubTrigger",Be=s.forwardRef((e,t)=>{const n=R(A,e.__scopeMenu),o=G(A,e.__scopeMenu),a=$e(A,e.__scopeMenu),c=se(A,e.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:m}=c,h={__scopeMenu:e.__scopeMenu},p=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>p,[p]),s.useEffect(()=>{const i=l.current;return()=>{window.clearTimeout(i),m(null)}},[l,m]),r.jsx(oe,{asChild:!0,...h,children:r.jsx(Pe,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":He(n.open),...e,ref:Ce(t,a.onTriggerChange),onClick:i=>{e.onClick?.(i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:x(e.onPointerMove,O(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:x(e.onPointerLeave,O(i=>{p();const f=n.content?.getBoundingClientRect();if(f){const w=n.content?.dataset.side,g=w==="right",S=g?-5:5,N=f[g?"left":"right"],y=f[g?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+S,y:i.clientY},{x:N,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x:N,y:f.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:x(e.onKeyDown,i=>{const f=c.searchRef.current!=="";e.disabled||f&&i.key===" "||Xn[o.dir].includes(i.key)&&(n.onOpenChange(!0),n.content?.focus(),i.preventDefault())})})})});Be.displayName=A;var ze="MenuSubContent",Ve=s.forwardRef((e,t)=>{const n=De(_,e.__scopeMenu),{forceMount:o=n.forceMount,...a}=e,c=R(_,e.__scopeMenu),d=G(_,e.__scopeMenu),l=$e(ze,e.__scopeMenu),m=s.useRef(null),h=L(t,m);return r.jsx(T.Provider,{scope:e.__scopeMenu,children:r.jsx(Y,{present:o||c.open,children:r.jsx(T.Slot,{scope:e.__scopeMenu,children:r.jsx(ce,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:h,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{d.isUsingKeyboardRef.current&&m.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:x(e.onFocusOutside,p=>{p.target!==l.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:x(e.onEscapeKeyDown,p=>{d.onClose(),p.preventDefault()}),onKeyDown:x(e.onKeyDown,p=>{const i=p.currentTarget.contains(p.target),f=Yn[d.dir].includes(p.key);i&&f&&(c.onOpenChange(!1),l.trigger?.focus(),p.preventDefault())})})})})})});Ve.displayName=ze;function He(e){return e?"open":"closed"}function V(e){return e==="indeterminate"}function de(e){return V(e)?"indeterminate":e?"checked":"unchecked"}function mt(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function ht(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function xt(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,c=n?e.indexOf(n):-1;let d=ht(e,Math.max(c,0));a.length===1&&(d=d.filter(h=>h!==n));const m=d.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return m!==n?m:void 0}function gt(e,t){const{x:n,y:o}=e;let a=!1;for(let c=0,d=t.length-1;c<t.length;d=c++){const l=t[c],m=t[d],h=l.x,p=l.y,i=m.x,f=m.y;p>o!=f>o&&n<(i-h)*(o-p)/(f-p)+h&&(a=!a)}return a}function vt(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return gt(n,t)}function O(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Mt=je,wt=oe,_t=Ie,Ct=Ee,bt=ie,Rt=Ne,St=q,yt=ke,jt=Te,Dt=Le,It=Ge,Et=Ke,Nt=Ue,Pt=Be,kt=Ve,Z="DropdownMenu",[At,yr]=Me(Z,[Se]),v=Se(),[Tt,Xe]=At(Z),Ye=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:a,defaultOpen:c,onOpenChange:d,modal:l=!0}=e,m=v(t),h=s.useRef(null),[p,i]=jn({prop:a,defaultProp:c??!1,onChange:d,caller:Z});return r.jsx(Tt,{scope:t,triggerId:xe(),triggerRef:h,contentId:xe(),open:p,onOpenChange:i,onOpenToggle:s.useCallback(()=>i(f=>!f),[i]),modal:l,children:r.jsx(Mt,{...m,open:p,onOpenChange:i,dir:o,modal:l,children:n})})};Ye.displayName=Z;var We="DropdownMenuTrigger",qe=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...a}=e,c=Xe(We,n),d=v(n);return r.jsx(wt,{asChild:!0,...d,children:r.jsx(E.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:Ce(t,c.triggerRef),onPointerDown:x(e.onPointerDown,l=>{!o&&l.button===0&&l.ctrlKey===!1&&(c.onOpenToggle(),c.open||l.preventDefault())}),onKeyDown:x(e.onKeyDown,l=>{o||(["Enter"," "].includes(l.key)&&c.onOpenToggle(),l.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});qe.displayName=We;var Ot="DropdownMenuPortal",Ze=e=>{const{__scopeDropdownMenu:t,...n}=e,o=v(t);return r.jsx(_t,{...o,...n})};Ze.displayName=Ot;var Je="DropdownMenuContent",Qe=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=Xe(Je,n),c=v(n),d=s.useRef(!1);return r.jsx(Ct,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...o,ref:t,onCloseAutoFocus:x(e.onCloseAutoFocus,l=>{d.current||a.triggerRef.current?.focus(),d.current=!1,l.preventDefault()}),onInteractOutside:x(e.onInteractOutside,l=>{const m=l.detail.originalEvent,h=m.button===0&&m.ctrlKey===!0,p=m.button===2||h;(!a.modal||p)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qe.displayName=Je;var Lt="DropdownMenuGroup",Ft=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(bt,{...a,...o,ref:t})});Ft.displayName=Lt;var Gt="DropdownMenuLabel",en=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(Rt,{...a,...o,ref:t})});en.displayName=Gt;var Kt="DropdownMenuItem",nn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(St,{...a,...o,ref:t})});nn.displayName=Kt;var Ut="DropdownMenuCheckboxItem",$t=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(yt,{...a,...o,ref:t})});$t.displayName=Ut;var Bt="DropdownMenuRadioGroup",zt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(jt,{...a,...o,ref:t})});zt.displayName=Bt;var Vt="DropdownMenuRadioItem",Ht=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(Dt,{...a,...o,ref:t})});Ht.displayName=Vt;var Xt="DropdownMenuItemIndicator",Yt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(It,{...a,...o,ref:t})});Yt.displayName=Xt;var Wt="DropdownMenuSeparator",tn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(Et,{...a,...o,ref:t})});tn.displayName=Wt;var qt="DropdownMenuArrow",Zt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(Nt,{...a,...o,ref:t})});Zt.displayName=qt;var Jt="DropdownMenuSubTrigger",Qt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(Pt,{...a,...o,ref:t})});Qt.displayName=Jt;var er="DropdownMenuSubContent",nr=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,a=v(n);return r.jsx(kt,{...a,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nr.displayName=er;var tr=Ye,rr=qe,or=Ze,ar=Qe,sr=en,cr=nn,ir=tn;function ur({...e}){return r.jsx(tr,{"data-slot":"dropdown-menu",...e})}function dr({...e}){return r.jsx(rr,{"data-slot":"dropdown-menu-trigger",...e})}function lr({className:e,sideOffset:t=4,...n}){return r.jsx(or,{children:r.jsx(ar,{"data-slot":"dropdown-menu-content",sideOffset:t,className:X("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ve({className:e,inset:t,variant:n="default",...o}){return r.jsx(cr,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:X("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}function pr({className:e,inset:t,...n}){return r.jsx(sr,{"data-slot":"dropdown-menu-label","data-inset":t,className:X("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function fr({className:e,...t}){return r.jsx(ir,{"data-slot":"dropdown-menu-separator",className:X("bg-border -mx-1 my-1 h-px",e),...t})}function mr({email:e}){const{t}=re(),[n,o]=s.useState(!1),a=async()=>{o(!0);try{if(!(await fetch("/api/auth/logout",{method:"POST"})).ok)throw new Error("Logout failed");An(),window.location.href="/login"}catch(c){console.error("Logout error:",c),o(!1),alert(t("header.logoutFailed"))}};return r.jsxs(ur,{children:[r.jsx(dr,{asChild:!0,children:r.jsxs(I,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",disabled:n,children:[r.jsx(Bn,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm max-w-[150px] truncate hidden sm:inline",children:e})]})}),r.jsxs(lr,{align:"end",className:"w-56",children:[r.jsx(pr,{children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:t("header.account")}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:e})]})}),r.jsx(fr,{}),r.jsx(ve,{asChild:!0,className:"cursor-pointer",children:r.jsxs("a",{href:"/profile",className:"flex items-center",children:[r.jsx(Gn,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:t("header.profile")})]})}),r.jsxs(ve,{onClick:a,disabled:n,className:"cursor-pointer text-destructive focus:text-destructive",children:[r.jsx(Un,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:t(n?"header.signingOut":"header.signOut")})]})]})]})}function hr(){const[e,t]=s.useState(null),[n,o]=s.useState(!0);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:c}})=>{t(c?.user??null),o(!1),c?.user&&Tn().catch(()=>{})});const{data:{subscription:a}}=B.auth.onAuthStateChange((c,d)=>{t(d?.user??null),o(!1)});return()=>a.unsubscribe()},[]),{user:e,loading:n}}function xr(){const{user:e,loading:t}=hr(),{t:n}=re();return r.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:r.jsxs("div",{className:"container flex h-14 items-center px-4",children:[r.jsx("div",{className:"mr-6 flex",children:r.jsxs("a",{href:"/",className:"flex items-center space-x-2",children:[r.jsx("img",{src:"/favicon.svg",alt:"SavorAI Logo",className:"h-6 w-6"}),r.jsx("span",{className:"text-xl font-bold",children:"SavorAI"})]})}),e&&!t&&r.jsxs("nav",{className:"hidden md:flex items-center space-x-1 mr-4",children:[r.jsx(I,{variant:"ghost",size:"sm",asChild:!0,children:r.jsxs("a",{href:"/app",className:"flex items-center gap-2",children:[r.jsx(Ln,{className:"h-4 w-4"}),n("header.recipes")]})}),r.jsx(I,{variant:"ghost",size:"sm",asChild:!0,children:r.jsxs("a",{href:"/app#generator",className:"flex items-center gap-2",children:[r.jsx(kn,{className:"h-4 w-4"}),n("header.generator")]})})]}),r.jsxs("div",{className:"flex flex-1 items-center justify-end space-x-3",children:[r.jsx(pn,{}),r.jsx(zn,{}),!t&&r.jsx(r.Fragment,{children:e?r.jsx(mr,{email:e.email??"User"}):r.jsx(I,{variant:"ghost",size:"sm",asChild:!0,children:r.jsx("a",{href:"/login",children:n("header.signIn")})})})]})]})})}function jr(){const[e,t]=s.useState(null);return s.useEffect(()=>{B.auth.getSession().then(({data:{session:o}})=>{t(o?.access_token??null)});const{data:{subscription:n}}=B.auth.onAuthStateChange((o,a)=>{t(a?.access_token??null)});return()=>n.unsubscribe()},[]),r.jsx(fn,{children:r.jsx(Dn,{authToken:e,children:r.jsx(xr,{})})})}export{jr as AppShell};
